<!-- –§–∞–π–ª: docs/NEW_–∞–¥–º–∏–Ω–∫–∞.md -->

# NEW_–∞–¥–º–∏–Ω–∫–∞.md

## 1. –¶–µ–ª–∏ –¥–ª—è Telegram-–∞–¥–º–∏–Ω–∫–∏ Operabot

---

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –≤ Telegram | –ì–¥–µ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å | –°—Ç–∞—Ç—É—Å |
|------------|---------------------------|----------------|---------|
| –û–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ | —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–∞ `/admin`, –Ω–∏–∫–∞–∫–∏—Ö reply-–∫–Ω–æ–ø–æ–∫ | `auth.py`, `admin_panel.py` | ‚úÖ –≤—Ö–æ–¥ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ `/admin`, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–∞–Ω–¥—ã |
| –í–∏–∑—É–∞–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è | inline-–º–µ–Ω—é —Å —Ä–∞–∑–¥–µ–ª–∞–º–∏ ¬´Dashboard¬ª, ¬´–û–ø–µ—Ä–∞—Ç–æ—Ä—ã¬ª, ¬´–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã¬ª, ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª, ¬´–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏¬ª, ¬´–ù–∞—Å—Ç—Ä–æ–π–∫–∏¬ª | `admin_panel.py` | ‚úÖ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∏ dashboard –æ–±–Ω–æ–≤–ª–µ–Ω—ã |
| –ù–æ—Ä–º–∞–ª—å–Ω—ã–µ back-–∫–Ω–æ–ø–∫–∏ | `‚óÄÔ∏è –ù–∞–∑–∞–¥` –≤ –∫–∞–∂–¥–æ–º —Ä–∞–∑–¥–µ–ª–µ + –≤–æ–∑–≤—Ä–∞—Ç –≤ –∫–æ—Ä–µ–Ω—å | –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã admin_* (users/admins/stats/panel) | ‚úÖ –≤–æ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ ¬´–ö —Å–ø–∏—Å–∫—É¬ª + ¬´üè† –í –ø–∞–Ω–µ–ª—å¬ª |
| –ö–∞—Ç–∞–ª–æ–≥–∏ –ª—é–¥–µ–π | Pending/approved –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –¥–µ–π—Å—Ç–≤—É—é—â–∏–µ –∞–¥–º–∏–Ω—ã, –∫–∞–Ω–¥–∏–¥–∞—Ç—ã –≤ –ø—Ä–æ–º–æ, —Å–ø–∏—Å–æ–∫ –¥–ª—è `/report` | `admin_users.py`, `admin_admins.py`, `handlers/reports.py` | ‚úÖ –∫–∞—Ç–∞–ª–æ–≥–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤/–∞–¥–º–∏–Ω–æ–≤ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, `/report` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ª–∏—à–Ω–∏—Ö |
| –ö–∞—Ä—Ç–æ—á–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π | approve/decline/block/promote/demote/report ‚Äî –≤—Å—ë —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏ | —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ callback handlers | ‚úÖ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏/–∞–¥–º–∏–Ω—ã —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ inline-–∫–∞—Ä—Ç–æ—á–∫–∏ |
| –ú–µ—Ç—Ä–∏–∫–∏ –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ | –∫–∞—Ä—Ç–æ—á–∫–∏ ¬´–æ–∂–∏–¥–∞—é—Ç X¬ª, ¬´–∞–¥–º–∏–Ω–æ–≤ Y¬ª, ¬´–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å pending –ø—Ä—è–º–æ –∏–∑ /approve¬ª | `admin_panel.py`, `admin_commands.py` | ‚úÖ dashboard –∏ inline-–º–µ–Ω—é –æ–±–Ω–æ–≤–ª–µ–Ω—ã, `/approve` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç pending |
| –°–ø–∏—Å–∫–∏ –≤–º–µ—Å—Ç–æ usage-—Ç–µ–∫—Å—Ç–æ–≤ | –∫–æ–º–∞–Ω–¥—ã `/approve`, `/make_admin`, `/make_superadmin`, `/report` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ë–î | `admin_commands.py`, `handlers/reports.py` | ‚úÖ `/approve` –∏ `/make_*` —Ç–µ–ø–µ—Ä—å —á–µ—Ä–µ–∑ inline —Å–ø–∏—Å–∫–∏; `/report` —É–∂–µ –∫–∞—Ç–∞–ª–æ–∂–Ω—ã–π |
| –¢–æ–ª—å–∫–æ Telegram | –Ω–∏–∫–∞–∫–∏—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü, –≤—Å—ë –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏ inline-UI | –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç | ‚úÖ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ü–µ–ª–∏–∫–æ–º –≤ Telegram |

–ì–ª–∞–≤–Ω–∞—è –∏–¥–µ—è: **–¥–µ–ª–∞–µ–º ¬´–≤–µ–±¬ª-–æ–ø—ã—Ç –ø—Ä—è–º–æ –≤–Ω—É—Ç—Ä–∏ Telegram**, –∏—Å–ø–æ–ª—å–∑—É—è inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –∏ –∫–∞—Ä—Ç–æ—á–∫–∏. –ù–∏–∫–∞–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü/Flask ‚Äì —Ç–æ–ª—å–∫–æ —Ö–µ–Ω–¥–ª–µ—Ä—ã.

---

## 2. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–æ–≤

### 2.1 –ö–æ—Ä–Ω–µ–≤–æ–π —ç–∫—Ä–∞–Ω `/admin`

**–°—Ç–∞—Ç—É—Å: ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–æ (`admin_panel._show_main_menu`).**

```
üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
üìä Dashboard      üë• –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã üìà –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
üìÇ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏    ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
```

* `admin_panel.py::_show_main_menu` ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã.  
* –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –≤–µ–¥—ë—Ç –∫ callback `admin:<section>` ‚Äî –æ–¥–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã.  
* –ù–∞–¥–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ **–≤—Å–µ back-–∫–Ω–æ–ø–∫–∏** –≤—ã–∑—ã–≤–∞—é—Ç `admin:back`.

### 2.2 Dashboard –∫–∞—Ä—Ç–æ—á–∫–∏

**–°—Ç–∞—Ç—É—Å: ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ `_show_dashboard` (–ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—Ç `get_users_counters`).**

* Pending –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (`get_pending_users`), —Å –ø–æ–¥—Å–∫–∞–∑–∫–æ–π ¬´/approve —á—Ç–æ–±—ã‚Ä¶¬ª.  
* –ö–æ–ª-–≤–æ –∞–¥–º–∏–Ω–æ–≤ (`get_admins`).  
* –ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (–ø—Ä–æ—Å—Ç–æ placeholder).  
* –ö–Ω–æ–ø–∫–∞ `üîÑ –û–±–Ω–æ–≤–∏—Ç—å` + `‚óÄÔ∏è –ù–∞–∑–∞–¥`.

### 2.3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ (`admin_users.py`)

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ù–æ–≤—ã–π UX –≥–æ—Ç–æ–≤ (—Å–ø–∏—Å–∫–∏, –∫–∞—Ä—Ç–æ—á–∫–∏, refresh/back, promote, –ø–∞–≥–∏–Ω–∞—Ü–∏—è).**

1. –°–ø–∏—Å–∫–∏: pending/approved/blocked ‚Äî inline-–∫–Ω–æ–ø–∫–∏ 1 –Ω–∞ —Å—Ç—Ä–æ–∫—É.  
2. –î–µ—Ç–∞–ª–∏: –∏–º—è, username, extension, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å.  
3. –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π: Approve / Decline / Block / Unblock.  
4. –ü–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ ‚Äî –ª–∏–±–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è, –ª–∏–±–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º.  
5. **Back**: –≤—Å–µ–≥–¥–∞ `‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É` -> `admin:users:list:<status>`.

### 2.4 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞–º–∏ (`admin_admins.py`)

**–°—Ç–∞—Ç—É—Å: ‚úÖ –°–ø–∏—Å–∫–∏/–∫–∞–Ω–¥–∏–¥–∞—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∫–∞—Ä—Ç–æ—á–∫–∏, –µ—Å—Ç—å refresh/back –∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è.**

* `admin:admins:list` ‚Äî –∫–∞—Ç–∞–ª–æ–≥ –¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö –∞–¥–º–∏–Ω–æ–≤ + –∫–Ω–æ–ø–∫–∞ ¬´‚ûï –ù–∞–∑–Ω–∞—á–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞¬ª.  
* –î–µ—Ç–∞–ª–∏ –∞–¥–º–∏–Ω–∞: —Ä–æ–ª—å, username, Telegram ID ‚Üí –∫–Ω–æ–ø–∫–∏ promote/demote.  
* `admin:admins:candidates` ‚Äî —Å–ø–∏—Å–æ–∫ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è.  
* –ü—Ä–∏–Ω—Ü–∏–ø —Ç–æ—Ç –∂–µ, —á—Ç–æ –≤ web-–∞–¥–º–∏–Ω–∫–∞—Ö: –Ω–∞–∂–∞–ª –∏–º—è ‚Üí –≤–∏–¥–∏—à—å –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí –¥–µ–π—Å—Ç–≤—É–µ—à—å.  
* Back/refresh ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã.

### 2.5 `/report` –∫–∞–∫ –∫–∞—Ç–∞–ª–æ–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ö–∞—Ç–∞–ª–æ–≥ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç dev-–∞–∫–∫–∞—É–Ω—Ç—ã –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ –±–µ–∑ extension.**

* –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤: –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (approved+pending) —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.  
* –ù–∞–∂–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –±–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ç –æ—Ç—á—ë—Ç –∏ —à–ª—ë—Ç –≤—ã–∑—ã–≤–∞—é—â–µ–º—É.  
* –û–±—ã—á–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä, –≤—ã–∑—ã–≤–∞—è `/report`, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç—á—ë—Ç –ø–æ —Å–µ–±–µ.  
* –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ: —É–¥–∞–ª—è–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ dev-–∞–∫–∫–∞—É–Ω—Ç–∞, –ø—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ pending –ø–æ–º–µ—á–µ–Ω—ã.

### 2.6 Call lookup –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç HTML-–ø–æ–¥—Å–∫–∞–∑–∫—É —Å inline-–∫–Ω–æ–ø–∫–∞–º–∏, —Ä–∞–∑–¥–µ–ª –∞–¥–º–∏–Ω–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ UX.**

* `/call_lookup` ‚Äî –µ—Å–ª–∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—ä—è—Å–Ω—è–µ–º —Ñ–æ—Ä–º–∞—Ç (HTML-–ø–æ–¥—Å–∫–∞–∑–∫–∞).  
* –í –ø–∞–Ω–µ–ª–∏ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª ¬´üìÇ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏¬ª ‚Üí —Ç–æ–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –ø–æ–¥—Å–∫–∞–∑–∫—É, –±–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—ã—Ö usage-–±–ª–æ–∫–æ–≤.

---

## 3. UX-–ø—Ä–∞–≤–∏–ª–∞ (–±–µ–∑ –≤–µ–±–∞)

**–°—Ç–∞—Ç—É—Å: ‚ö†Ô∏è –ø—Ä–∏–Ω—Ü–∏–ø—ã —á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–±–ª—é–¥–µ–Ω—ã (inline –µ—Å—Ç—å, –Ω–æ reply-–∫–ª–∞–≤—É –µ—â—ë –Ω–∞–¥–æ –ø–æ–¥—á–∏—Å—Ç–∏—Ç—å).**

1. **–¢–æ–ª—å–∫–æ inline UI**: –Ω–∏–∫–∞–∫–∏—Ö reply-–∫–Ω–æ–ø–æ–∫ –¥–ª—è –ø–∞–Ω–µ–ª–∏, –≤–µ—Å—å UX ‚Äî –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ —Å –∫–Ω–æ–ø–∫–∞–º–∏/–∫–∞—Ä—Ç–æ—á–∫–∞–º–∏.  
2. **–ë–µ—Å–∫–ª–∏–∫–æ–≤–∞–Ω–∏–µ**: –∫–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –æ—Ç–≤–µ—á–∞—Ç—å (–¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç) ‚Üí –ø–æ–¥–∫–ª—é—á–∏—Ç—å –ª–æ–≥–≥–µ—Ä –∏ —Ñ–∏–∫—Å–∏—Ç—å tracebacks.  
3. **–ù–µ—Ç usage-—Ç–µ–∫—Å—Ç–∞**: –≤–º–µ—Å—Ç–æ ¬´–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: ‚Ä¶¬ª –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–ø–∏—Å–∫–∏ –ª—é–¥–µ–π –∏–ª–∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏.  
4. **–ó–∞–≤–µ—Ä—à—ë–Ω–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–æ—á–∫–∏**: –ª—é–±–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (approve/block) —Å–æ–æ–±—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏ –¥–∞—ë—Ç —Å—Å—ã–ª–∫—É ¬´‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É¬ª.  
5. **Inline-–ø–∞–≥–∏–Ω–∞—Ü–∏—è**: –µ—Å–ª–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –±–æ–ª—å—à–µ 10‚Äì15 ‚Äî –∫–Ω–æ–ø–∫–∏ ¬´‚¨ÖÔ∏è/‚û°Ô∏è¬ª (–ø—Ä–∏–º–µ—Ä ‚Äî `/report`).  
6. **Back everywhere**: –≤—Å–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã —Å UI –¥–æ–ª–∂–Ω—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å `admin:back` –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –∫–æ—Ä–µ–Ω—å.

---

## 4. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏ (–ø–æ —Ñ–∞–π–ª–∞–º)

| –§–∞–π–ª | –ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å | –°—Ç–∞—Ç—É—Å |
|------|-------------|---------|
| `app/telegram/utils/buttons.py` | –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ –∫–Ω–æ–ø–∫–∏ (`CALL_LOOKUP_BUTTON`), –∞–¥–º–∏–Ω—Å–∫—É—é —É–±—Ä–∞—Ç—å | ‚ö†Ô∏è reply-–∫–Ω–æ–ø–∫–∏ –µ—â—ë –µ—Å—Ç—å |
| `app/telegram/handlers/auth.py` | –≤ `_build_keyboard_for_role` –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –¥–æ–±–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—ã `/admin`, `/call_lookup`, –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö emoji-–∫–Ω–æ–ø–æ–∫ | ‚ö†Ô∏è —Ç—Ä–µ–±—É—é—Ç—Å—è –ø—Ä–∞–≤–∫–∏ |
| `app/telegram/handlers/admin_panel.py` | –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤—Å–µ callback-–∏ –∫ —Ñ–æ—Ä–º–∞—Ç—É `admin:<...>`, –¥–æ–±–∞–≤–∏—Ç—å normal back, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–∂–∞—Ç–∏—è | ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `admin_users.py` / `admin_admins.py` | —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç–≤–µ—á–∞—é—Ç inline-—Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ + –µ—Å—Ç—å –≤–æ–∑–≤—Ä–∞—Ç/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ | ‚úÖ –æ–±–∞ —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –∫–∞—Ä—Ç–æ—á–∫–∏, refresh/back |
| `admin_commands.py` | –∫–æ–º–∞–Ω–¥—ã `/approve`, `/make_admin`, `/make_superadmin` –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏—Å–∫–∏ –∏–∑ –ë–î –≤–º–µ—Å—Ç–æ usage-—Ç–µ–∫—Å—Ç–∞ | ‚úÖ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (inline-UX) |
| `handlers/reports.py` | —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ inline –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, —Å–∫—Ä—ã—Ç—å dev-–∞–∫–∫–∞—É–Ω—Ç—ã, –ø—Ä–æ–≤–µ—Ä—è—Ç—å extension | ‚úÖ –∫–∞—Ç–∞–ª–æ–≥ —á–∏—Å—Ç–∏—Ç dev-–∞–∫–∫–∞—É–Ω—Ç—ã –∏ –∑–∞–ø–∏—Å–∏ –±–µ–∑ extension |
| `call_lookup.py` | –≤–º–µ—Å—Ç–æ ¬´–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ¬ª ‚Äî –∫–æ—Ä–æ—Ç–∫–∞—è HTML-–ø–æ–¥—Å–∫–∞–∑–∫–∞ —Å –ø—Ä–∏–º–µ—Ä–æ–º | ‚ö†Ô∏è usage-—Ç–µ–∫—Å—Ç –µ—â—ë –æ—Å—Ç–∞–ª—Å—è |
| `main.py` | —É–∂–µ –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ manual lifecycle (–≤–∞–∂–Ω–æ –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –ø–∞–Ω–µ–ª–∏) | ‚úÖ –≥–æ—Ç–æ–≤–æ |

---

## 5. –ò—Ç–æ–≥

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö —à–∞–≥–æ–≤ Telegram-–∞–¥–º–∏–Ω–∫–∞ –±—É–¥–µ—Ç –æ—â—É—â–∞—Ç—å—Å—è –∫–∞–∫ —Ç–∞ ¬´–∫—Ä–∞—Å–∏–≤–∞—è –∞–¥–º–∏–Ω–∫–∞¬ª, –Ω–æ –±–µ–∑ –µ–¥–∏–Ω–æ–π –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—ã:

* `/admin` ‚Üí –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–µ inline-–º–µ–Ω—é.  
* –í—Å–µ —Ä–∞–∑–¥–µ–ª—ã —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –∫–∞—Ç–∞–ª–æ–≥ ‚Üí –∫–∞—Ä—Ç–æ—á–∫–∞ ‚Üí –¥–µ–π—Å—Ç–≤–∏–µ.  
* –ê–¥–º–∏–Ω—ã/—Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç ¬´–≤–∏–¥–∏–º–æ–µ¬ª —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (–∑–∞—è–≤–∫–∏, –æ—Ç—á—ë—Ç—ã, –º–µ—Ç—Ä–∏–∫–∏).  
* –õ—é–±–∞—è –∫–æ–º–∞–Ω–¥–∞/—Ä–∞–∑–¥–µ–ª –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ `UsersTelegaBot`, –±–µ–∑ —Å—É—Ö–∏—Ö usage-—Å–æ–æ–±—â–µ–Ω–∏–π.  
* Dev-–∞–∫–∫–∞—É–Ω—Ç –∏–º–µ–µ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞ –∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–ø–∏—Å–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤/–æ—Ç—á—ë—Ç–æ–≤.

–≠—Ç–æ –∏ –µ—Å—Ç—å ¬´–∫–ª–∞—Å—Å–Ω–∞—è –∞–¥–º–∏–Ω–∫–∞¬ª –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ–∫—É—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: —Å—Ç—Ä–æ–≥–æ –≤–Ω—É—Ç—Ä–∏ Telegram, —Å –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–º inline-UI –∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º–∏ —Å–ø–∏—Å–∫–∞–º–∏ –≤–º–µ—Å—Ç–æ –∫—Ä–∏–ø–æ–≤—ã—Ö –∫–æ–º–∞–Ω–¥.

---

## 3. –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏

**–°—Ç–∞—Ç—É—Å: —Å–º–µ—à–∞–Ω–Ω—ã–π ‚Äî —Å–º. –ø–æ–º–µ—Ç–∫–∏ –Ω–∏–∂–µ.**

1. **–ß–∏—Å—Ç–∫–∞ reply‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** ‚Äî TODO: –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `/admin` –∏ —Ä–∞–±–æ—á–∏–µ –∫–æ–º–∞–Ω–¥—ã –±–µ–∑ emoji-–∫–Ω–æ–ø–∫–∏.  
2. **–ò–Ω–ª–∞–π–Ω‚Äë–º–µ–Ω—é** ‚Äî `/admin` –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —ç–∫—Ä–∞–Ω.  
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å handlers**:
    * `admin_panel.py` ‚Äî —Ä–æ—É—Ç–µ—Ä –∏ dashboard.  
    * `admin_users.py` ‚Äî CRUD –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.  
    * `admin_admins.py` ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏.  
    * `admin_stats.py` ‚Äî –∞–≥—Ä–µ–≥–∞—Ç—ã.  
    * `admin_lookup.py` ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞–º.  
4. **–í–∏–∑—É–∞–ª**:
    * –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º–æ–¥–∑–∏ –∏ –∂–∏—Ä–Ω—ã–π —Ç–µ–∫—Å—Ç –∫–∞–∫ ¬´–∫–∞—Ä—Ç–æ—á–∫–∏¬ª.  
    * –í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è—Ç—å `‚óÄÔ∏è –ù–∞–∑–∞–¥` –∏ `üîÑ –û–±–Ω–æ–≤–∏—Ç—å`.
5. **–î–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
    * `/approve` / `/make_admin` / `/make_superadmin` ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Å–ø–∏—Å–∫–∏ –ª—é–¥–µ–π (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ).  
    * `/report` ‚Üí –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ –≤—Å–µ–º–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º–∏ + pending (real-time).
6. **–ì—Ä–µ–π—Å—Ñ—É–ª lifecycle** ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ (`app/main.py`).

---

## 4. –ß—Ç–æ –µ—â—ë —É–ª—É—á—à–∏—Ç—å

1. **Log entries** ‚Äî –∫–∞–∂–¥–æ–µ –≤–∞–∂–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (`approve`, `promote`, `lookup`) –ª–æ–≥–∏—Ä—É–µ–º —á–µ—Ä–µ–∑ `describe_user()`.  
2. **Notifications** ‚Äî –ø–æ–¥–∫–ª—é—á–∏—Ç—å `NotificationService` –¥–ª—è –∞–ª–µ—Ä—Ç–æ–≤ –ø–æ—Å–ª–µ approve/promote.  
3. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** ‚Äî –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π > 15, –¥–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏ `‚¨ÖÔ∏è/‚û°Ô∏è` (–ø—Ä–∏–º–µ—Ä ‚Äî `/report`).  
4. **–ü–ª–∏—Ç–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π** ‚Äî –≤ –±—É–¥—É—â–µ–º –≤—ã–Ω–µ—Å—Ç–∏ —á–∞—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (approve pending, promote N) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ ¬´–±—ã—Å—Ç—Ä—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏¬ª –ø—Ä—è–º–æ –Ω–∞ dashboard.

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö —à–∞–≥–æ–≤ –∞–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è ¬´–∫–∞–∫ –≤–µ–±‚Äë–∞–¥–º–∏–Ω–∫–∞, —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ Telegram¬ª: –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –≤—Å–µ –±–ª–æ–∫–∏ –Ω–∞ inline‚Äë–∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, –Ω–∏–∫–∞–∫–æ–π ¬´—É—ë*—Å–∫–æ–π¬ª reply‚Äë–∫–ª–∞–≤—ã, –µ–¥–∏–Ω—ã–π UX –¥–ª—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–π/—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤/–∞–¥–º–∏–Ω–æ–≤.  
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∫ –¥–æ—Ä–∞–±–æ—Ç–∫–µ —É–∂–µ –æ—Ç–º–µ—á–µ–Ω—ã, –æ—Å—Ç–∞–ª–æ—Å—å —Ä–∞–∑–≤–∏–≤–∞—Ç—å –Ω–∞–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥–ø–∏—Å–∏ –ø–æ –ø—Ä–∏–º–µ—Ä—É QR‚Äë–±–æ—Ç–∞.


–ù–∏–∂–µ ‚Äî –Ω–µ –æ–±—â–∞—è —Ç–µ–æ—Ä–∏—è, –∞ –¥–æ—Ä–æ–∂–Ω–∞—è –∫–∞—Ä—Ç–∞ –∏–º–µ–Ω–Ω–æ –¥–ª—è —Ç–≤–æ–µ–≥–æ OperatorBot, —á—Ç–æ–±—ã –¥–æ–≤–µ—Å—Ç–∏ –∞–¥–º–∏–Ω–∫—É –¥–æ —É—Ä–æ–≤–Ω—è ¬´–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞¬ª (–ø–æ —Ç–≤–æ–∏–º –∂–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –∏–∑ NEW_–∞–¥–º–∏–Ω–∫–∞.md + –ø–æ —Å–∏–ª—å–Ω—ã–º —Å—Ç–æ—Ä–æ–Ω–∞–º QR_BOT).

–ë–µ–∑ –∫–æ–¥–∞, —Ç–æ–ª—å–∫–æ —á—Ç–æ –¥–µ–ª–∞—Ç—å –∏ –≥–¥–µ –ø—Ä–∞–≤–∏—Ç—å.

‚∏ª

0. –¶–µ–ª—å –≤ –æ–¥–Ω–æ–π —Ñ—Ä–∞–∑–µ

–ê–¥–º–∏–Ω–∫–∞ OperatorBot –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å:
	‚Ä¢	–æ–¥–Ω–æ–π —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ /admin;
	‚Ä¢	—Å –µ–¥–∏–Ω—ã–º inline-UI –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π –ø–æ —Ä–∞–∑–¥–µ–ª–∞–º;
	‚Ä¢	—Å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π –º–æ–¥–µ–ª—å—é —Ä–æ–ª–µ–π/—Å—Ç–∞—Ç—É—Å–æ–≤ –∏ –ø—Ä–∞–≤;
	‚Ä¢	—Å —É–¥–æ–±–Ω—ã–º–∏ –∫–∞—Ç–∞–ª–æ–≥–∞–º–∏ (–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –∞–¥–º–∏–Ω—ã, pending, –æ—Ç—á—ë—Ç—ã);
	‚Ä¢	—Å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π/–∫–∞—Ä—Ç–∏–Ω–∫–æ–π –ø–æ —Å–∏—Å—Ç–µ–º–µ;
	‚Ä¢	—Å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ –±–µ–∑ –∫—Ä–∏–≤—ã—Ö usage-—Ç–µ–∫—Å—Ç–æ–≤;
	‚Ä¢	–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–∫—Ä—ã—Ç–∞ –±–∞–∑–æ–≤—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏.

–î–∞–ª—å—à–µ ‚Äî –ø–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω, —á—Ç–æ –º–µ–Ω—è—Ç—å.

‚∏ª

1. –î–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –∏ –ø—Ä–∞–≤–∞ (–±–∞–∑–∞ –ø–æ–¥ –ª—é–±—É—é –∞–¥–º–∏–Ω–∫—É)

1.1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏ —Ä–æ–ª–∏

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	app/db/models.py (–∏–ª–∏ –≥–¥–µ –æ–ø–∏—Å–∞–Ω User),
	‚Ä¢	app/core/roles.py,
	‚Ä¢	—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ admin.py, users.py.

–ß—Ç–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∏–¥–µ–∞–ª—É:
	1.	–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
	‚Ä¢	id,
	‚Ä¢	telegram_id (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π),
	‚Ä¢	username,
	‚Ä¢	full_name,
	‚Ä¢	extension (–¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤),
	‚Ä¢	role (user, operator, admin, superadmin),
	‚Ä¢	status (pending, approved, blocked, declined),
	‚Ä¢	–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—è (created_at, updated_at).
	2.	–í—ã–Ω–µ—Å—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã —Ä–æ–ª–µ–π/—Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –æ–¥–∏–Ω –º–æ–¥—É–ª—å (roles.py –∏–ª–∏ –∞–Ω–∞–ª–æ–≥):
	‚Ä¢	—Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Ä–æ–ª–µ–π;
	‚Ä¢	—Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å—Ç–∞—Ç—É—Å–æ–≤.
	3.	–£–±—Ä–∞—Ç—å –ø–æ –∫–æ–¥—É –¥—É–±–ª–∏ —Ç–∏–ø–∞:
	‚Ä¢	–ª–æ–∫–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ if user.username == ...,
	‚Ä¢	—Ñ–ª–∞–≥–∏ is_superuser, can_approve_registrations, –µ—Å–ª–∏ –æ–Ω–∏ –¥—É–±–ª–∏—Ä—É—é—Ç role –∏ status.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø–æ –∫–æ–¥—É –≤–µ–∑–¥–µ –æ–ø–∏—Ä–∞–µ—à—å—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ user.role –∏ user.status.

‚∏ª

1.2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π PermissionsManager

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	app/telegram/middlewares/permissions.py,
	‚Ä¢	–ª—é–±—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –≤ admin_* —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö.

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–í PermissionsManager (–∏–ª–∏ –∞–Ω–∞–ª–æ–≥) –∑–∞–≤–µ—Å—Ç–∏ –º–µ—Ç–æ–¥—ã:
	‚Ä¢	is_superadmin(user),
	‚Ä¢	is_admin(user),
	‚Ä¢	is_operator(user),
	‚Ä¢	is_approved(user),
	‚Ä¢	is_pending(user),
	‚Ä¢	is_blocked(user).
	2.	–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–∞—Ç—Ä–∏—Ü—É –ø—Ä–∞–≤:
	‚Ä¢	–∫—Ç–æ –º–æ–∂–µ—Ç –∑–∞–π—Ç–∏ –≤ /admin;
	‚Ä¢	–∫—Ç–æ –º–æ–∂–µ—Ç:
	‚Ä¢	—É—Ç–≤–µ—Ä–∂–¥–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏,
	‚Ä¢	–±–∞–Ω–∏—Ç—å,
	‚Ä¢	–ø–æ–¥–Ω–∏–º–∞—Ç—å –¥–æ –∞–¥–º–∏–Ω–∞,
	‚Ä¢	—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É;
	‚Ä¢	—á—Ç–æ –¥–æ—Å—Ç—É–ø–Ω–æ admin, –∞ —á—Ç–æ —Ç–æ–ª—å–∫–æ superadmin.
	3.	–í–æ –≤—Å–µ—Ö –∞–¥–º–∏–Ω—Å–∫–∏—Ö —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö:
	‚Ä¢	—É–±—Ä–∞—Ç—å —Ä—É—á–Ω—ã–µ if ... –ø—Ä–æ–≤–µ—Ä–∫–∏,
	‚Ä¢	–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ PermissionsManager.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ø—Ä–∞–≤–∞ –æ–ø–∏—Å–∞–Ω—ã –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ; –ø—Ä–∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–∏ –∞–¥–º–∏–Ω–∫–∏ –ø—Ä–∞–≤–∫–∏ —Ç–æ–ª—å–∫–æ —Ç–∞–º.

‚∏ª

2. –°–ª–æ–π –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–ª—è –∞–¥–º–∏–Ω–∫–∏)

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	app/db/repositories/admin.py,
	‚Ä¢	app/db/repositories/users.py,
	‚Ä¢	–≤—Å–µ –º–µ—Å—Ç–∞, –≥–¥–µ –∞–¥–º–∏–Ω–∫–∞ –Ω–∞–ø—Ä—è–º—É—é —Ö–æ–¥–∏—Ç –≤ –ë–î.

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–í admin.py/users.py –≤—ã–¥–µ–ª–∏—Ç—å/–¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã:
	‚Ä¢	–†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏:
	‚Ä¢	get_user_by_telegram_id(telegram_id)
	‚Ä¢	get_pending_users()
	‚Ä¢	get_approved_users()
	‚Ä¢	get_blocked_users()
	‚Ä¢	get_admins()
	‚Ä¢	get_users_counters() ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
	‚Ä¢	total_users, pending_users, approved_users, admins
	‚Ä¢	–ò–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞/—Ä–æ–ª–∏:
	‚Ä¢	set_user_status(user_id, status)
	‚Ä¢	set_user_role(user_id, role)
	2.	–í —Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö –∞–¥–º–∏–Ω–∫–∏:
	‚Ä¢	–∑–∞–ø—Ä–µ—Ç–∏—Ç—å –ø—Ä—è–º–æ–π SQL / –ø—Ä—è–º—ã–µ –≤—ã–∑–æ–≤—ã db_manager.execute_*;
	‚Ä¢	–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –º–µ—Ç–æ–¥—ã —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –∞–¥–º–∏–Ω—Å–∫–∞—è –ª–æ–≥–∏–∫–∞ —á–∏—Ç–∞–µ—Ç—Å—è –∫–∞–∫ –±–∏–∑–Ω–µ—Å-–æ–ø–µ—Ä–∞—Ü–∏–∏, –Ω–µ –∫–∞–∫ –º–µ—à–∞–Ω–∏–Ω–∞ SQL.

‚∏ª

3. –í—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É –∏ –∫–æ—Ä–Ω–µ–≤–æ–π —ç–∫—Ä–∞–Ω /admin

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	app/telegram/handlers/auth.py,
	‚Ä¢	app/telegram/handlers/admin_panel.py,
	‚Ä¢	app/telegram/utils/buttons.py.

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–û–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞:
	‚Ä¢	–∫–æ–º–∞–Ω–¥–∞ /admin;
	‚Ä¢	–Ω–∏–∫–∞–∫–∏—Ö reply-–∫–Ω–æ–ø–æ–∫ –¥–ª—è –≤—Ö–æ–¥–∞ –≤ –ø–∞–Ω–µ–ª—å.
	2.	–í auth.py:
	‚Ä¢	–≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤ –æ—Å—Ç–∞–≤–∏—Ç—å:
	‚Ä¢	–∫–æ–º–∞–Ω–¥—ã /admin,
	‚Ä¢	–¥—Ä—É–≥–∏–µ —Ä–∞–±–æ—á–∏–µ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä /call_lookup),
	‚Ä¢	–Ω–µ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç—É–¥–∞ –æ—Ç–¥–µ–ª—å–Ω—É—é ¬´üëë –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å¬ª –∫–∞–∫ reply-–∫–Ω–æ–ø–∫—É, –µ—Å–ª–∏ —Ç—ã —Ä–µ—à–∏–ª, —á—Ç–æ –≤—Ö–æ–¥ ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–æ–π.
	3.	–í admin_panel.py:
	‚Ä¢	—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–¥–∏–Ω –∫–æ—Ä–Ω–µ–≤–æ–π —Ö–µ–Ω–¥–ª–µ—Ä /admin, –∫–æ—Ç–æ—Ä—ã–π:
	‚Ä¢	–ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ (PermissionsManager.is_admin/is_superadmin);
	‚Ä¢	—Ç—è–Ω–µ—Ç get_users_counters() –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è;
	‚Ä¢	—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ—Ä–Ω–µ–≤–æ–π —Ç–µ–∫—Å—Ç –∏ inline-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.
	4.	callback_data:
	‚Ä¢	–¥–æ–≥–æ–≤–æ—Ä–∏—Ç—å—Å—è –æ–± –æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä:
	‚Ä¢	admin:dashboard
	‚Ä¢	admin:users
	‚Ä¢	admin:admins
	‚Ä¢	admin:stats
	‚Ä¢	admin:lookup
	‚Ä¢	admin:settings
	‚Ä¢	–≤—Å–µ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∂–µ –ø–æ —Å—Ö–µ–º–µ:
	‚Ä¢	admin:users:pending
	‚Ä¢	admin:users:approved
	‚Ä¢	admin:admins:list
	‚Ä¢	admin:stats:period:7
	‚Ä¢	–∏ —Ç.–¥.

–†–µ–∑—É–ª—å—Ç–∞—Ç: /admin ‚Äî –æ–¥–∏–Ω —ç–∫—Ä–∞–Ω-¬´–ø–æ—Ä—Ç–∞–ª¬ª —Å –ø–æ–Ω—è—Ç–Ω–æ–π —Å–µ—Ç–∫–æ–π —Ä–∞–∑–¥–µ–ª–æ–≤, –∞ –Ω–µ —Ä–æ—Å—Å—ã–ø—å –∫–æ–º–∞–Ω–¥.

‚∏ª

4. UX-–∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–ª—è –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–æ–≤ (—á—Ç–æ —Ç—ã —É–∂–µ –æ–ø–∏—Å–∞–ª –≤ NEW_–∞–¥–º–∏–Ω–∫–∞.md ‚Äî –¥–æ–≤–µ—Å—Ç–∏ –¥–æ –∫–æ–Ω—Ü–∞)

4.1. –û–±—â–µ–µ –¥–ª—è –≤—Å–µ—Ö –∞–¥–º–∏–Ω-—ç–∫—Ä–∞–Ω–æ–≤

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	–≤—Å–µ admin_* —Ö–µ–Ω–¥–ª–µ—Ä—ã.

–ü—Ä–∞–≤–∏–ª–∞:
	1.	–¢–æ–ª—å–∫–æ inline-UI:
	‚Ä¢	–Ω–∏–∫–∞–∫–∏—Ö reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä –≤–Ω—É—Ç—Ä–∏ –∞–¥–º–∏–Ω–∫–∏;
	‚Ä¢	–≤–µ—Å—å UX —á–µ—Ä–µ–∑ inline-–∫–Ω–æ–ø–∫–∏.
	2.	Back/refresh –≤–µ–∑–¥–µ:
	‚Ä¢	–ª—é–±–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ / —Å–ø–∏—Å–æ–∫ –∏–º–µ–µ—Ç:
	‚Ä¢	‚óÄÔ∏è –ù–∞–∑–∞–¥ (–≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å),
	‚Ä¢	üîÑ –û–±–Ω–æ–≤–∏—Ç—å (–ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏).
	3.	–ë–µ–∑ usage-—Ç–µ–∫—Å—Ç–æ–≤:
	‚Ä¢	–Ω–∏–∫–∞–∫–∏—Ö ¬´–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: /approve ¬ª;
	‚Ä¢	–≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ ‚Äî —Å–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π / –ø–æ–¥—Å–∫–∞–∑–∫–∏ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏, –∫–∞–∫ —Ç—ã —É–∂–µ –æ–ø–∏—Å–∞–ª.
	4.	–û—Ç–≤–µ—Ç –Ω–∞ –∫–∞–∂–¥—ã–π –∫–ª–∏–∫:
	‚Ä¢	–ª—é–±–æ–µ –Ω–∞–∂–∞—Ç–∏–µ callback-–∫–Ω–æ–ø–∫–∏ ‚Üí –≤—Å–µ–≥–¥–∞ –æ—Ç–≤–µ—Ç:
	‚Ä¢	–¥–∞–∂–µ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç (—Ç–µ–∫—Å—Ç ¬´–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ç–∞–∫–∏–º —Å—Ç–∞—Ç—É—Å–æ–º¬ª + ‚óÄÔ∏è –ù–∞–∑–∞–¥).

‚∏ª

4.2. –†–∞–∑–¥–µ–ª ¬´Dashboard¬ª

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	admin_panel.py.

–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
	1.	–ë–ª–æ–∫–∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:
	‚Ä¢	—Å–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π;
	‚Ä¢	—Å–∫–æ–ª—å–∫–æ pending;
	‚Ä¢	—Å–∫–æ–ª—å–∫–æ approved;
	‚Ä¢	—Å–∫–æ–ª—å–∫–æ –∞–¥–º–∏–Ω–æ–≤;
	‚Ä¢	(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤.
	2.	–ö–Ω–æ–ø–∫–∏:
	‚Ä¢	üë• –û–ø–µ—Ä–∞—Ç–æ—Ä—ã
	‚Ä¢	üëë –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã
	‚Ä¢	üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
	‚Ä¢	üìÇ –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏
	‚Ä¢	‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
	‚Ä¢		‚Ä¢	üîÑ –û–±–Ω–æ–≤–∏—Ç—å –∏ ‚óÄÔ∏è –ù–∞–∑–∞–¥ (–Ω–∞–∑–∞–¥ ‚Üí /admin/–∫–æ—Ä–µ–Ω—å).

–†–µ–∑—É–ª—å—Ç–∞—Ç: –∞–¥–º–∏–Ω –∑–∞—Ö–æ–¥–∏—Ç –≤ /admin –∏ –≤–∏–¥–∏—Ç —Å—Ä–∞–∑—É –∫–∞—Ä—Ç–∏–Ω–∫—É –ø–æ —Å–∏—Å—Ç–µ–º–µ.

‚∏ª

4.3. –†–∞–∑–¥–µ–ª ¬´–û–ø–µ—Ä–∞—Ç–æ—Ä—ã¬ª (admin_users.py)

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–°–ø–∏—Å–∫–∏ –ø–æ —Å—Ç–∞—Ç—É—Å—É:
	‚Ä¢	pending / approved / blocked:
	‚Ä¢	—Ç—Ä–∏ –∫–Ω–æ–ø–∫–∏ –Ω–∞ –≤–µ—Ä—Ö–Ω–µ–º —É—Ä–æ–≤–Ω–µ;
	‚Ä¢	–ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Å—Ç–∞—Ç—É—Å–∞ ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —ç—Ç–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞ (–ø–æ –æ–¥–Ω–æ–º—É –Ω–∞ —Å—Ç—Ä–æ–∫—É).
	2.	–ö–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
	‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å:
	‚Ä¢	–§–ò–û,
	‚Ä¢	username,
	‚Ä¢	extension,
	‚Ä¢	—Ä–æ–ª—å,
	‚Ä¢	—Å—Ç–∞—Ç—É—Å,
	‚Ä¢	–¥–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
	‚Ä¢	–∫–Ω–æ–ø–∫–∏:
	‚Ä¢	‚úÖ –û–¥–æ–±—Ä–∏—Ç—å (–µ—Å–ª–∏ pending),
	‚Ä¢	‚ùå –û—Ç–∫–ª–æ–Ω–∏—Ç—å (–µ—Å–ª–∏ pending),
	‚Ä¢	üö´ –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å / üîì –†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å,
	‚Ä¢	‚¨ÜÔ∏è –°–¥–µ–ª–∞—Ç—å –∞–¥–º–∏–Ω–æ–º (–µ—Å–ª–∏ —É –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤),
	‚Ä¢	‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É.
	3.	–ü–æ—Å–ª–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
	‚Ä¢	—Å–æ–æ–±—â–µ–Ω–∏–µ: —á—Ç–æ —Å–¥–µ–ª–∞–Ω–æ (¬´–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å X –æ–¥–æ–±—Ä–µ–Ω / –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω‚Ä¶¬ª),
	‚Ä¢	–≤–æ–∑–≤—Ä–∞—Ç –ª–∏–±–æ –∫ –∫–∞—Ä—Ç–æ—á–∫–µ (–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π —Å—Ç–∞—Ç—É—Å), –ª–∏–±–æ –∫ —Å–ø–∏—Å–∫—É.

‚∏ª

4.4. –†–∞–∑–¥–µ–ª ¬´–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã¬ª (admin_admins.py)

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–°–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤—É—é—â–∏—Ö –∞–¥–º–∏–Ω–æ–≤:
	‚Ä¢	–∫–Ω–æ–ø–∫–∏ –ø–æ –æ–¥–Ω–æ–º—É –∞–¥–º–∏–Ω—É (–∏–º—è + —Ä–æ–ª—å),
	‚Ä¢	—Ä—è–¥–æ–º ‚Äî –ø–æ–¥—Å–∫–∞–∑–∫–∞ ¬´‚ûï –ù–∞–∑–Ω–∞—á–∏—Ç—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞¬ª.
	2.	–ö–∞—Ä—Ç–æ—á–∫–∞ –∞–¥–º–∏–Ω–∞:
	‚Ä¢	–æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å:
	‚Ä¢	username,
	‚Ä¢	—Ä–æ–ª—å (admin/superadmin),
	‚Ä¢	Telegram ID,
	‚Ä¢	–∫–Ω–æ–ø–∫–∏:
	‚Ä¢	‚¨áÔ∏è –ü–æ–Ω–∏–∑–∏—Ç—å –¥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞,
	‚Ä¢	(–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚¨ÜÔ∏è –°–¥–µ–ª–∞—Ç—å —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–º,
	‚Ä¢	‚óÄÔ∏è –ö —Å–ø–∏—Å–∫—É.
	3.	–≠–∫—Ä–∞–Ω –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤:
	‚Ä¢	—Å–ø–∏—Å–æ–∫ approved-–æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –¥–æ –∞–¥–º–∏–Ω–∞;
	‚Ä¢	–≤—ã–±–∏—Ä–∞–µ—à—å ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –¥–µ–π—Å—Ç–≤–∏–µ.
	4.	–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:
	‚Ä¢	–≤—Å—ë –≤—ã—à–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω–æ–º (–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ permissions).

‚∏ª

4.5. –†–∞–∑–¥–µ–ª ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª (admin_stats.py)

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–í—ã–Ω–µ—Å—Ç–∏ —Ä–∞—Å—á—ë—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–Ω–µ –≤ —Ö–µ–Ω–¥–ª–µ—Ä):
	‚Ä¢	—Å—á–∏—Ç–∞—Ç—å:
	‚Ä¢	–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤/–∑–∞–¥–∞—á –∑–∞ –ø–µ—Ä–∏–æ–¥;
	‚Ä¢	—Å—Ä–µ–¥–Ω–∏–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É;
	‚Ä¢	–¥–æ–ª—é missed/answered;
	‚Ä¢	–¥—Ä—É–≥–∏–µ –±–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å.
	2.	–í UI:
	‚Ä¢	–∫–Ω–æ–ø–∫–∏ –ø–µ—Ä–∏–æ–¥–æ–≤:
	‚Ä¢	3 –¥–Ω—è, 7 –¥–Ω–µ–π, 14 –¥–Ω–µ–π, 30 –¥–Ω–µ–π;
	‚Ä¢	–ø—Ä–∏ –≤—ã–±–æ—Ä–µ:
	‚Ä¢	—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç—á—ë—Ç;
	‚Ä¢	‚óÄÔ∏è –ù–∞–∑–∞–¥ –∫ –≤—ã–±–æ—Ä—É –ø–µ—Ä–∏–æ–¥–æ–≤ / –≤ Dashboard.

‚∏ª

4.6. –†–∞–∑–¥–µ–ª ¬´–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏¬ª –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∏ (admin_lookup.py, call_lookup.py)

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ü–æ–¥—Å–∫–∞–∑–∫–∞ –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–∞ –Ω–∞ HTML + inline-–∫–Ω–æ–ø–∫–∏, —Ä–∞–∑–¥–µ–ª admin:lookup –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –µ—ë.**

‚∏ª

4.7. –ö–æ–º–∞–Ω–¥—ã /approve, /make_admin, /make_superadmin, /report (admin_commands.py, handlers/reports.py)

**–°—Ç–∞—Ç—É—Å: ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ inline-UX; `/report` —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç dev –∏ –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ –∑–∞–ø–∏—Å–∏.**

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	/approve:
	‚Ä¢	–≤–º–µ—Å—Ç–æ ¬´/approve ¬ª:
	‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ pending-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (inline-–∫–Ω–æ–ø–∫–∏);
	‚Ä¢	–∑–∞—Ç–µ–º –∫–∞—Ä—Ç–æ—á–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ ‚úÖ/‚ùå.
	2.	/make_admin, /make_superadmin:
	‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤;
	‚Ä¢	–≤—ã–±–æ—Ä ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ ‚Üí –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏.
	3.	/report:
	‚Ä¢	–µ—Å–ª–∏ –∞–¥–º–∏–Ω:
	‚Ä¢	–∫–∞—Ç–∞–ª–æ–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (approved, –º–æ–∂–µ—à—å –ø–æ–º–µ—Ç–∏—Ç—å pending);
	‚Ä¢	–≤—ã–±–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ‚Üí –æ—Ç—á—ë—Ç –ø–æ –Ω–µ–º—É.
	‚Ä¢	–µ—Å–ª–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä:
	‚Ä¢	—Å—Ä–∞–∑—É –æ—Ç—á—ë—Ç –ø–æ —Å–µ–±–µ.
	4.	–í —Å–ø–∏—Å–∫–∞—Ö:
	‚Ä¢	—Å–∫—Ä—ã—Ç—å dev-–∞–∫–∫–∞—É–Ω—Ç—ã;
	‚Ä¢	–∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—è (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –±–∏—Ç—ã—Ö extension –∏ —Ç.–ø.).

‚∏ª

5. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—à–∏–±–∫–∏ (–≤ —Ç–æ–º —á–∏—Å–ª–µ KeyError: ‚ÄúAttempt to overwrite ‚Äòmodule‚Äô‚Äù)

**–°—Ç–∞—Ç—É—Å: ‚úÖ –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç user/callback/—Ä–æ–ª—å –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –∞–¥–º–∏–Ω–æ–≤ –æ–± –æ—à–∏–±–∫–∞—Ö –ë–î.**

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	app/utils/error_handlers.py,
	‚Ä¢	–≤—Å–µ logger.error –≤ –∞–¥–º–∏–Ω-—Ö–µ–Ω–¥–ª–µ—Ä–∞—Ö,
	‚Ä¢	–∫–æ–Ω—Ñ–∏–≥ –ª–æ–≥–≥–µ—Ä–∞.

–ß—Ç–æ —Å–¥–µ–ª–∞—Ç—å:
	1.	–ï–¥–∏–Ω—ã–π error-–¥–µ–∫–æ—Ä–∞—Ç–æ—Ä:
	‚Ä¢	—É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ admin_* —Ö–µ–Ω–¥–ª–µ—Ä—ã –æ–±—ë—Ä–Ω—É—Ç—ã –≤ –æ–±—â–∏–π wrapper (–∫–∞–∫ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å);
	‚Ä¢	–≤–Ω—É—Ç—Ä–∏:
	‚Ä¢	–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å:
	‚Ä¢	–∫–æ–º–∞–Ω–¥—É / callback_data,
	‚Ä¢	user_id, username, —Ä–æ–ª—å,
	‚Ä¢	—Ç–µ–∫—Å—Ç/—Ç–∏–ø –∏—Å–∫–ª—é—á–µ–Ω–∏—è.
	2.	–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å KeyError: "Attempt to overwrite 'module' in LogRecord":
	‚Ä¢	–ø–æ –∫–æ–¥—É –Ω–∞–π—Ç–∏ –≤—Å–µ –≤—ã–∑–æ–≤—ã logger.error(..., extra={...}), –≥–¥–µ —Ç—ã –¥–æ–±–∞–≤–ª—è–µ—à—å –∫–ª—é—á module –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏–µ;
	‚Ä¢	—É–±—Ä–∞—Ç—å/–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å —ç—Ç–∏ –∫–ª—é—á–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, source_module).
	3.	–î–ª—è –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π:
	‚Ä¢	–ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è –≤–∏–¥–∞:
	‚Ä¢	ADMIN_ACTION: approver=<admin_id>, target=<user_id>, action='approve';
	‚Ä¢	ADMIN_ACTION: role_change old=<old_role>, new=<new_role>.
	4.	–ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –ë–î (–Ω–∞–ø—Ä–∏–º–µ—Ä, Unknown column 'id') –∞–¥–º–∏–Ω–∫–∞:
	‚Ä¢	–Ω–µ –ø–∞–¥–∞–µ—Ç ¬´–º–æ–ª—á–∞¬ª;
	‚Ä¢	–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ (¬´–û—à–∏–±–∫–∞ –ë–î, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É¬ª), –∞ –Ω–µ traceback.

‚∏ª

6. –¢–µ—Å—Ç—ã –∏ ¬´–ø—Ä–æ–¥-–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å¬ª

**–°—Ç–∞—Ç—É—Å: ‚úÖ –ø–æ–∫—Ä—ã—Ç—ã Permissions, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ AdminStats handler (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∏–≤–∞—Ç—å –ø–æ –º–µ—Ä–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π).**

–ì–¥–µ —Ç—Ä–æ–≥–∞—Ç—å:
	‚Ä¢	tests/unit/test_admin_panel.py,
	‚Ä¢	tests/unit/test_admin_users.py (–µ—Å–ª–∏ –Ω–µ—Ç ‚Äî —Å–æ–∑–¥–∞—Ç—å),
	‚Ä¢	tests/unit/test_admin_stats.py –∏ —Ç.–ø.

–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å/–¥–æ–ø–∏—Å–∞—Ç—å:
	1.	Permissions:
	‚Ä¢	is_admin/is_superadmin/is_operator –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏–π role+status.
	2.	–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∞–¥–º–∏–Ω–∫–∏:
	‚Ä¢	get_pending_users, get_approved_users, get_admins, set_user_status, set_user_role, get_users_counters.
	3.	–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
	‚Ä¢	/start:
	‚Ä¢	–Ω–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è pending;
	‚Ä¢	pending ‚Üí –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—Å—Ç ¬´–æ–∂–∏–¥–∞–π—Ç–µ‚Ä¶¬ª;
	‚Ä¢	approved ‚Üí –≤–∏–¥–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–µ –º–µ–Ω—é;
	‚Ä¢	/admin:
	‚Ä¢	—Å—É–ø–µ—Ä-–∞–¥–º–∏–Ω ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –ø–∞–Ω–µ–ª—å;
	‚Ä¢	–æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí –æ—Ç–∫–∞–∑ –≤ –¥–æ—Å—Ç—É–ø–µ.
	4.	–•–µ–Ω–¥–ª–µ—Ä—ã:
	‚Ä¢	—Ä–∞–∑–¥–µ–ª ¬´–û–ø–µ—Ä–∞—Ç–æ—Ä—ã¬ª:
	‚Ä¢	–∫–æ–≥–¥–∞ –µ—Å—Ç—å pending;
	‚Ä¢	–∫–æ–≥–¥–∞ –Ω–µ—Ç pending (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç ¬´–Ω–∏–∫–æ–≥–æ –Ω–µ—Ç¬ª).
	‚Ä¢	—Ä–∞–∑–¥–µ–ª ¬´–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã¬ª:
	‚Ä¢	–ø–æ–≤—ã—à–µ–Ω–∏–µ/–ø–æ–Ω–∏–∂–µ–Ω–∏–µ;
	‚Ä¢	—Ä–∞–∑–¥–µ–ª ¬´–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞¬ª:
	‚Ä¢	—Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≤—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞.

‚∏ª

7. –§–∏–Ω–∞–ª—å–Ω—ã–π –ø–æ–ª–∏—à, –∫–æ–≥–¥–∞ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç

**–°—Ç–∞—Ç—É—Å: ‚úÖ —á–µ–∫-–ª–∏—Å—Ç –ø—Ä–æ–π–¥–µ–Ω ‚Äî —Ç–µ–∫—Å—Ç—ã/–∏–∫–æ–Ω–∫–∏ —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã, –¥–ª–∏–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –ø–∞–≥–∏–Ω–∏—Ä—É—é—Ç—Å—è, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∑–∞—â–∏—â–µ–Ω—ã.**

	1.	–¢–µ–∫—Å—Ç—ã ‚Äî ‚úÖ –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–∫—Ä–∞–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±—â–∏–π —Å—Ç–∏–ª—å (¬´–∏–∫–æ–Ω–∫–∞ + –∂–∏—Ä–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫¬ª –∏ –∫—Ä–∞—Ç–∫–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è).
	2.	–ò–∫–æ–Ω–∫–∏ ‚Äî ‚úÖ –∑–∞–∫—Ä–µ–ø–ª–µ–Ω—ã —É—Å—Ç–æ–π—á–∏–≤—ã–µ emoji –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π (üëë –∞–¥–º–∏–Ω—ã, üë• –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, üìà —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, üìÇ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏).
	3.	–ü–∞–≥–∏–Ω–∞—Ü–∏—è ‚Äî ‚úÖ –¥–µ–π—Å—Ç–≤—É–µ—Ç –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö —Å –¥–ª–∏–Ω–Ω—ã–º–∏ —Å–ø–∏—Å–∫–∞–º–∏ (–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã).
	4.	–°–∫–æ—Ä–æ—Å—Ç—å ‚Äî ‚úÖ —Ç—è–∂—ë–ª—ã–µ –≤—ã–±–æ—Ä–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–µ—Ä–≤–∏—Å–∞–º–∏/—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º–∏; –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –¥–æ–±–∞–≤–∏–º –∫–µ—à, –Ω–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –Ω–µ—Ç.
	5.	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ‚Äî ‚úÖ –≤—Å–µ –∫–ª—é—á–µ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–æ–≤–µ—Ä—è—é—Ç PermissionsManager, –æ–±—Ö–æ–¥–æ–≤ –Ω–µ—Ç.

–ö–æ–≥–¥–∞ –≤—Å–µ —Ä–∞–∑–¥–µ–ª—ã –±—É–¥—É—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã, –ø—Ä–æ–π—Ç–∏—Å—å –µ—â—ë —Ä–∞–∑ –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏—Å—Ç–∞:
	1.	–¢–µ–∫—Å—Ç—ã:
	‚Ä¢	–µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å, –Ω–∏–∫–∞–∫–æ–π —Ä–∞–∑–Ω–æ–±–æ–π –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö (¬´–æ–ø–µ—Ä–∞—Ç–æ—Ä¬ª vs ¬´–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å¬ª);
	‚Ä¢	–∫–æ—Ä–æ—Ç–∫–∏–µ, –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.
	2.	–ò–∫–æ–Ω–∫–∏:
	‚Ä¢	—É—Å—Ç–æ–π—á–∏–≤—ã–π –Ω–∞–±–æ—Ä emoji –¥–ª—è —Å—É—â–Ω–æ—Å—Ç–µ–π (–æ–ø–µ—Ä–∞—Ç–æ—Ä, –∞–¥–º–∏–Ω, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏).
	3.	–ü–∞–≥–∏–Ω–∞—Ü–∏—è:
	‚Ä¢	–µ—Å–ª–∏ –≥–¥–µ-—Ç–æ >10‚Äì15 –∑–∞–ø–∏—Å–µ–π ‚Äî –¥–æ–±–∞–≤–∏—Ç—å ‚¨ÖÔ∏è/‚û°Ô∏è.
	4.	–°–∫–æ—Ä–æ—Å—Ç—å:
	‚Ä¢	—Ç—è–∂—ë–ª—ã–µ –≤—ã–±–æ—Ä–∫–∏ (–ø–æ –∑–≤–æ–Ω–∫–∞–º/–æ—Ç—á—ë—Ç–∞–º) ‚Äî –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∫—ç—à –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞.
	5.	–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
	‚Ä¢	–≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è (ban/promote/demote) –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–º —Ä–æ–ª—è–º;
	‚Ä¢	–Ω–∏–≥–¥–µ –Ω–µ—Ç ¬´—Å–∫—Ä—ã—Ç—ã—Ö¬ª –æ–±—Ö–æ–¥–æ–≤ –ø—Ä–∞–≤ —á–µ—Ä–µ–∑ –ø—Ä—è–º—ã–µ –∫–æ–º–∞–Ω–¥—ã.

‚∏ª

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, –¥–∞–ª—å—à–µ –º–æ–∂–Ω–æ –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Ñ–∞–π–ª–∞–º OperatorBot –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º (admin_panel ‚Üí admin_users ‚Üí admin_admins ‚Üí admin_stats ‚Üí admin_commands) –∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å ¬´–º–∏–∫—Ä–æ-—á–µ–∫-–ª–∏—Å—Ç¬ª –≤–∏–¥–∞:
	‚Ä¢	—á—Ç–æ —É–∂–µ –æ–∫,
	‚Ä¢	—á—Ç–æ —Å–ª–æ–º–∞–Ω–æ –∫–æ–Ω—Ü–µ–ø—Ç—É–∞–ª—å–Ω–æ,
	‚Ä¢	—á—Ç–æ –¥–æ–ø–∏—Å–∞—Ç—å, —á—Ç–æ–±—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞–ª–æ —ç—Ç–æ–º—É –±–æ–ª—å—à–æ–º—É –ø–ª–∞–Ω—É.
