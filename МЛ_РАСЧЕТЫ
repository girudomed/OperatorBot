–û—Å–Ω–æ–≤–∞: –±–æ—Ç –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –ø–æ –∑–∞–ø—Ä–æ—Å—É —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫—É –∏ —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–æ–∫–π –¥–∞—Ç–∞ –≤—Ä–µ–º—è —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–π–¥–∏

–ù–µ –Ω–∞–¥–æ ‚Äú–ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ª—é–±–æ–π –∫–æ–º–∞–Ω–¥—ã –±–æ—Ç –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.‚Äù
–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ —Å–º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç—á—ë—Ç–∞ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
–Ω–∏–∫–∞–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π
–ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É, –Ω–µ –∏–º–µ—è –Ω–∞ —ç—Ç–æ –ø—Ä–∞–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ–ø–µ—Ä–∞—Ç–æ—Ä —Ö–æ—á–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –¥—Ä—É–≥–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é), –±–æ—Ç –≤—ã–¥–∞—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –∏ –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —Å–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —á—ë—Ç–∫–æ —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∏—Ç—å –ø–æ–ª–Ω–æ–º–æ—á–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ ‚Äú–∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É —Å—Ç–∞—Ä—Ç, —Ç–æ –µ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∑–∞—Ä–µ–≥–∞—Ç—å—Å—è‚Äù. –ß—Ç–æ–±—ã –Ω–µ –ø—É—Ç–∞–ª–∞—Å—å, —Å–∏—Å—Ç–µ–º–∞ - –æ–Ω–∞ —Ä–µ–≥–∞–µ—Ç –µ–≥–æ —á–µ—Ä–µ–∑ —á–∞—Ç –∞–π–¥–∏ –∏ —é–∑–µ—Ä –Ω–µ–π–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–±–∏–≤–∞—è –≤ –±–¥ –≤ —Ç–∞–±–ª–∏—Ü—É UsersTelegaBot
–ú—ã –∏—â–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ –µ–≥–æ –∏–º–µ–Ω–∏ –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é (extension) –≤ —Ç–∞–±–ª–∏—Ü–µ users. –ï—Å–ª–∏ –∏–º—è —á–∞—Å—Ç–∏—á–Ω–æ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –≤–≤–µ–¥–µ–Ω–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º, –±–æ—Ç –Ω–∞—Ö–æ–¥–∏—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
–ü–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö, –±–æ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ extension –¥–ª—è –ø–æ–∏—Å–∫–∞ –∑–≤–æ–Ω–∫–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü–µ call_scores. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–≤–æ–Ω–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∫–∞–∑–∞–Ω –≤: caller_info ‚Äî –µ—Å–ª–∏ —ç—Ç–æ –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫. –∏ called_info ‚Äî –µ—Å–ª–∏ —ç—Ç–æ –∏—Å—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫.
–õ–∏–≤ –¥–µ—à–±–æ—Ä–¥ –Ω–∞–¥–æ —á—Ç–æ–±—ã —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–∞–ª–∏
–∞) –ü–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –°–≤–æ–¥–Ω—ã–π live dashboard
–±) —á—Ç–æ–±—ã –∫–∞–∂–¥—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä/–∞–¥–º–∏–Ω –º–æ–≥ –≤–∏–¥–µ—Ç—å –ø–æ —Å–µ–±–µ (–ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∫–æ–≥–¥–∞ –æ–Ω –Ω–∞–∂–∏–º–∞–µ—Ç —Å —Ç–∞–±–ª–∏—Ü—ã users –∫–Ω–æ–ø–∫–∏ –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ–¥–≥—Ä—É–∑—è—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –∏–º–µ–Ω–∞ –≤—Å–µ—Ö –∞–¥–º–∏–Ω–æ–≤ - –æ–Ω –∫–ª–∏–∫–∞–µ—Ç - –∏ –∫–∞–∂–¥–æ–µ –∏–º—è –≤ —Ç–∞–±–ª–∏—Ü–µ users —Ç–∞–º –µ—Å—Å—Ç—å, –≤–µ–¥—å –ø–æ—Ç–æ–º –∏–∑ call_scores –º—ã –∑–∞–±–∏—Ä–∞–µ–º –∑–≤–æ–Ω–∫–∏ –∏ –≤ –ø–æ–ª—è—Ö called_info –∏ caller_info –ø–∞—Ä—Å–∏–º —ç—Ç–∏ –∏–º–µ–Ω–∞, –æ–Ω–∏ —Ç–∞–º –µ—Å—Ç—å)

4. –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ –∑–≤–æ–Ω–∫–∞–º
–ë–æ—Ç —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ –∑–≤–æ–Ω–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑–∞ –¥–µ–Ω—å –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç—ã –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ü–µ–Ω–∫–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–∞). –≠—Ç–∏ –¥–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–∞.
5. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞
–ù–∞ –æ—Å–Ω–æ–≤–µ —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –±–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç:
–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤.
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –Ω–∞ —É—Å–ª—É–≥–∏.
–°—Ä–µ–¥–Ω—é—é –æ—Ü–µ–Ω–∫—É —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤.
–í—Ä–µ–º—è, –∑–∞—Ç—Ä–∞—á–µ–Ω–Ω–æ–µ –Ω–∞ –∑–≤–æ–Ω–∫–∏.
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∂–∞–ª–æ–±.
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞.
–ü—Ä–∏–º–µ—Ä –æ—Ç—á–µ—Ç–∞, –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–≥–æ –±–æ—Ç–æ–º –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –∑–∞ –¥–µ–Ω—å!, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å—Å—è —Å–∞–º –≤ LIVE DASHBOARD —É –Ω–∞—Å!! –∏ –Ω–µ –≤—ã–∑—ã–≤–∞—Ç—Å—è –∫–æ–º–∞–≥–¥–æ–π (—Ç–∞–∫–∂–µ –¥–µ—à–±–æ—Ä–¥ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –Ω–∞ –Ω–µ–¥–µ–ª—å–Ω–π –∏ –º–µ—Å—è—á–Ω—ã–π), –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–µ—à–±–æ—Ä–¥ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –∫–Ω–æ–ø–∫—É –æ–±–Ω–æ–≤–∏—Ç—å
üìä –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –æ—Ç—á–µ—Ç –∑–∞ 2024-09-09

1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–≤–æ–Ω–∫–∞–º:
   - –í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤ –∑–∞ –¥–µ–Ω—å: 50
   - –ü—Ä–∏–Ω—è—Ç–æ –∑–≤–æ–Ω–∫–æ–≤ –∑–∞ –¥–µ–Ω—å: 45
   - –ó–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —É—Å–ª—É–≥—É: 20
   - –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–ø–∏—Å—å –æ—Ç –æ–±—â–µ–≥–æ —á–∏—Å–ª–∞ –∑–≤–æ–Ω–∫–æ–≤: 40%

2. –ö–∞—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤:
   - –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ (—Å—Ä–µ–¥–Ω—è—è –ø–æ –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º): 8.2 –∏–∑ 10

3. –ê–Ω–∞–ª–∏–∑ –æ—Ç–º–µ–Ω –∏ –æ—à–∏–±–æ–∫:
   - –°–æ–≤–µ—Ä—à–µ–Ω–æ –æ—Ç–º–µ–Ω: 5
   - –î–æ–ª—è –æ—Ç–º–µ–Ω –æ—Ç –≤—Å–µ—Ö –∑–≤–æ–Ω–∫–æ–≤: 10%

4. –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤:
–û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏: 120 –º–∏–Ω.
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –ø—Ä–∏ –∑–∞–ø–∏—Å–∏: 4 –º–∏–Ω. 30 —Å–µ–∫.
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ —Å–æ —Å–ø–∞–º–æ–º: 2 –º–∏–Ω.
- –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ —Å–æ —Å–ø–∞–º–æ–º: 1 –º–∏–Ω
- –û–±—â–µ–µ –≤—Ä–µ–º—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–æ–≤: 1 –º–∏–Ω
   - –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∑–≤–æ–Ω–∫–æ–≤: 3 –º–∏–Ω. 10 —Å–µ–∫.
   - –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –ø–æ —Ç–µ–ª–µ—Ñ–æ–Ω—É: 200 –º–∏–Ω.

5. –†–∞–±–æ—Ç–∞ —Å –∂–∞–ª–æ–±–∞–º–∏:
   - –ó–≤–æ–Ω–∫–∏ —Å –∂–∞–ª–æ–±–∞–º–∏: 2
   - –û—Ü–µ–Ω–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∂–∞–ª–æ–±—ã: 7.9 –∏–∑ 10


–ù–∞–¥–æ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–∑–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —á—Ç–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–∞–∫–æ–π –æ—Ç—á–µ—Ç –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –ª–∏–±–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—ã –≤–æ–æ–±—â–µ, —Ç–∞–∫–∂–µ –Ω–µ –Ω–∞–¥–æ —á—Ç–æ–± –≤—Å–µ –∑–Ω–∞–ª–∏ –æ –≤—Å–µ—Ö –∫–æ–º–∞–Ω–¥–∞—Ö, –Ω—É–∂–Ω—ã —É—Ä–æ–≤–Ω–∏ –¥–æ—Å—Ç—É–ø–∞. - –≤ —â–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —É—Ä–æ–≤–Ω—è –¥–æ—Å—Ç—É–ø–∞ –±—ã–ª–∏ –≤–∏–¥–Ω—ã –∫–æ–º–∞–Ω–¥—ã











–Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
–°–¢ –ê–¥–º–∏–Ω - –≤–∏–¥–∏—Ç –≤—Å–µ –∫—Ä–æ–º–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –¥–µ–±–∞–≥–∞, –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
–ó–∞–≤–†–µ–≥ –≤–∏–¥–∏—Ç –≤—Å–µ –∫—Ä–æ–º–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –¥–µ–±–∞–≥–∞, –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
Dev - –∏–º–µ–µ—Ç –≤—Å–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏. –°–æ–∑–¥–∞—Ç–µ–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞
–ú–∞—Ä–∫–µ—Ç–æ–ª–æ–≥ –≤–∏–¥–∏—Ç –≤—Å–µ –∫—Ä–æ–º–µ –∫–æ–º–∞–Ω–¥ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –¥–µ–±–∞–≥–∞, –º–æ–∂–µ—Ç —Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä - –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å, —Ç–æ—á–Ω–µ–µ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –ø–æ—Å–µ–±–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
–û–ø–µ—Ä–∞—Ç–æ—Ä - –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å, —Ç–æ—á–Ω–µ–µ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –ø–æ—Å–µ–±–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ - –∏–º–µ–µ—Ç –≤—Å–µ –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏



–û—Ç—á—ë—Ç –ø–æ –∑–≤–æ–Ω–∫–∞–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –¥–æ–ª–∂–µ–Ω —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –±–∞–∑–µ call_scores, –≥–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏.





—Ç–∞–∫–∂–µ –Ω–∞–¥–æ –≤–≤–µ—Å—Ç–∏ —á—Ç–æ–±—ã 
1. –ú–æ–∂–Ω–æ –±—ã–ª–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –∏ –≤ –±–æ—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø–æ–ª—É—á–∏–ª —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–∏—Å–∞—Ç—å —é–∑–µ—Ä–Ω–µ–π–º Dev, SuperAdmin –∏ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –±–æ—Ç–∞ –≤ —ç—Ç–æ–º –∂–µ –±–æ—Ç–µ –ø–æ —é–∑–µ—Ä–Ω–µ–π–º—É —á–µ–ª –∫—Ç–æ —Å—É–ø–µ—Ä–∞–¥–º–∏–Ω –∏–ª–∏ –¥–µ–≤ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –º–µ—Å—Å–∞–≥—É
3. 








–®–ê–ë–õ–û–ù –î–ï–®–ë–û–†–î
–ù–∏–∂–µ ‚Äî –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω–∞—è –º–µ—Ç–æ–¥–∏–∫–∞ —Ä–∞—Å—á—ë—Ç–∞ –¥–∞—à–±–æ—Ä–¥–∞, –∑–∞—Ç–æ—á–µ–Ω–Ω–∞—è –ø–æ–¥ —Ç–≤–æ—é —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É call_scores, + –æ—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –ø–æ ML –¥–æ–±–∞–≤–∏—Ç—å –∏ –∫–∞–∫ —ç—Ç–æ —Å—á–∏—Ç–∞—Ç—å.

0. –ë–∞–∑–æ–≤—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ë–Ω–Ω–æ—Å—Ç–∏ –ø–æ –¥–∞–Ω–Ω—ã–º (
call_scores
)
–†–∞–±–æ—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–æ —Ç–∞–±–ª–∏—Ü–µ call_scores.
–§–∏–ª—å—Ç—Ä—ã (–æ–±—â–∏–µ –¥–ª—è –≤—Å–µ—Ö –±–ª–æ–∫–æ–≤):
–ü–µ—Ä–∏–æ–¥ –æ—Ç—á—ë—Ç–∞:

 call_date BETWEEN :date_from AND :date_to

 (–¥–ª—è live-–¥–µ—à–±–æ—Ä–¥–∞ ‚Äî –æ–±—ã—á–Ω–æ date_trunc('day', now()) –¥–æ now()).


–û–ø–µ—Ä–∞—Ç–æ—Ä (–¥–ª—è –¥–∞—à–∞ –ø–æ –æ–¥–Ω–æ–º—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—É):

 –õ–æ–≥–∏–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:


operator_name =
    CASE
        WHEN context_type = '–≤—Ö–æ–¥—è—â–∏–π' THEN called_info
        ELSE caller_info
    END
–î–ª—è –¥–∞—à–±–æ—Ä–¥–∞ ‚Äú–ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º‚Äù ‚Äî –ø—Ä–æ—Å—Ç–æ GROUP BY operator_name.


–î–ª—è ‚Äú–æ–¥–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞‚Äù ‚Äî –¥–æ–±–∞–≤–ª—è–µ–º AND operator_name = :operator_name

 (–∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä –ø–æ extension –∏–∑ called_info / caller_info, –µ—Å–ª–∏ –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω–æ –ø–∞—Ä—Å–∏—à—å).


–¶–µ–ª–µ–≤–æ–π/–Ω–µ—Ü–µ–ª–µ–≤–æ–π –∑–≤–æ–Ω–æ–∫:


is_target = 1 ‚Äî —Ü–µ–ª–µ–≤—ã–µ (–ª–∏–¥—ã, –∑–∞–ø–∏—Å–∏, –æ—Ç–º–µ–Ω—ã, –ø–µ—Ä–µ–Ω–æ—Å—ã, –∂–∞–ª–æ–±—ã –∏ —Ç.–¥.).


is_target = 0 ‚Äî —Å–ø–∞–º, —Å–±–æ–∏, —Ç–µ—Ö–∑–≤–æ–Ω–∫–∏ –∏ –ø—Ä–æ—á–µ–µ.


–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏—Å—Ö–æ–¥ (outcome):


'record' ‚Äî –∑–∞–ø–∏—Å—å —Å–æ—Å—Ç–æ—è–ª–∞—Å—å;


'lead_no_record' ‚Äî –ª–∏–¥ –±–µ–∑ –∑–∞–ø–∏—Å–∏;


'info_only' ‚Äî –∏–Ω—Ñ–æ/–Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ –ø–æ–¥–æ–±–Ω–æ–µ;


'non_target' ‚Äî —Å–ø–∞–º, —Å–±–æ–π, —Ç–µ—Ö–∑–≤–æ–Ω–æ–∫.


–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (call_category) ‚Äî —Ç–µ–∫—Å—Ç, —É–∂–µ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π:


–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)


–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)


–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏


–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏


–ù–∞–≤–∏–≥–∞—Ü–∏—è


–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–∏–µ–º–µ


–ñ–∞–ª–æ–±–∞


–°–ø–∞–º, —Ä–µ–∫–ª–∞–º–∞


–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∑–≤–æ–Ω–æ–∫


–°–±–æ–π


–†–µ–∑–µ—Ä–≤


–∏ —Ç.–¥.


–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞: talk_duration (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö).


–ü—Ä–∏–∑–Ω–∞–∫ ¬´–∑–≤–æ–Ω–æ–∫ —Å–æ—Å—Ç–æ—è–ª—Å—è¬ª:


—Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É —Ç–µ–±—è —É–∂–µ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω—ã –ø—Ä–∏–Ω—è—Ç—ã–µ –∑–≤–æ–Ω–∫–∏ (call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π');


–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ —Ç—ã —Ä–µ—à–∏—à—å –∏—Ö –∑–∞–≤–æ–¥–∏—Ç—å –≤ call_scores, –º–æ–∂–Ω–æ –ø–æ–º–µ—Ç–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, call_type = '–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π' + talk_duration = 0.



1. –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∑–≤–æ–Ω–∫–∞–º
1.1. –ü—Ä–∏–Ω—è—Ç–æ –∑–≤–æ–Ω–∫–æ–≤
–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
–ë–µ—Ä—ë–º –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, –≥–¥–µ:


call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'


–∏ talk_duration > 0 (–Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π –æ—Ç—Å–µ—á—ë–º —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –º—É—Å–æ—Ä —Å 0 —Å–µ–∫—É–Ω–¥).


–§–æ—Ä–º—É–ª–∞:
accepted_calls = COUNT(*)
–° —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ –ø–µ—Ä–∏–æ–¥—É –∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä).

1.2. –ü—Ä–æ–ø—É—â–µ–Ω–æ –∑–≤–æ–Ω–∫–æ–≤
–ï—Å–ª–∏ —Ç—ã –∑–∞–≤–µ–¥—ë—à—å –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –≤ call_scores:
–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π –∑–≤–æ–Ω–æ–∫:

 call_type = '–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π'

 –ò–õ–ò (–µ—Å–ª–∏ –Ω–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è)

 (talk_duration IS NULL OR talk_duration = 0) AND call_success = 0.


–§–æ—Ä–º—É–ª–∞:
missed_calls = COUNT(*)
    WHERE call_type = '–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π'
       OR ((talk_duration IS NULL OR talk_duration = 0) AND COALESCE(call_success, 0) = 0)
–ï—Å–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –≤ call_scores –Ω–µ –ø–∏—à–µ—à—å ‚Äî —Ç–æ–≥–¥–∞ —ç—Ç–æ—Ç –∫—É—Å–æ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è –≤ call_history, –∞ –≤ —ç—Ç–æ–º –¥–∞—à–µ –ø–æ call_scores –ø–æ–∫–∞–∑—ã–≤–∞–µ—à—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω—è—Ç—ã–µ.

1.3. –í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤
total_calls = accepted_calls + missed_calls
(–≤ SQL —ç—Ç–æ –±—É–¥–µ—Ç –ª–∏–±–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π UNION ALL, –ª–∏–±–æ SUM(CASE WHEN ... THEN 1 END) –ø–æ –æ–¥–Ω–æ–º—É –∑–∞–ø—Ä–æ—Å—É).

1.4. –ó–∞–ø–∏—Å–∞–Ω—ã –Ω–∞ —É—Å–ª—É–≥—É
–õ–æ–≥–∏–∫–∞:
–ó–∞–ø–∏—Å—å —Å—á–∏—Ç–∞–µ–º –ø–æ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º—É –∏—Å—Ö–æ–¥—É:


outcome = 'record'


–∏ is_target = 1 (—Ü–µ–ª–µ–≤–æ–π –∑–≤–æ–Ω–æ–∫).


–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –ø–æ–¥—Å—Ç—Ä–∞—Ö–æ–≤–∞—Ç—å—Å—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:
WHERE (outcome = 'record'
       OR call_category = '–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)')
  AND is_target = 1
–§–æ—Ä–º—É–ª–∞:
records = COUNT(*)

1.5. –õ–∏–¥—ã –±–µ–∑ –∑–∞–ø–∏—Å–∏ (–∏–∑ –∂–µ–ª–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–∞—Ç—å—Å—è)
–õ–æ–≥–∏–∫–∞:
–ö–ª–∏–µ–Ω—Ç —Ö–æ—Ç–µ–ª/—Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª –∑–∞–ø–∏—Å—å, –Ω–æ –Ω–µ –∑–∞–ø–∏—Å–∞–ª—Å—è:


outcome = 'lead_no_record'


is_target = 1.


–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏ —Ç–∏–ø–∞
–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏), –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏, –ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å.
–§–æ—Ä–º—É–ª–∞:
leads_no_record = COUNT(*)
    WHERE outcome = 'lead_no_record'
      AND is_target = 1

1.6. –ñ–µ–ª–∞—é—â–∏–µ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è
wish_to_record = records + leads_no_record
–¢–æ –µ—Å—Ç—å:
wish_to_record = COUNT(*)
    WHERE outcome IN ('record', 'lead_no_record')
      AND is_target = 1

1.7. –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ –∑–∞–ø–∏—Å—å –æ—Ç –∂–µ–ª–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–∞—Ç—å—Å—è
conversion_to_record = records / wish_to_record * 100%
–ì–¥–µ:
records ‚Äî –∫–∞–∫ –≤—ã—à–µ;


wish_to_record > 0, –∏–Ω–∞—á–µ –∫–æ–Ω–≤–µ—Ä—Å–∏—é —Å—Ç–∞–≤–∏–º 0 –∏–ª–∏ NULL.


–í SQL:
conversion_to_record =
    CASE WHEN wish_to_record > 0
         THEN records::decimal / wish_to_record * 100
         ELSE 0
    END

2. –ö–∞—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤
2.1. –û—Ü–µ–Ω–∫–∞ –≤—Å–µ—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–ë–µ—Ä—ë–º –≤—Å–µ –ø—Ä–∏–Ω—è—Ç—ã–µ –∑–≤–æ–Ω–∫–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, —É –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ü–µ–Ω–∫–∞ –µ—Å—Ç—å:
avg_score_all =
    AVG(call_score)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND call_score IS NOT NULL
–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å —Ü–µ–ª–µ–≤—ã–º–∏:
AND is_target = 1

2.2. –û—Ü–µ–Ω–∫–∞ —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ ¬´–∂–µ–ª–∞–ª–∏ –∑–∞–ø–∏—Å–∞—Ç—å—Å—è¬ª
–ë–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ –∑–≤–æ–Ω–∫–∏, –≥–¥–µ –∫–ª–∏–µ–Ω—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª –∑–∞–ø–∏—Å—å:
avg_score_leads =
    AVG(call_score)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND call_score IS NOT NULL
      AND is_target = 1
      AND outcome IN ('record', 'lead_no_record')
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å –∂—ë—Å—Ç–∫–æ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º:
AND call_category IN ('–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)', '–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)')

3. –ê–Ω–∞–ª–∏–∑ –æ—Ç–º–µ–Ω
3.1. –û—Ü–µ–Ω–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞—è–≤–æ–∫ –Ω–∞ –æ—Ç–º–µ–Ω—É
avg_score_cancel =
    AVG(call_score)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND call_score IS NOT NULL
      AND call_category = '–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏'
      AND is_target = 1

3.2. –î–æ–ª—è –æ—Ç–º–µ–Ω –æ—Ç —á–∏—Å–ª–∞ –∂–µ–ª–∞—é—â–∏—Ö –æ—Ç–º–µ–Ω–∏—Ç—å/–ø–µ—Ä–µ–Ω–µ—Å—Ç–∏
–õ–æ–≥–∏–∫–∞:
–ï—Å—Ç—å —Ç–µ, –∫—Ç–æ –∑–≤–æ–Ω–∏—Ç —Å –∑–∞–ø—Ä–æ—Å–æ–º ¬´—è –Ω–µ –ø—Ä–∏–¥—É¬ª: —ç—Ç–æ –ª–∏–±–æ –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏, –ª–∏–±–æ –ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏.


–ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –¥–æ–ª—è —Ç–µ—Ö, –∫—Ç–æ –≤ –∏—Ç–æ–≥–µ –æ—Ç–º–µ–Ω–∏–ª, —Å—Ä–µ–¥–∏ –≤—Å–µ—Ö, –∫—Ç–æ –±—ã–ª –≤ —ç—Ç–æ–º –ø–æ—Ç–æ–∫–µ ¬´–æ—Ç–º–µ–Ω–∞/–ø–µ—Ä–µ–Ω–æ—Å¬ª.


–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è:
cancel_calls =
    COUNT(*)
    WHERE call_category = '–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏'
      AND is_target = 1

reschedule_calls =
    COUNT(*)
    WHERE call_category = '–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏'
      AND is_target = 1

total_cancel_flow = cancel_calls + reschedule_calls
–§–æ—Ä–º—É–ª–∞ –¥–æ–ª–∏ –æ—Ç–º–µ–Ω:
cancel_share = cancel_calls / total_cancel_flow * 100%
–í SQL:
cancel_share =
    CASE WHEN total_cancel_flow > 0
         THEN cancel_calls::decimal / total_cancel_flow * 100
         ELSE 0
    END

4. –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–≤–æ–Ω–∫–æ–≤
–û–±—â–µ–µ –ø—Ä–∞–≤–∏–ª–æ: —Å—á–∏—Ç–∞–µ–º —Ç–æ–ª—å–∫–æ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã:
WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
  AND talk_duration > 10
4.1. –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –ø–æ –≤—Å–µ–º –ø—Ä–∏–Ω—è—Ç—ã–º –∑–≤–æ–Ω–∫–∞–º
avg_talk_all =
    AVG(talk_duration)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND talk_duration > 10
(–ú–æ–∂–Ω–æ –¥–µ–ª–∏—Ç—å –Ω–∞ 60 –∏ –≤—ã–≤–æ–¥–∏—Ç—å –≤ –º–∏–Ω—É—Ç–∞—Ö.)

4.2. –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
–û–±—â–∞—è —Ñ–æ—Ä–º—É–ª–∞:
avg_talk_by_category(category_name) =
    AVG(talk_duration)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND talk_duration > 10
      AND call_category = :category_name
–ö–æ–Ω–∫—Ä–µ—Ç–Ω–æ:
–ù–∞–≤–∏–≥–∞—Ü–∏—è:

 call_category = '–ù–∞–≤–∏–≥–∞—Ü–∏—è'


–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è):

 call_category = '–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)'


–õ–∏–¥ + –∑–∞–ø–∏—Å—å (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å):


AND call_category IN ('–ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)', '–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)')




–°–ø–∞–º, —Ä–µ–∫–ª–∞–º–∞:

 call_category = '–°–ø–∞–º, —Ä–µ–∫–ª–∞–º–∞'


–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è:

 call_category = '–ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–∏–µ–º–µ'


–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–µ–π:

 call_category = '–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏'


–ñ–∞–ª–æ–±—ã:

 call_category = '–ñ–∞–ª–æ–±–∞'


–†–µ–∑–µ—Ä–≤:

 call_category = '–†–µ–∑–µ—Ä–≤'


–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–µ–π:

 call_category = '–ü–µ—Ä–µ–Ω–æ—Å –∑–∞–ø–∏—Å–∏'



4.3. –û–±—â–µ–µ –≤—Ä–µ–º—è —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤
total_talk_time =
    SUM(talk_duration)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND talk_duration > 0

5. –†–∞–±–æ—Ç–∞ —Å –∂–∞–ª–æ–±–∞–º–∏
5.1. –ö–æ–ª-–≤–æ –∑–≤–æ–Ω–∫–æ–≤ —Å –∂–∞–ª–æ–±–∞–º–∏
complaint_calls =
    COUNT(*)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND call_category = '–ñ–∞–ª–æ–±–∞'
      AND is_target = 1

5.2. –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∂–∞–ª–æ–±
avg_score_complaint =
    AVG(call_score)
    WHERE call_type = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      AND call_category = '–ñ–∞–ª–æ–±–∞'
      AND call_score IS NOT NULL
      AND is_target = 1

6. –ë–ª–æ–∫ ¬´–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏¬ª (—Ç–µ–∫—Å—Ç –æ—Ç LLM)
–ó–¥–µ—Å—å —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å:
–ü–æ–ª–Ω—ã–π transcript;


call_score;


call_category;


outcome;


refusal_reason.


–õ–æ–≥–∏–∫–∞:
–î–ª—è –æ—Ç—á—ë—Ç–∞ ¬´–ø—Ä–æ—Å—Ç–æ –æ—Ç—á—ë—Ç¬ª ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ª—å–∫–æ —á–∏—Å–ª–æ–≤—ã–µ –±–ª–æ–∫–∏ 1‚Äì5.


–î–ª—è –æ—Ç—á—ë—Ç–∞ ¬´—Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–µ–π¬ª:


–ë–µ—Ä—ë–º N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö/—Ç–∏–ø–∏—á–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –∑–∞ –ø–µ—Ä–∏–æ–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5‚Äì10 —à—Ç—É–∫ —Å:


–Ω–∏–∑–∫–∏–º call_score


–∏ outcome IN ('lead_no_record', 'record') –∏–ª–∏ call_category IN ('–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)', '–ñ–∞–ª–æ–±–∞', '–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏')).


–û—Ç–¥–∞—ë–º –≤ LLM:


transcript


call_score


call_category


outcome


refusal_reason


–ù–∞ –≤—ã—Ö–æ–¥–µ ‚Äî —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–π –∏ –∏–¥—ë—Ç –≤ –ø—É–Ω–∫—Ç 6 –æ—Ç—á—ë—Ç–∞.



7. –ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ ML –≤ –¥–∞—à–±–æ—Ä–¥
–°–µ–π—á–∞—Å call_scores —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç ML/LLM-–æ–±—Ä–∞–±–æ—Ç–∫–∏:
call_score, call_category, outcome, requested_*, refusal_reason.
–î–æ–±–∞–≤–∏–º –æ—Ç–¥–µ–ª—å–Ω—ã–π ML-—Å–ª–æ–π, –∫–æ—Ç–æ—Ä—ã–π —Å—á–∏—Ç–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑—ã –∏ –∏–Ω–¥–µ–∫—Å—ã, –∞ –≤ –¥–∞—à–±–æ—Ä–¥ –≤—ã–≤–æ–¥–∏–º –∞–≥—Ä–µ–≥–∞—Ç—ã.
7.1. –ú–æ–¥–µ–ª—å 1: –ü—Ä–æ–≥–Ω–æ–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏–∑ –ª–∏–¥–∞ –≤ –∑–∞–ø–∏—Å—å
–ú–æ–¥–µ–ª—å (–ª–æ–≥—Ä–µ–≥/–≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥) –æ–±—É—á–∞–µ—Ç—Å—è –Ω–∞:
–û–±—ä–µ–∫—Ç—ã: —Ç–æ–ª—å–∫–æ —Ü–µ–ª–µ–≤—ã–µ –∑–≤–æ–Ω–∫–∏, is_target = 1,


–¶–µ–ª–µ–≤–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:


y_record = 1, –µ—Å–ª–∏ outcome = 'record'


y_record = 0, –µ—Å–ª–∏ outcome = 'lead_no_record'.


–ü—Ä–∏–∑–Ω–∞–∫–∏:


utm_source_by_number


requested_service_id / requested_service_name


requested_doctor_speciality


–≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞ (extract(hour from call_date), –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏)


context_type (–≤—Ö–æ–¥—è—â–∏–π/–∏—Å—Ö–æ–¥—è—â–∏–π)


talk_duration (–¥–ª—è —É–∂–µ —Å–æ—Å—Ç–æ—è–≤—à–∏—Ö—Å—è)


–≤–æ–∑–º–æ–∂–Ω–æ, –≤–µ–∫—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π transcript (—ç–º–±–µ–¥–¥–∏–Ω–≥).


–ù–∞ –≤—ã—Ö–æ–¥–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ª–∏–¥–∞ –¥–∞—ë–º:
p_record ‚àà [0;1] ‚Äî –ø—Ä–æ–≥–Ω–æ–∑ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∑–∞–ø–∏—Å–∏
–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫–æ–ª–æ–Ω–∫–∞ ml_p_record –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ call_ml_scores).
–ú–µ—Ç—Ä–∏–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ –º–æ–¥–µ–ª–∏ 1
–î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞/–æ–ø–µ—Ä–∞—Ç–æ—Ä–∞:
–û–∂–∏–¥–∞–µ–º–æ–µ —á–∏—Å–ª–æ –∑–∞–ø–∏—Å–µ–π:


expected_records = Œ£ ml_p_record   –ø–æ –≤—Å–µ–º –∑–≤–æ–Ω–∫–∞–º, –≥–¥–µ is_target=1 –∏ outcome ‚àà ('record','lead_no_record')
–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ —á–∏—Å–ª–æ –∑–∞–ø–∏—Å–µ–π:


actual_records = COUNT(*) WHERE outcome = 'record' AND is_target = 1
–ü–µ—Ä–µ–∏–∑–ø–æ–ª–Ω–µ–Ω–∏–µ / –Ω–µ–¥–æ–≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ (uplift –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ ¬´—Å—Ä–µ–¥–Ω–∏—Ö —É—Å–ª–æ–≤–∏–π¬ª):


record_uplift = actual_records - expected_records
> 0 ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä ¬´–≤—ã–±–∏–≤–∞–µ—Ç¬ª –±–æ–ª—å—à–µ –∑–∞–ø–∏—Å–µ–π, —á–µ–º –æ–∂–∏–¥–∞–µ—Ç –º–æ–¥–µ–ª—å (—Ä–∞–±–æ—Ç–∞–µ—Ç –ª—É—á—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ);


< 0 ‚Äî –Ω–∞–æ–±–æ—Ä–æ—Ç.


–£–ø—É—â–µ–Ω–Ω—ã–µ ¬´–≥–æ—Ä—è—á–∏–µ –ª–∏–¥—ã¬ª:


hot_missed_leads =
    COUNT(*)
    WHERE is_target = 1
      AND outcome = 'lead_no_record'
      AND ml_p_record >= 0.7   -- –ø–æ—Ä–æ–≥ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π
–≠—Ç–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å:
—Å–∫–æ–ª—å–∫–æ –∑–≤–æ–Ω–∫–æ–≤ —Å –≤—ã—Å–æ–∫–æ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å—é –∑–∞–ø–∏—Å–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ –¥–æ–≤—ë–ª –¥–æ –∑–∞–ø–∏—Å–∏.
–ò–Ω–¥–µ–∫—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ—Ç–æ–∫–∞:


difficulty_index =
    AVG(1 - ml_p_record)
    WHERE is_target = 1
      AND outcome IN ('record','lead_no_record')
–ß–µ–º –≤—ã—à–µ –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äî —Ç–µ–º ¬´—Ç—è–∂–µ–ª–µ–µ¬ª –∫–ª–∏–µ–Ω—Ç—ã —É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –ø–æ –º–æ–¥–µ–ª–∏ (–º–µ–Ω—å—à–µ –∏–∑–Ω–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å–∏).


–í –¥–∞—à–±–æ—Ä–¥–µ:
–î–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ ‚Äî —Ç–∞–±–ª–∏—Ü–∞:


–û–ø–µ—Ä–∞—Ç–æ—Ä
–ñ–µ–ª–∞—é—â–∏—Ö –∑–∞–ø–∏—Å–∞—Ç—å—Å—è
–ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–ø–∏—Å–µ–π
–§–∞–∫—Ç –∑–∞–ø–∏—Å–µ–π
Uplift
–ì–æ—Ä—è—á–∏—Ö –ª–∏–¥–æ–≤ —É–ø—É—â–µ–Ω–æ
–ò–Ω–¥–µ–∫—Å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏





–î–ª—è –æ–¥–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ ‚Äî —Ç–µ –∂–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ + —Å–ø–∏—Å–æ–∫ 5‚Äì10 —Å–∞–º—ã—Ö ¬´–≥–æ—Ä—è—á–∏—Ö —É–ø—É—â–µ–Ω–Ω—ã—Ö –ª–∏–¥–æ–≤¬ª (–Ω–æ–º–µ—Ä, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, ml_p_record, refusal_reason).



7.2. –ú–æ–¥–µ–ª—å 2: –ü—Ä–æ–≥–Ω–æ–∑ –æ—Ü–µ–Ω–∫–∏ –∑–≤–æ–Ω–∫–∞ (–∫–∞—á–µ—Å—Ç–≤–∞)
–û—Ç–¥–µ–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏:
–û–±—ä–µ–∫—Ç—ã: –∑–≤–æ–Ω–∫–∏, –≥–¥–µ –µ—Å—Ç—å call_score.


–¶–µ–ª—å: call_score (0‚Äì10).


–ü—Ä–∏–∑–Ω–∞–∫–∏: –≤—Å—ë —Ç–æ –∂–µ, –ø–ª—é—Å —ç–º–±–µ–¥–¥–∏–Ω–≥ transcript.


–ù–∞ –≤—ã—Ö–æ–¥–µ:
ml_score_pred ‚àà [0;10] ‚Äî –ø—Ä–æ–≥–Ω–æ–∑ –æ–∂–∏–¥–∞–µ–º–æ–π –æ—Ü–µ–Ω–∫–∏ –ø–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É
–°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ —Ç–∞–±–ª–∏—Ü—É.
–ú–µ—Ç—Ä–∏–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞ –ø–æ –º–æ–¥–µ–ª–∏ 2
–ò–Ω–¥–µ–∫—Å –Ω–µ–¥–æ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–∞:


quality_gap =
    AVG(ml_score_pred - call_score)
    WHERE call_score IS NOT NULL
–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:
> 0: –º–æ–¥–µ–ª—å —Å—á–∏—Ç–∞–µ—Ç, —á—Ç–æ –≤ —Å—Ä–µ–¥–Ω–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä –º–æ–≥ –±—ã –≥–æ–≤–æ—Ä–∏—Ç—å –ª—É—á—à–µ (–µ–≥–æ —Ä–µ–∞–ª—å–Ω—ã–µ –æ—Ü–µ–Ω–∫–∏ –Ω–∏–∂–µ –æ–∂–∏–¥–∞–µ–º—ã—Ö);


< 0: –Ω–∞–æ–±–æ—Ä–æ—Ç, –æ–ø–µ—Ä–∞—Ç–æ—Ä –≤ —Å—Ä–µ–¥–Ω–µ–º –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–∏—Ç –æ–∂–∏–¥–∞–Ω–∏—è.


–ö–æ–ª-–≤–æ ¬´–ø—Ä–æ—Å–∞–¥–æ–∫¬ª –Ω–∞ –≥–æ—Ä—è—á–∏—Ö –ª–∏–¥–∞—Ö:


–ë–µ—Ä—ë–º —Ç–æ–ª—å–∫–æ –∑–≤–æ–Ω–∫–∏:
is_target = 1


outcome IN ('record','lead_no_record')


ml_score_pred >= 8 (–ø–æ –º–æ–¥–µ–ª–∏ –æ–∂–∏–¥–∞–ª–∞—Å—å —Ö–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞)


call_score < 6 (–ø–æ —Ñ–∞–∫—Ç—É —Ä–∞–±–æ—Ç–∞ —Å–ª–∞–±–∞—è)


hot_quality_fails =
    COUNT(*)
–≠—Ç–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä—ã –º–æ–∂–Ω–æ –≤–µ—à–∞—Ç—å –≤ —Ä–∞–∑–¥–µ–ª ¬´—Ä–∞–∑–±–æ—Ä –ø–æ–ª—ë—Ç–æ–≤¬ª –≤ –æ—Ç—á—ë—Ç–µ/–±–æ—Ç–µ.

7.3. –ú–æ–¥–µ–ª—å 3 (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –†–∏—Å–∫ –∂–∞–ª–æ–±—ã / –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ –æ–ø—ã—Ç–∞
–ï—Å–ª–∏ –Ω–∞–∫–æ–ø–∏—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –ø–æ call_category = '–ñ–∞–ª–æ–±–∞', –º–æ–∂–Ω–æ:
–û–±—É—á–∏—Ç—å –±–∏–Ω–∞—Ä–Ω—É—é –º–æ–¥–µ–ª—å:


y_complaint = 1, –µ—Å–ª–∏ call_category = '–ñ–∞–ª–æ–±–∞' (–∏–ª–∏ –ø–æ–∑–∂–µ –ø–æ —ç—Ç–æ–º—É –ø–∞—Ü–∏–µ–Ω—Ç—É –ø–æ—è–≤–∏–ª–∞—Å—å –∂–∞–ª–æ–±–∞);


y_complaint = 0 ‚Äî –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Ü–µ–ª–µ–≤—ã–µ, –∫—Ä–æ–º–µ —Å–ø–∞–º–∞/—Å–±–æ–µ–≤.


–ù–∞ –≤—ã—Ö–æ–¥–µ: ml_p_complaint ‚Äî –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, —á—Ç–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä–∞—Å—Ç—ë—Ç –≤ –∂–∞–ª–æ–±—É.


–ú–µ—Ç—Ä–∏–∫–∏:
–°—Ä–µ–¥–Ω–∏–π –ø—Ä–æ–≥–Ω–æ–∑–Ω—ã–π —Ä–∏—Å–∫ –∂–∞–ª–æ–±—ã –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É.


–ö–æ–ª-–≤–æ –∑–≤–æ–Ω–∫–æ–≤ —Å ml_p_complaint >= 0.5.


–ö–æ–ª-–≤–æ —Ä–µ–∞–ª—å–Ω—ã—Ö –∂–∞–ª–æ–± vs –æ–∂–∏–¥–∞–µ–º—ã—Ö.



8. Live-–¥–µ—à–±–æ—Ä–¥: –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º –∏ –ø–æ –æ–¥–Ω–æ–º—É
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:
–í—å—é—Ö–∞/CTE, –≥–¥–µ —Å—Ä–∞–∑—É —Å—á–∏—Ç–∞–µ—à—å:


operator_name (–∫–∞–∫ –≤—ã—à–µ),


–≤—Å–µ –±–∞–∑–æ–≤—ã–µ –ø–æ–ª—è,


ML-–ø–æ–ª—è (ml_p_record, ml_score_pred, ml_p_complaint).


–î–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏:


–ü–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º:


SELECT
    operator_name,
    -- –≤—Å–µ –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ —Ä–∞–∑–¥–µ–ª–æ–≤ 1‚Äì5 + ML-–º–µ—Ç—Ä–∏–∫–∏
FROM call_scores_with_ml
WHERE call_date BETWEEN :from AND :to
GROUP BY operator_name;




–ü–æ –æ–¥–Ω–æ–º—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—É:


SELECT
    -- —Ç–µ –∂–µ –º–µ—Ç—Ä–∏–∫–∏
FROM call_scores_with_ml
WHERE call_date BETWEEN :from AND :to
  AND operator_name = :operator_name;
–ö–Ω–æ–ø–∫–∞ ¬´–û–±–Ω–æ–≤–∏—Ç—å¬ª –≤ live-–¥–µ—à–±–æ—Ä–¥–µ:


–ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–ø—Ä–æ—Å —Å :from = date_trunc('day', now()), :to = now()

 (–∏–ª–∏ —Å –Ω–∞—á–∞–ª–æ–º —Å–º–µ–Ω—ã).







–î–∞—é –¥–≤–∞ –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–∞:
–û–±—â–∏–π –¥–µ—à–±–æ—Ä–¥ –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º.


–ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–µ—à–±–æ—Ä–¥ –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É (—á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä operator_id ‚Äî –∏–∑ –Ω–µ–≥–æ –º–æ–∂–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–¥–µ–ª–∞—Ç—å –¥–µ—à–±–æ—Ä–¥ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ, –∫—Ç–æ –µ—Å—Ç—å –≤ –ë–î).



1. –®–∞–±–ª–æ–Ω: –û–±—â–∏–π –¥–µ—à–±–æ—Ä–¥ –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º
–ù–∞–∑–≤–∞–Ω–∏–µ: ¬´–ö–∞—á–µ—Å—Ç–≤–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ (—Å–≤–æ–¥–∫–∞)¬ª
1. –§–∏–ª—å—Ç—Ä—ã (–≤–µ—Ä—Ö–Ω—è—è –ø–∞–Ω–µ–ª—å)
–ü–µ—Ä–∏–æ–¥: date_from, date_to


–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: inbound / outbound


–¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è: –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è / –∑–∞–ø–∏—Å—å / –ø–µ—Ä–µ–Ω–æ—Å / –ø—Ä–æ—á–µ–µ


–ö–∞–Ω–∞–ª: phone / whatsapp / ‚Ä¶ (–µ—Å–ª–∏ –µ—Å—Ç—å)


–û–ø–µ—Ä–∞—Ç–æ—Ä: –º—É–ª—å—Ç–∏–≤—ã–±–æ—Ä (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏–π, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ¬´–≤—Å–µ¬ª)



2. KPI-—Å—Ç—Ä–æ–∫–∞ (–æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏)
–ö–∞—Ä—Ç–æ—á–∫–∞ 1. –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
–§–æ—Ä–º—É–ª–∞: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –≤ call_history —Å status in ('answered', 'completed')


–ü—Ä–∏–º–µ—Ä SQL (Postgres-—Å—Ç–∏–ª—å, –∞–¥–∞–ø—Ç–∏—Ä—É–π—Ç–µ –ø–æ–¥ —Å–≤–æ—é –°–£–ë–î):


SELECT COUNT(*) AS calls_total
FROM call_history ch
WHERE ch.call_datetime BETWEEN :date_from AND :date_to;

–ö–∞—Ä—Ç–æ—á–∫–∞ 2. –°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º
–ò—Å—Ç–æ—á–Ω–∏–∫: call_analysis_results


–§–æ—Ä–º—É–ª–∞: AVG(total_score)


–ü—Ä–∏–º–µ—Ä SQL:


SELECT AVG(car.total_score) AS avg_quality_score
FROM call_analysis_results car
JOIN call_history ch ON ch.call_id = car.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to;

–ö–∞—Ä—Ç–æ—á–∫–∞ 3. –°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞
–§–æ—Ä–º—É–ª–∞: AVG(ch.talk_duration_sec) –ø–æ –æ—Ç–≤–µ—á–µ–Ω–Ω—ã–º –∑–≤–æ–Ω–∫–∞–º


–ü—Ä–∏–º–µ—Ä SQL:


SELECT AVG(ch.talk_duration_sec) AS avg_talk_duration_sec
FROM call_history ch
WHERE ch.status = 'answered'
  AND ch.call_datetime BETWEEN :date_from AND :date_to;

–ö–∞—Ä—Ç–æ—á–∫–∞ 4. –î–æ–ª—è –∑–≤–æ–Ω–∫–æ–≤ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞ –∫–∞—á–µ—Å—Ç–≤–∞
–ü–æ—Ä–æ–≥: –Ω–∞–ø—Ä–∏–º–µ—Ä, total_score < 75


–§–æ—Ä–º—É–ª–∞: problem_calls / all_scored_calls


–ü—Ä–∏–º–µ—Ä SQL:


SELECT 
    100.0 * SUM(CASE WHEN car.total_score < 75 THEN 1 ELSE 0 END)
        / NULLIF(COUNT(car.total_score),0) AS low_quality_share
FROM call_analysis_results car
JOIN call_history ch ON ch.call_id = car.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to;

3. –¢–∞–±–ª–∏—Ü–∞ ¬´–†–µ–π—Ç–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤¬ª
–¶–µ–ª—å: –≤–∏–¥–µ—Ç—å, –∫—Ç–æ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º KPI.
–°—Ç–æ–ª–±—Ü—ã —Ç–∞–±–ª–∏—Ü—ã:
–û–ø–µ—Ä–∞—Ç–æ—Ä: operator_name


–ö–æ–ª-–≤–æ –∑–≤–æ–Ω–∫–æ–≤: calls_total


–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: avg_talk_duration_sec


–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞: avg_quality_score


–î–æ–ª—è –∑–≤–æ–Ω–∫–æ–≤ –Ω–∏–∂–µ –ø–æ—Ä–æ–≥–∞: low_quality_share


–ò–Ω–¥–µ–∫—Å –≤–Ω–∏–º–∞–Ω–∏—è (–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏): –Ω–∞–ø—Ä–∏–º–µ—Ä, low_quality_share * calls_total


–ü—Ä–∏–º–µ—Ä SQL:
SELECT 
    op.operator_id,
    op.operator_name,
    COUNT(ch.call_id) AS calls_total,
    AVG(ch.talk_duration_sec) AS avg_talk_duration_sec,
    AVG(car.total_score) AS avg_quality_score,
    100.0 * SUM(CASE WHEN car.total_score < 75 THEN 1 ELSE 0 END) 
        / NULLIF(COUNT(car.total_score),0) AS low_quality_share,
    (100.0 * SUM(CASE WHEN car.total_score < 75 THEN 1 ELSE 0 END) 
        / NULLIF(COUNT(car.total_score),0))
        * COUNT(ch.call_id) AS attention_index
FROM call_history ch
JOIN operators op ON op.operator_id = ch.operator_id
LEFT JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
GROUP BY op.operator_id, op.operator_name
ORDER BY avg_quality_score ASC;  -- –∏–ª–∏ attention_index DESC
–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: —Ç–∞–±–ª–∏—Ü–∞ + —É—Å–ª–æ–≤–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ avg_quality_score –∏ low_quality_share.

4. –ì—Ä–∞—Ñ–∏–∫ ¬´–î–∏–Ω–∞–º–∏–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –ø–æ –¥–Ω—è–º¬ª
–¶–µ–ª—å: –≤–∏–¥–µ—Ç—å, –∫–∞–∫ –º–µ–Ω—è–µ—Ç—Å—è –∫–∞—á–µ—Å—Ç–≤–æ –≤ –¥–∏–Ω–∞–º–∏–∫–µ –ø–æ –≤—Å–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º.
–û—Å—å X: –¥–∞—Ç–∞


–û—Å—å Y: —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞


–°–µ—Ä–∏—è –¥–∞–Ω–Ω—ã—Ö: –ª–∏–Ω–∏—è avg_quality_score


–ü—Ä–∏–º–µ—Ä SQL:
SELECT 
    CAST(ch.call_datetime AS DATE) AS call_date,
    AVG(car.total_score) AS avg_quality_score
FROM call_history ch
JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
GROUP BY CAST(ch.call_datetime AS DATE)
ORDER BY call_date;

5. –ì—Ä–∞—Ñ–∏–∫ ¬´–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω –Ω–∏–∑–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞¬ª
–ï—Å–ª–∏ –≤ call_analysis_results –µ—Å—Ç—å –ø–æ–º–∏–Ω—É—Ç–Ω—ã–µ/–ø–æ–ø—É–Ω–∫—Ç–Ω—ã–µ –ø–æ–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:
greeting_score


identification_score


needs_analysis_score


presentation_score


closing_score


–ú–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞: –ø–æ –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø–µ —á–µ–∫-–ª–∏—Å—Ç–∞ ‚Äî —Å—Ä–µ–¥–Ω–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —É –∑–≤–æ–Ω–∫–æ–≤ –Ω–∏–∂–µ 75 –±–∞–ª–ª–æ–≤.


–ü—Ä–∏–º–µ—Ä –∞–≥—Ä–µ–≥–∞—Ç–∞:


SELECT 
    AVG(greeting_score) AS avg_greeting,
    AVG(identification_score) AS avg_identification,
    AVG(needs_analysis_score) AS avg_needs,
    AVG(presentation_score) AS avg_presentation,
    AVG(closing_score) AS avg_closing
FROM call_analysis_results car
JOIN call_history ch ON ch.call_id = car.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND car.total_score < 75;

6. –°–ø–∏—Å–æ–∫ –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤
–¶–µ–ª—å: –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–∞–ª–∏–≤–∞—Ç—å—Å—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫—É.
–¢–∞–±–ª–∏—Ü–∞:
–î–∞—Ç–∞/–≤—Ä–µ–º—è


–û–ø–µ—Ä–∞—Ç–æ—Ä


–¢–µ–ª–µ—Ñ–æ–Ω –∫–ª–∏–µ–Ω—Ç–∞ (–º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã–π)


total_score


–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–∞–ª—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–ø–∏—Å–æ–∫ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ —Å –Ω—É–ª–µ–≤—ã–º/–Ω–∏–∑–∫–∏–º –±–∞–ª–ª–æ–º)


–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å –∑–≤–æ–Ω–∫–∞ (URL –∏–∑ Mango/—Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏)


–ü—Ä–∏–º–µ—Ä SQL:
SELECT 
    ch.call_id,
    ch.call_datetime,
    op.operator_name,
    ch.client_phone_masked,
    car.total_score,
    car.failed_criteria,          -- JSON / —Å—Ç—Ä–æ–∫–∞ —Å –ø–µ—Ä–µ—á–Ω–µ–º –ø—Ä–æ–≤–∞–ª–æ–≤
    ch.recording_url
FROM call_history ch
JOIN operators op ON op.operator_id = ch.operator_id
JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND car.total_score < 75
ORDER BY car.total_score ASC, ch.call_datetime DESC
LIMIT 100;

2. –®–∞–±–ª–æ–Ω: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–µ—à–±–æ—Ä–¥ –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É
–ù–∞–∑–≤–∞–Ω–∏–µ: ¬´–ü—Ä–æ—Ñ–∏–ª—å –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞: –∫–∞—á–µ—Å—Ç–≤–æ –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å¬ª
–î–µ—à–±–æ—Ä–¥ —Å—Ç—Ä–æ–∏—Ç—Å—è —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º :operator_id. –ò–∑ –Ω–µ–≥–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å:
–û–¥–∏–Ω –±–∞–∑–æ–≤—ã–π –¥–µ—à–±–æ—Ä–¥ —Å —Ñ–∏–ª—å—Ç—Ä–æ–º operator


–õ–∏–±–æ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö: ¬´–û–ø–µ—Ä–∞—Ç–æ—Ä –ò–≤–∞–Ω–æ–≤–∞¬ª, ¬´–û–ø–µ—Ä–∞—Ç–æ—Ä –ü–µ—Ç—Ä–æ–≤–∞¬ª –∏ —Ç.–¥., –∏—Å–ø–æ–ª—å–∑—É—è —Ç–æ—Ç –∂–µ –Ω–∞–±–æ—Ä –≤–∏–¥–∂–µ—Ç–æ–≤.



1. –§–∏–ª—å—Ç—Ä—ã
–ü–µ—Ä–∏–æ–¥: date_from, date_to


–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: inbound / outbound


–¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è (–ø–æ –∂–µ–ª–∞–Ω–∏—é)


–í—Å–µ –∑–∞–ø—Ä–æ—Å—ã ‚Äî —Å WHERE ch.operator_id = :operator_id.

2. KPI-—Å—Ç—Ä–æ–∫–∞ –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–ö–∞—Ä—Ç–æ—á–∫–∏:
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞


–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞


–î–æ–ª—è –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö –∑–≤–æ–Ω–∫–æ–≤


–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞


–¢–æ–ø-–∫—Ä–∏—Ç–µ—Ä–∏–π –ø—Ä–æ–≤–∞–ª–∞ (–ø–æ –≥—Ä—É–ø–ø–µ —á–µ–∫-–ª–∏—Å—Ç–∞)


–ü—Ä–∏–º–µ—Ä –∞–≥—Ä–µ–≥–∞—Ç–∞:
SELECT 
    COUNT(ch.call_id) AS calls_total,
    AVG(car.total_score) AS avg_quality_score,
    100.0 * SUM(CASE WHEN car.total_score < 75 THEN 1 ELSE 0 END) 
        / NULLIF(COUNT(car.total_score),0) AS low_quality_share,
    AVG(ch.talk_duration_sec) AS avg_talk_duration_sec
FROM call_history ch
LEFT JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id;

3. –î–∏–Ω–∞–º–∏–∫–∞ –ø–æ –¥–Ω—è–º –¥–ª—è –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–ì—Ä–∞—Ñ–∏–∫ 1: ¬´–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–≤–æ–Ω–∫–æ–≤ –≤ –¥–µ–Ω—å¬ª
–ì—Ä–∞—Ñ–∏–∫ 2: ¬´–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –∫–∞—á–µ—Å—Ç–≤–∞ –≤ –¥–µ–Ω—å¬ª
SELECT 
    CAST(ch.call_datetime AS DATE) AS call_date,
    COUNT(ch.call_id) AS calls_total,
    AVG(car.total_score) AS avg_quality_score
FROM call_history ch
LEFT JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id
GROUP BY CAST(ch.call_datetime AS DATE)
ORDER BY call_date;

4. ¬´–¢–µ–ø–ª–æ–≤–∞—è –∫–∞—Ä—Ç–∞¬ª –ø–æ —á–µ–∫-–ª–∏—Å—Ç—É –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–ï—Å–ª–∏ –µ—Å—Ç—å –ø–æ–ª—è –ø–æ –±–ª–æ–∫–∞–º:
–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª –ø–æ –∫–∞–∂–¥–æ–º—É –±–ª–æ–∫—É —á–µ–∫-–ª–∏—Å—Ç–∞ –∑–∞ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥.


–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.


SELECT 
    AVG(greeting_score) AS avg_greeting,
    AVG(identification_score) AS avg_identification,
    AVG(needs_analysis_score) AS avg_needs,
    AVG(presentation_score) AS avg_presentation,
    AVG(closing_score) AS avg_closing
FROM call_analysis_results car
JOIN call_history ch ON ch.call_id = car.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id;
–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è: –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–π –±–∞—Ä—á–∞—Ä—Ç –∏–ª–∏ heatmap (–∫—Ä–∏—Ç–µ—Ä–∏–∏ –ø–æ –æ—Å–∏ Y, –∑–Ω–∞—á–µ–Ω–∏–µ ‚Äì –ø–æ –æ—Å–∏ X).

5. –¢–∞–±–ª–∏—Ü–∞ ¬´–õ—É—á—à–∏–µ –∑–≤–æ–Ω–∫–∏¬ª –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–§–∏–ª—å—Ç—Ä: total_score >= 90


–ö–æ–ª–æ–Ω–∫–∏:


–î–∞—Ç–∞/–≤—Ä–µ–º—è


–¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è


–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å


total_score


–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å


SELECT 
    ch.call_id,
    ch.call_datetime,
    ch.call_type,
    ch.talk_duration_sec,
    car.total_score,
    ch.recording_url
FROM call_history ch
JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id
  AND car.total_score >= 90
ORDER BY car.total_score DESC
LIMIT 50;

6. –¢–∞–±–ª–∏—Ü–∞ ¬´–ó–≤–æ–Ω–∫–∏ –¥–ª—è —Ä–∞–∑–±–æ—Ä–∞¬ª –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
–§–∏–ª—å—Ç—Ä: total_score < 75 –∏–ª–∏ ¬´–µ—Å—Ç—å –ø—Ä–æ–≤–∞–ª—ã –ø–æ –∫—Ä–∏—Ç–∏—á–Ω—ã–º –ø—É–Ω–∫—Ç–∞–º¬ª


–ö–æ–ª–æ–Ω–∫–∏:


–î–∞—Ç–∞/–≤—Ä–µ–º—è


–¢–∏–ø –æ–±—Ä–∞—â–µ–Ω–∏—è


–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å


total_score


–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–≤–∞–ª—ã


–°—Å—ã–ª–∫–∞ –Ω–∞ –∑–∞–ø–∏—Å—å


SELECT 
    ch.call_id,
    ch.call_datetime,
    ch.call_type,
    ch.talk_duration_sec,
    car.total_score,
    car.failed_criteria,
    ch.recording_url
FROM call_history ch
JOIN call_analysis_results car ON car.call_id = ch.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id
  AND car.total_score < 75
ORDER BY car.total_score ASC, ch.call_datetime DESC
LIMIT 50;

7. –ë–ª–æ–∫ ¬´–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É¬ª
–ï—Å–ª–∏ –≤—ã —É–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ö—Ä–∞–Ω–∏—Ç–µ –≤ car.recommendations), –º–æ–∂–Ω–æ:
–ü–æ–∫–∞–∑–∞—Ç—å:


–¢–æ–ø-3 —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏—Ö—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —ç—Ç–æ–º—É –æ–ø–µ—Ä–∞—Ç–æ—Ä—É.


–û—Ç–¥–µ–ª—å–Ω—ã–π –±–ª–æ–∫: ¬´–ù–∞ —á—Ç–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –≤ —Å–ª–µ–¥—É—é—â–µ–º –º–µ—Å—è—Ü–µ¬ª.


–ü—Ä–∏–º–µ—Ä –∞–≥—Ä–µ–≥–∞—Ç–∞ –ø–æ —á–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–º—Å—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º (–µ—Å–ª–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –≤–∏–¥–µ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞/—Ç–µ–≥–æ–≤):
SELECT 
    r.recommendation_text,
    COUNT(*) AS freq
FROM call_recommendations r
JOIN call_history ch ON ch.call_id = r.call_id
WHERE ch.call_datetime BETWEEN :date_from AND :date_to
  AND ch.operator_id = :operator_id
GROUP BY r.recommendation_text
ORDER BY freq DESC
LIMIT 5;

3. –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å ¬´–æ—Ç–¥–µ–ª—å–Ω—ã–π –¥–µ—à–±–æ—Ä–¥ –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤, –∫—Ç–æ –µ—Å—Ç—å –≤ –ë–î¬ª
–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏:
–°–æ–∑–¥–∞–µ—Ç–µ –æ–¥–∏–Ω –±–∞–∑–æ–≤—ã–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –¥–µ—à–±–æ—Ä–¥ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º operator_id.


–ù–∞ —Å–≤–æ–¥–Ω–æ–º –¥–µ—à–±–æ—Ä–¥–µ (–∏–∑ –ø–µ—Ä–≤–æ–≥–æ —à–∞–±–ª–æ–Ω–∞) –¥–æ–±–∞–≤–ª—è–µ—Ç–µ —Ç–∞–±–ª–∏—Ü—É ¬´–†–µ–π—Ç–∏–Ω–≥ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤¬ª —Å –∫–æ–ª–æ–Ω–∫–æ–π:


¬´–û—Ç–∫—Ä—ã—Ç—å –ø—Ä–æ—Ñ–∏–ª—å¬ª ‚Äî —Å—Å—ã–ª–∫–∞/–∫–Ω–æ–ø–∫–∞, –ø–æ–¥—Å—Ç–∞–≤–ª—è—é—â–∞—è operator_id –≤ URL –¥–µ—à–±–æ—Ä–¥–∞ –ø—Ä–æ—Ñ–∏–ª—è.


–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ:


–î–ª—è –∫–∞–∂–¥–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ –≤ –ë–î —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –µ—Å—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å-–¥–µ—à–±–æ—Ä–¥ (–æ–¥–Ω–∞ –∏ —Ç–∞ –∂–µ —Å—Ö–µ–º–∞, –Ω–æ —Å —Ä–∞–∑–Ω—ã–º operator_id).


–ï—Å–ª–∏ –≤—Å—ë-—Ç–∞–∫–∏ –Ω—É–∂–Ω—ã ¬´—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–µ¬ª –¥–µ—à–±–æ—Ä–¥—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã—Ö —Å—Å—ã–ª–∫–∞—Ö) ‚Äî –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ BI-—Å–∏—Å—Ç–µ–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –¥–µ—à–±–æ—Ä–¥ –∏ –∂–µ—Å—Ç–∫–æ –∑–∞—à–∏—Ç—å operator_id –≤ —Ñ–∏–ª—å—Ç—Ä.


–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–æ–º –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–∏ —à–∞–±–ª–æ–Ω—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ–¥ –≤–∞—à BI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç (Metabase, Power BI, Redash, Grafana –∏ —Ç.–ø.) –∏ —Ñ–æ—Ä–º–∞—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –ø—Ä–∏—Å—ã–ª–∞–ª–∏ –ø—Ä–∏–º–µ—Ä (–ø–æ–¥ —Ç–∞–±–ª–∏—Ü—É/JSON/–æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –≤–∏–¥–∂–µ—Ç–æ–≤).













–ú–∞—Ç –∞–Ω–∞–ª–∏–∑ –∏ –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ ML - –Ω–∞—á–∞–ª –¥–µ–ª–∞—Ç—å


–ù–∏–∂–µ ‚Äî –±–æ–µ–≤–æ–π –∫–∞—Ä–∫–∞—Å –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏/–ª–æ–≥–∏–∫–∏, —É–∂–µ –æ—á–∏—â–µ–Ω–Ω—ã–π –æ—Ç –º—É—Å–æ—Ä–∞ –∏ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏–π, –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–π –∫ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–µ call_scores –∏ call_history. –≠—Ç–æ —Ç–æ, –Ω–∞ —á—ë–º —Ä–µ–∞–ª—å–Ω–æ –º–æ–∂–Ω–æ —Å—Ç—Ä–æ–∏—Ç—å –æ—Ç—á—ë—Ç—ã –∏ –¥–∞—à–±–æ—Ä–¥—ã –±–æ—Ç–∞.

0. –û—Å—å –≤—Ä–µ–º–µ–Ω–∏ –∏ —É—Ä–æ–≤–µ–Ω—å –∞–≥—Ä–µ–≥–∞—Ü–∏–∏
–ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–Ω—Ü–∏–ø:
–ì–ª–∞–≤–Ω–∞—è –æ—Å—å –¥–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –æ—Ç—á—ë—Ç–æ–≤ ‚Äî –¥–µ–Ω—å –∑–≤–æ–Ω–∫–∞:
t = DATE(call_scores.call_date)
–í—Å–µ –¥–Ω–µ–≤–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—á–∏—Ç–∞–µ–º –ø–æ call_date.
score_date –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ ¬´–∫–æ–≥–¥–∞ –∏ –∫–∞–∫ –±—ã—Å—Ç—Ä–æ –æ—Ü–µ–Ω–∏–≤–∞–ª–∏ –∑–≤–æ–Ω–∫–∏¬ª, –∞ –Ω–µ –¥–ª—è –æ—Å–Ω–æ–≤–Ω—ã—Ö KPI.
–î–∞–ª—å—à–µ –≤—Å—ë –º–æ–∂–Ω–æ —Ä–µ–∑–∞—Ç—å –ø–æ —Å—Ä–µ–∑–∞–º:
–≤—Å—è –∫–ª–∏–Ω–∏–∫–∞;


–æ–ø–µ—Ä–∞—Ç–æ—Ä (called_info, caller_info, extension –≤ called_info);


–∫–∞–Ω–∞–ª (utm_source_by_number);


—É—Å–ª—É–≥–∞ (requested_service_id / requested_service_name);


–≤—Ä–∞—á (requested_doctor_id / requested_doctor_name / requested_doctor_speciality).


–í SQL —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫:
WHERE DATE(call_date) = :day
  -- AND –æ–ø–µ—Ä–∞—Ç–æ—Ä / –∫–∞–Ω–∞–ª / —É—Å–ª—É–≥–∞ / –≤—Ä–∞—á

1. –ö–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫–∏ 
call_scores
1.1. –ü–æ–ª—è, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –æ–ø–∏—Ä–∞–µ–º—Å—è
–ò–∑ call_scores –∏—Å–ø–æ–ª—å–∑—É–µ–º:
call_score ‚Äì –±–∞–ª–ª;


call_date ‚Äì –≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞;


call_type ‚Äì ‚Äò–≤—Ö–æ–¥—è—â–∏–π‚Äô / ‚Äò–∏—Å—Ö–æ–¥—è—â–∏–π‚Äô;


talk_duration ‚Äì –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–∞;


call_success ‚Äì —Å—Ç–∞—Ç—É—Å (‚Äò–ø—Ä–∏–Ω—è—Ç—ã–π‚Äô –∏ —Ç.–ø.);


call_category ‚Äì —Ç–µ–∫—Å—Ç–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è;


number_category ‚Äì —á–∏—Å–ª–æ–≤–æ–π –∫–æ–¥ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–≥–ª–∞–≤–Ω—ã–π –¥–ª—è –ª–æ–≥–∏–∫–∏);


is_target ‚Äì 1 = —Ü–µ–ª–µ–≤–æ–π, 0 = –Ω–µ—Ü–µ–ª–µ–≤–æ–π;


outcome ‚Äì –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∏—Ç–æ–≥: 'record', 'lead_no_record', 'info_only', 'non_target' (–ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –ø–æ–∑–∂–µ –¥–æ–±–∞–≤–∏—Ç—å 'cancel');


utm_source_by_number;


requested_service_id, requested_service_name;


requested_doctor_id, requested_doctor_name, requested_doctor_speciality;


refusal_reason.


1.2. –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (–æ—Å–Ω–æ–≤–∞ –ª–æ–≥–∏–∫–∏)
–ü–æ –ø—Ä–∏–º–µ—Ä–∞–º –∏–∑ —Ç–∞–±–ª–∏—Ü—ã –≤–≤–æ–¥–∏–º –µ–¥–∏–Ω—ã–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –ø–æ number_category (—ç—Ç–æ –∏ –µ—Å—Ç—å –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–∞—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è):
1  ‚Äì –ó–∞–ø–∏—Å—å –Ω–∞ —É—Å–ª—É–≥—É (—É—Å–ø–µ—à–Ω–∞—è)        ‚Üí business_class = 'record'
2  ‚Äì –õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)                   ‚Üí business_class = 'lead_no_record'
3  ‚Äì –°–ø–∞–º, —Ä–µ–∫–ª–∞–º–∞                      ‚Üí business_class = 'spam'
5  ‚Äì –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ –æ –ø—Ä–∏–µ–º–µ               ‚Üí business_class = 'reminder'
6  ‚Äì –û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏                      ‚Üí business_class = 'cancel_record'
7  ‚Äì –ñ–∞–ª–æ–±–∞                             ‚Üí business_class = 'complaint'
8  ‚Äì –°–±–æ–π                               ‚Üí business_class = 'fail'
9  ‚Äì –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –∑–≤–æ–Ω–æ–∫                 ‚Üí business_class = 'tech'
(–æ—Å—Ç–∞–ª—å–Ω—ã–µ, –µ—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è, —è–≤–Ω–æ –¥–æ–±–∞–≤–ª—è–µ–º)
–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å:
CASE number_category
  WHEN 1 THEN 'record'
  WHEN 2 THEN 'lead_no_record'
  WHEN 3 THEN 'spam'
  WHEN 5 THEN 'reminder'
  WHEN 6 THEN 'cancel_record'
  WHEN 7 THEN 'complaint'
  WHEN 8 THEN 'fail'
  WHEN 9 THEN 'tech'
  ELSE 'other'
END AS business_class
–î–∞–ª—å—à–µ –≤ –ª–æ–≥–∏–∫–µ –º—ã –æ–ø–∏—Ä–∞–µ–º—Å—è –Ω–∞ number_category/business_class, –∞ –Ω–µ –Ω–∞ LIKE –ø–æ —Ç–µ–∫—Å—Ç—É.
1.3. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –Ω–∞ —Å—Ç—Ä–æ–∫–µ (row-level flags)
–î–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏ i:
1.3.1. –ü–æ outcome (–≤–æ—Ä–æ–Ω–∫–∞)
I_outcome_record(i)       = 1, –µ—Å–ª–∏ outcome = 'record',       –∏–Ω–∞—á–µ 0
I_outcome_lead_no_rec(i)  = 1, –µ—Å–ª–∏ outcome = 'lead_no_record', –∏–Ω–∞—á–µ 0
I_outcome_info(i)         = 1, –µ—Å–ª–∏ outcome = 'info_only',    –∏–Ω–∞—á–µ 0
I_outcome_non_target(i)   = 1, –µ—Å–ª–∏ outcome = 'non_target',   –∏–Ω–∞—á–µ 0
SQL-–ø—Ä–∏–º–µ—Ä:
CASE WHEN outcome = 'record' THEN 1 ELSE 0 END AS I_outcome_record
1.3.2. –ü–æ —Ü–µ–ª–µ–≤–æ—Å—Ç–∏
I_target(i)    = 1, –µ—Å–ª–∏ is_target = 1, –∏–Ω–∞—á–µ 0
I_nontarget(i) = 1, –µ—Å–ª–∏ is_target = 0, –∏–Ω–∞—á–µ 0
1.3.3. –ü–æ –±–∏–∑–Ω–µ—Å-–∫–ª–∞—Å—Å—É (—á–µ—Ä–µ–∑ 
number_category
)
I_record_class(i)        = 1, –µ—Å–ª–∏ number_category = 1, –∏–Ω–∞—á–µ 0
I_lead_nobook_class(i)   = 1, –µ—Å–ª–∏ number_category = 2, –∏–Ω–∞—á–µ 0
I_cancel_record_class(i) = 1, –µ—Å–ª–∏ number_category = 6, –∏–Ω–∞—á–µ 0

I_reminder(i)   = 1, –µ—Å–ª–∏ number_category = 5, –∏–Ω–∞—á–µ 0
I_complaint(i)  = 1, –µ—Å–ª–∏ number_category = 7, –∏–Ω–∞—á–µ 0
I_fail(i)       = 1, –µ—Å–ª–∏ number_category = 8, –∏–Ω–∞—á–µ 0
I_spam(i)       = 1, –µ—Å–ª–∏ number_category = 3, –∏–Ω–∞—á–µ 0
I_tech(i)       = 1, –µ—Å–ª–∏ number_category = 9, –∏–Ω–∞—á–µ 0
–¢–µ–∫—Å—Ç call_category –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ä—É—á–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞, –∞ –Ω–µ –¥–ª—è –ª–æ–≥–∏–∫–∏.
1.3.4. –û—Ç–∫–∞–∑—ã / –æ—Ç–º–µ–Ω—ã
–†–∞–∑–≤–æ–¥–∏–º –æ—Ç–º–µ–Ω—É –∑–∞–ø–∏—Å–∏ –∏ –æ—Ç–∫–∞–∑ –ª–∏–¥–∞:
–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏ (–ø–∞—Ü–∏–µ–Ω—Ç –æ—Ç–º–µ–Ω–∏–ª —É–∂–µ –Ω–∞–∑–Ω–∞—á—ë–Ω–Ω—ã–π –ø—Ä–∏—ë–º):


I_cancel_record(i) = 1,
  –µ—Å–ª–∏ number_category = 6   -- –±–∏–∑–Ω–µ—Å-–∫–ª–∞—Å—Å "–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏"
     –ò is_target = 1,
  –∏–Ω–∞—á–µ 0.
–û—Ç–∫–∞–∑ –ª–∏–¥–∞ (–ª–∏–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ—à—ë–ª –¥–æ –∑–∞–ø–∏—Å–∏):


I_refusal_lead(i) = 1,
  –µ—Å–ª–∏ number_category = 2        -- –õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)
     –ò is_target = 1
     –ò refusal_reason IS NOT NULL
     –ò outcome = 'lead_no_record',
  –∏–Ω–∞—á–µ 0.
–û—Ç–¥–µ–ª—å–Ω–æ –º–æ–∂–Ω–æ –∏–º–µ—Ç—å:
I_any_refusal(i) = 1, –µ—Å–ª–∏ refusal_reason IS NOT NULL –∏ outcome != 'record'.
–Ω–æ –≤ KPI –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–º–µ–Ω–Ω–æ I_cancel_record –∏ I_refusal_lead, –∞ –Ω–µ ¬´–≤—Å—ë –ø–æ–¥—Ä—è–¥¬ª.
1.4. –û–¥–Ω–æ (–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ) –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–¥–∞
–§–∏–∫—Å–∏—Ä—É–µ–º –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:
–õ–∏–¥ = —Ü–µ–ª–µ–≤–æ–π –∑–≤–æ–Ω–æ–∫ –ø–æ —É—Å–ª—É–≥–µ/–≤—Ä–∞—á—É, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º 1 (–∑–∞–ø–∏—Å—å), 2 (–ª–∏–¥ –±–µ–∑ –∑–∞–ø–∏—Å–∏), 6 (–æ—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏).
–ù–∞ —É—Ä–æ–≤–Ω–µ —Å—Ç—Ä–æ–∫–∏:
I_lead_any(i) = 1,
  –µ—Å–ª–∏ is_target = 1
   –ò number_category IN (1, 2, 6),
  –∏–Ω–∞—á–µ 0.
–†–∞–∑–±–∏–≤–∫–∞:
I_lead_with_record(i) = 1,
  –µ—Å–ª–∏ is_target = 1 –ò number_category = 1,
  –∏–Ω–∞—á–µ 0.

I_lead_no_record(i) = 1,
  –µ—Å–ª–∏ is_target = 1 –ò number_category = 2,
  –∏–Ω–∞—á–µ 0.

I_lead_canceled(i) = 1,
  –µ—Å–ª–∏ is_target = 1 –ò number_category = 6,
  –∏–Ω–∞—á–µ 0.
–¢–µ–º —Å–∞–º—ã–º:
I_lead_any = I_lead_with_record + I_lead_no_record + I_lead_canceled
–∏ —É —Ç–µ–±—è –æ–¥–Ω–∞, –∂—ë—Å—Ç–∫–∞—è, –Ω–µ –¥–≤–æ—è–∫–∞—è –¥–µ—Ñ–∏–Ω–∏—Ü–∏—è –ª–∏–¥–∞.

2. –î–Ω–µ–≤–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ 
call_scores
 (–¥–µ–Ω—å t)
–û–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ: t = DATE(call_date).
–í—Å–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –Ω–∏–∂–µ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –∫–∞–∫ –ø–æ –∫–ª–∏–Ω–∏–∫–µ, —Ç–∞–∫ –∏ —Å GROUP BY –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä—É/–∫–∞–Ω–∞–ª—É/—É—Å–ª—É–≥–µ/–≤—Ä–∞—á—É.
2.1. –ü—Ä–∏–Ω—è—Ç—ã–µ/–æ—Ü–µ–Ω—ë–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ (A_t)
–ü—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ (–ª—É—á—à–µ –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ):
1 –∑–≤–æ–Ω–æ–∫ ‚Üí 1 —Å—Ç—Ä–æ–∫–∞ –≤ call_scores.

 –ï—Å–ª–∏ —ç—Ç–æ —Ç–∞–∫, —Ç–æ:


A_t = COUNT(*) –ø–æ call_scores –∑–∞ –¥–µ–Ω—å t
–ï—Å–ª–∏ –¥–æ–ø—É—Å–∫–∞—é—Ç—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–∫–æ—Ä–∏–Ω–≥–æ–≤ –Ω–∞ –æ–¥–∏–Ω –∑–≤–æ–Ω–æ–∫, —Ç–æ–≥–¥–∞:
A_t = COUNT(DISTINCT history_id) –∑–∞ –¥–µ–Ω—å t
SQL:
SELECT
  DATE(call_date) AS d,
  COUNT(DISTINCT history_id) AS A_t
FROM call_scores
GROUP BY DATE(call_date);
2.2. –õ–∏–¥—ã
L_t = Œ£ I_lead_any(i) –ø–æ –≤—Å–µ–º —Å—Ç—Ä–æ–∫–∞–º –¥–Ω—è t
SQL:
SELECT
  DATE(call_date) AS d,
  SUM(
    CASE
      WHEN is_target = 1 AND number_category IN (1, 2, 6)
      THEN 1 ELSE 0
    END
  ) AS L_t
FROM call_scores
GROUP BY DATE(call_date);
2.3. –õ–∏–¥—ã —Å –∑–∞–ø–∏—Å—å—é, –±–µ–∑ –∑–∞–ø–∏—Å–∏, –æ—Ç–º–µ–Ω—ë–Ω–Ω—ã–µ
L_with_record_t   = Œ£ I_lead_with_record(i)
L_no_record_t     = Œ£ I_lead_no_record(i)
L_canceled_t      = Œ£ I_lead_canceled(i)
Refusal_lead_t    = Œ£ I_refusal_lead(i)
SQL-—Å–∫–µ–ª–µ—Ç:
SELECT
  DATE(call_date) AS d,
  SUM(
    CASE
      WHEN is_target = 1 AND number_category = 1
      THEN 1 ELSE 0
    END
  ) AS L_with_record_t,
  SUM(
    CASE
      WHEN is_target = 1 AND number_category = 2
      THEN 1 ELSE 0
    END
  ) AS L_no_record_t,
  SUM(
    CASE
      WHEN is_target = 1 AND number_category = 6
      THEN 1 ELSE 0
    END
  ) AS L_canceled_t,
  SUM(
    CASE
      WHEN is_target = 1
       AND number_category = 2
       AND outcome = 'lead_no_record'
       AND refusal_reason IS NOT NULL
      THEN 1 ELSE 0
    END
  ) AS Refusal_lead_t
FROM call_scores
GROUP BY DATE(call_date);
–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å:
–æ–∂–∏–¥–∞–µ–º–æ (—Å —É—á—ë—Ç–æ–º –∑–∞–¥–µ—Ä–∂–µ–∫/–æ—à–∏–±–æ–∫) –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
L_t ‚âà L_with_record_t + L_no_record_t + L_canceled_t
2.4. –ó–∞–ø–∏—Å–∏ (R_t)
–ó–∞–ø–∏—Å–∏ = –ª–∏–¥—ã, –¥–æ—à–µ–¥—à–∏–µ –¥–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–ø–∏—Å–∏:
R_t = L_with_record_t
    = Œ£ I_lead_with_record(i)
–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –≤–≤–µ—Å—Ç–∏:
R_t_outcome = Œ£ I_outcome_record(i)
–∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–≤–µ—Ä—è—Ç—å, –Ω–æ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ number_category = 1 –∏ is_target = 1.
2.5. –û—Ç–º–µ–Ω—ã –∑–∞–ø–∏—Å–µ–π –∏ –æ—Ç–∫–∞–∑—ã –ª–∏–¥–æ–≤
–û—Ç–º–µ–Ω—ã –∑–∞–ø–∏—Å–µ–π:


Cancel_record_t = L_canceled_t
                = Œ£ I_cancel_record(i)
–û—Ç–∫–∞–∑—ã –ø–æ –ª–∏–¥–∞–º:


Refusal_lead_t = Œ£ I_refusal_lead(i)
–≠—Ç–æ –¥–≤–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è.
2.6. –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∏ —Å—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –ø–æ –ø—Ä–∏–Ω—è—Ç—ã–º/–æ—Ü–µ–Ω—ë–Ω–Ω—ã–º –∑–≤–æ–Ω–∫–∞–º:


S_t = AVG(call_score) –ø–æ —Å—Ç—Ä–æ–∫–∞–º –¥–Ω—è t, –≥–¥–µ call_score IS NOT NULL
n_score_t = COUNT(call_score) –≤ —ç—Ç–æ—Ç –¥–µ–Ω—å
SQL:
SELECT
  DATE(call_date) AS d,
  ROUND(AVG(call_score), 2) AS S_t,
  COUNT(call_score) AS n_score_t
FROM call_scores
WHERE call_score IS NOT NULL
GROUP BY DATE(call_date);
–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–ø–æ –≤—Å–µ–º –ø—Ä–∏–Ω—è—Ç—ã–º):


avg_talk_t = AVG(talk_duration) –ø–æ –¥–Ω—é t
–ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ –ø–æ —Ü–µ–ª–µ–≤—ã–º:
avg_talk_target_t = AVG(talk_duration WHERE is_target = 1)

3. –î–Ω–µ–≤–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –ø–æ 
call_history
 (–≤–µ—Å—å –ø–æ—Ç–æ–∫ + –ø—Ä–æ–ø—É—Å–∫–∏)
–ò–∑ call_scores –≤–∏–¥–Ω—ã —Ç–æ–ª—å–∫–æ –ø—Ä–∏–Ω—è—Ç—ã–µ/–æ—Ü–µ–Ω—ë–Ω–Ω—ã–µ.
–û–±—â–∏–π –ø–æ—Ç–æ–∫ –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ —Å—á–∏—Ç–∞–µ–º –ø–æ call_history.
–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–µ –ø–æ–ª—è call_history:
history_id


called_info


context_start_time ‚Äì –¥–∞—Ç–∞/–≤—Ä–µ–º—è –∑–≤–æ–Ω–∫–∞


talk_duration


call_type ‚Äì ‚Äò–≤—Ö–æ–¥—è—â–∏–π‚Äô / ‚Äò–∏—Å—Ö–æ–¥—è—â–∏–π‚Äô


call_success ‚Äì ‚Äò–ø—Ä–∏–Ω—è—Ç—ã–π‚Äô, ‚Äò–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π‚Äô, –≤–æ–∑–º–æ–∂–Ω–æ –¥—Ä—É–≥–∏–µ —Å—Ç–∞—Ç—É—Å—ã.


–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è –¥–Ω—è t:
T_t            ‚Äì –≤—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤ (–≤—Ö–æ–¥—è—â–∏–µ + –∏—Å—Ö–æ–¥—è—â–∏–µ)
Incoming_t     ‚Äì –≤—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏
Outgoing_t     ‚Äì –∏—Å—Ö–æ–¥—è—â–∏–µ –∑–≤–æ–Ω–∫–∏
Answered_in_t  ‚Äì –ø—Ä–∏–Ω—è—Ç—ã–µ –≤—Ö–æ–¥—è—â–∏–µ
Missed_in_t    ‚Äì –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –≤—Ö–æ–¥—è—â–∏–µ
3.1. –í—Å–µ–≥–æ –∑–≤–æ–Ω–∫–æ–≤ –∏ —Ä–∞–∑—Ä–µ–∑ –≤—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ
SELECT
  DATE(context_start_time) AS d,
  COUNT(*) AS T_t,
  SUM(CASE WHEN call_type = '–≤—Ö–æ–¥—è—â–∏–π' THEN 1 ELSE 0 END) AS Incoming_t,
  SUM(CASE WHEN call_type = '–∏—Å—Ö–æ–¥—è—â–∏–π' THEN 1 ELSE 0 END) AS Outgoing_t
FROM call_history
GROUP BY DATE(context_start_time);
3.2. –ü—Ä–∏–Ω—è—Ç—ã–µ –∏ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –≤—Ö–æ–¥—è—â–∏–µ
SELECT
  DATE(context_start_time) AS d,
  SUM(
    CASE
      WHEN call_type = '–≤—Ö–æ–¥—è—â–∏–π'
       AND call_success = '–ø—Ä–∏–Ω—è—Ç—ã–π'
      THEN 1 ELSE 0
    END
  ) AS Answered_in_t,
  SUM(
    CASE
      WHEN call_type = '–≤—Ö–æ–¥—è—â–∏–π'
       AND call_success <> '–ø—Ä–∏–Ω—è—Ç—ã–π'
      THEN 1 ELSE 0
    END
  ) AS Missed_in_t
FROM call_history
GROUP BY DATE(context_start_time);
–ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å call_success –Ω–µ –≤—Å–µ–≥–¥–∞ –Ω–∞–¥—ë–∂–µ–Ω, –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Ç–æ—á–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ talk_duration:
–ü—Ä–∏–Ω—è—Ç—ã–π –≤—Ö–æ–¥—è—â–∏–π: call_type='–≤—Ö–æ–¥—è—â–∏–π' AND talk_duration > 0
–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π:       call_type='–≤—Ö–æ–¥—è—â–∏–π' AND talk_duration = 0

4. KPI –Ω–∞ –±–∞–∑–µ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤
–ò—Å–ø–æ–ª—å–∑—É–µ–º:
–∏–∑ call_history:

 Incoming_t, Outgoing_t, Answered_in_t, Missed_in_t, T_t;


–∏–∑ call_scores:

 A_t, L_t, L_with_record_t (‚Üí R_t), L_no_record_t, L_canceled_t, Refusal_lead_t, S_t.


4.1. –î–æ–ª—è –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –≤—Ö–æ–¥—è—â–∏—Ö
missed_rate_in_t = Missed_in_t / Incoming_t
–ü—Ä–∏ –º–∞–ª–æ–º Incoming_t —ç—Ç–æ—Ç –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —à—É–º–Ω—ã–π, –Ω–æ —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π KPI –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ –¥–æ–∑–≤–æ–Ω–∞.
4.2. –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤—Ö–æ–¥—è—â–∏–π –∑–≤–æ–Ω–æ–∫ ‚Üí –ª–∏–¥ (–ø–æ —Ü–µ–ª–µ–≤—ã–º)
–ù—É–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å, —á—Ç–æ —Å—á–∏—Ç–∞—Ç—å —Ü–µ–ª–µ–≤—ã–º –≤—Ö–æ–¥—è—â–∏–º –∫–æ–Ω—Ç–∞–∫—Ç–æ–º:
–≤–∞—Ä–∏–∞–Ω—Ç –ø—Ä–æ—Å—Ç–æ–π: –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ;


–≤–∞—Ä–∏–∞–Ω—Ç –∞–∫–∫—É—Ä–∞—Ç–Ω—ã–π: –≤—Ö–æ–¥—è—â–∏–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –Ω–æ–º–µ—Ä–∞ (–∏—Å–∫–ª—é—á–∞—è —Ç–µ—Ö/–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ).


–û–±–æ–∑–Ω–∞—á–∏–º:
Incoming_target_t ‚Äì –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥—è—â–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ª–∏–¥–∞–º
–¢–æ–≥–¥–∞:
conv_incoming_lead_t = L_t / Incoming_target_t
SQL-–ø—Ä–∏–º–µ—Ä (–µ—Å–ª–∏ —Å—á–∏—Ç–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –∫–∞–∫ target):
conv_incoming_lead_t = L_t / Incoming_t
–õ—É—á—à–µ –≤–≤–µ—Å—Ç–∏ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–∏–∑–Ω–∞–∫/—Å–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—å Incoming_target_t –∏–º–µ–Ω–Ω–æ –∏–º–∏.
4.3. –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ª–∏–¥ ‚Üí –∑–∞–ø–∏—Å—å
–ì–ª–∞–≤–Ω–∞—è –≤–æ—Ä–æ–Ω–∫–∞:
p_t = conv_lead_record_t = R_t / L_t

–≥–¥–µ R_t = L_with_record_t
–ï—Å–ª–∏ L_t –º–∞–ª–µ–Ω—å–∫–æ–µ, –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ p_t, –Ω–æ –∏ –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
4.4. –î–æ–ª—è –ª–∏–¥–æ–≤ –±–µ–∑ –∑–∞–ø–∏—Å–∏ –∏ –¥–æ–ª—è –æ—Ç–º–µ–Ω
–î–æ–ª—è –ª–∏–¥–æ–≤, –Ω–µ –¥–æ—à–µ–¥—à–∏—Ö –¥–æ –∑–∞–ø–∏—Å–∏ (–Ω–∞ —Ç–µ–∫—É—â–µ–º —à–∞–≥–µ):


share_lead_nobook_t = L_no_record_t / L_t
–î–æ–ª—è –ª–∏–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—à–ª–∏ –¥–æ –∑–∞–ø–∏—Å–∏, –Ω–æ –ø–æ—Ç–æ–º –æ—Ç–º–µ–Ω–∏–ª–∏:


cancel_rate_lead_t = L_canceled_t / L_t
–û—Ç–¥–µ–ª—å–Ω–æ –¥–æ–ª—è –æ—Ç–º–µ–Ω —Å—Ä–µ–¥–∏ –∑–∞–ø–∏—Å–µ–π:


cancel_rate_record_t = L_canceled_t / (L_with_record_t + L_canceled_t)
–≠—Ç–æ –±–æ–ª–µ–µ —á–µ—Å—Ç–Ω–æ–µ:
¬´–∏–∑ –≤—Å–µ—Ö –ª–∏–¥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—à–ª–∏ –¥–æ —Å—Ç–∞—Ç—É—Å–∞ –∑–∞–ø–∏—Å–∞–Ω / –æ—Ç–º–µ–Ω—ë–Ω, –∫–∞–∫–æ–π –ø—Ä–æ—Ü–µ–Ω—Ç –∑–∞–∫–æ–Ω—á–∏–ª—Å—è –æ—Ç–º–µ–Ω–æ–π¬ª.
4.5. –î–æ–ª—è –æ—Ç–∫–∞–∑–æ–≤ –ø–æ –ª–∏–¥–∞–º
refusal_rate_lead_t = Refusal_lead_t / L_t
–ú–æ–∂–Ω–æ –æ—Ç–¥–µ–ª—å–Ω–æ —Å—á–∏—Ç–∞—Ç—å:
refusal_rate_lead_no_record_t = Refusal_lead_t / L_no_record_t
—á—Ç–æ–±—ã –≤–∏–¥–µ—Ç—å, –∫–∞–∫ —á–∞—Å—Ç–æ –∏–º–µ–Ω–Ω–æ –≤ –≥—Ä—É–ø–ø–µ ¬´–ª–∏–¥ –±–µ–∑ –∑–∞–ø–∏—Å–∏¬ª —Ñ–∏–∫—Å–∏—Ä—É—é—Ç –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–∞–∑–∞.
4.6. –°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–°—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞:


S_t = AVG(call_score)
–°—Ä–µ–¥–Ω—è—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤ (–ø–æ —Ü–µ–ª–µ–≤—ã–º):


avg_talk_target_t = AVG(talk_duration WHERE is_target = 1)
–≠—Ç–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –º–æ–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å–≤—è–∑–∫–µ —Å –∫–æ–Ω–≤–µ—Ä—Å–∏–µ–π (—Å–ª–∏—à–∫–æ–º –∫–æ—Ä–æ—Ç–∫–æ–µ/—Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω–æ–µ –æ–±—â–µ–Ω–∏–µ –ø—Ä–∏ –ø–ª–æ—Ö–æ–π –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ ‚Äî –ø–æ–≤–æ–¥ –∫–æ–ø–∞—Ç—å).

5. –ü—Ä–æ—Å—Ç–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ (–±–µ–∑ —Ç—è–∂—ë–ª–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏)
–î–ª—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –¥–∞—à–±–æ—Ä–¥–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ:
—Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å –≤—á–µ—Ä–∞,


—Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Å —Ç–µ–º –∂–µ –¥–Ω—ë–º –Ω–µ–¥–µ–ª–∏ –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–∏.


–û–±–æ–∑–Ω–∞—á–µ–Ω–∏—è:
—Ç–µ–∫—É—â–∏–π –¥–µ–Ω—å: t,


–≤—á–µ—Ä–∞: t-1,


—Ç–æ—Ç –∂–µ –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –Ω–µ–¥–µ–ª–∏ –Ω–∞–∑–∞–¥: t-7.


5.1. –î–∏–Ω–∞–º–∏–∫–∞ –æ–±—ä—ë–º–∞ –∑–≤–æ–Ω–∫–æ–≤ –∏ –ª–∏–¥–æ–≤
ŒîT_abs_t       = T_t - T_{t-1}
ŒîT_pct_t       = (T_t - T_{t-1}) / T_{t-1} * 100

ŒîL_abs_t       = L_t - L_{t-1}
ŒîL_pct_t       = (L_t - L_{t-1}) / L_{t-1} * 100

ŒîR_abs_t       = R_t - R_{t-1}
ŒîR_pct_t       = (R_t - R_{t-1}) / R_{t-1} * 100
5.2. –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–µ–π
ŒîT_wd_abs_t    = T_t - T_{t-7}
ŒîT_wd_pct_t    = (T_t - T_{t-7}) / T_{t-7} * 100

ŒîL_wd_abs_t    = L_t - L_{t-7}
ŒîL_wd_pct_t    = (L_t - L_{t-7}) / L_{t-7} * 100
5.3. –î–∏–Ω–∞–º–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ –æ—Ü–µ–Ω–∫–∏
p_t      = R_t / L_t
p_prev   = R_{t-1} / L_{t-1}

Œîp_abs_t = p_t - p_prev
Œîp_pct_t = (p_t - p_prev) / p_prev * 100

ŒîS_t     = S_t - S_{t-1}
–≠—Ç–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–∏–Ω–∞–º–∏–∫–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã:
–≤–∏–¥–µ—Ç—å —Ç—Ä–µ–Ω–¥—ã,


–ø–æ–¥–Ω–∏–º–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã ¬´—á—Ç–æ —Å–ª—É—á–∏–ª–æ—Å—å —Å–µ–≥–æ–¥–Ω—è/–≤—á–µ—Ä–∞¬ª –±–µ–∑ —Å–ª–æ–∂–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.



6. –°–∫–æ–ª—å–∑—è—â–µ–µ —Å—Ä–µ–¥–Ω–µ–µ (—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —à—É–º–æ–≤)
–î–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –¥–Ω–µ–≤–Ω—ã—Ö —à—É–º–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ –≤—ã—Ö–æ–¥–Ω—ã–º/–ø—Ä–∞–∑–¥–Ω–∏–∫–∞–º) –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ 7-–¥–Ω–µ–≤–Ω–æ–≥–æ —Å–∫–æ–ª—å–∑—è—â–µ–≥–æ —Å—Ä–µ–¥–Ω–µ–≥–æ.
–î–ª—è –ª—é–±–æ–≥–æ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è Y_t (–Ω–∞–ø—Ä–∏–º–µ—Ä, T_t, L_t, R_t, S_t):
MA7_Y_t = (1/7) * Œ£_{i=0..6} Y_{t-i}
–í —è–≤–Ω–æ–º –≤–∏–¥–µ:
MA7_calls_t   = (1/7) * Œ£_{i=0..6} T_{t-i}
MA7_leads_t   = (1/7) * Œ£_{i=0..6} L_{t-i}
MA7_records_t = (1/7) * Œ£_{i=0..6} R_{t-i}
MA7_score_t   = (1/7) * Œ£_{i=0..6} S_{t-i}
–≠—Ç–æ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –ª–∏–±–æ –≤ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–π –≤–∏—Ç—Ä–∏–Ω–µ, –ª–∏–±–æ —Å—á–∏—Ç–∞—Ç—å –Ω–∞ –ª–µ—Ç—É –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤.

–ß—Ç–æ –≤ –∏—Ç–æ–≥–µ —Ç—ã –ø–æ–ª—É—á–∞–µ—à—å
–ß—ë—Ç–∫–∏–π row-level —Å–ª–æ–π:


–æ–¥–∏–Ω —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π (number_category ‚Üí business_class);


–æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ª–∏–¥–∞, –∑–∞–ø–∏—Å–∏, –æ—Ç–º–µ–Ω—ã, –æ—Ç–∫–∞–∑–∞;


–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ –Ω–∞ —Å—Ç—Ä–æ–∫–µ (I_lead_any, I_lead_with_record, I_lead_no_record, I_lead_canceled, I_cancel_record, I_refusal_lead, I_target).


–î–Ω–µ–≤–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω—ã –≤ 99% –æ—Ç—á—ë—Ç–æ–≤:


–≤—Ö–æ–¥—è—â–∏–µ/–∏—Å—Ö–æ–¥—è—â–∏–µ/–ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ (–∏–∑ call_history);


–ª–∏–¥—ã, –∑–∞–ø–∏—Å–∏, –æ—Ç–º–µ–Ω—ã, –æ—Ç–∫–∞–∑—ã (–∏–∑ call_scores);


—Å—Ä–µ–¥–Ω—è—è –æ—Ü–µ–Ω–∫–∞, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å.


KPI-—Å–ª–æ–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π:


missed_rate_in_t;


conv_incoming_lead_t;


conv_lead_record_t;


share_lead_nobook_t;


cancel_rate_record_t –∏ cancel_rate_lead_t;


refusal_rate_lead_t;


S_t, avg_talk_target_t.


–õ—ë–≥–∫–∞—è –¥–∏–Ω–∞–º–∏–∫–∞ –∏ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ, –±–µ–∑ —Ç—è–∂—ë–ª–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏:


—Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å –≤—á–µ—Ä–∞/–ø—Ä–æ—à–ª–æ–π –Ω–µ–¥–µ–ª–µ–π;


7-–¥–Ω–µ–≤–Ω—ã–µ MA.


–ù–∞ —ç—Ç–æ —É–∂–µ –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –≤–µ—à–∞—Ç—å:
–µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ—Ç—á—ë—Ç—ã –≤ –±–æ—Ç–µ;


–¥–∞—à–±–æ—Ä–¥—ã –ø–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞–º/–∫–∞–Ω–∞–ª–∞–º/—É—Å–ª—É–≥–∞–º/–≤—Ä–∞—á–∞–º;


—Ç—Ä–∏–≥–≥–µ—Ä—ã ¬´–∫—Ä–∞—Å–Ω–æ–π –∑–æ–Ω—ã¬ª –ø–æ –ø—Ä–æ–ø—É—Å–∫–∞–º, –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –∏ –æ—Ü–µ–Ω–∫–µ.



