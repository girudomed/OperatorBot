–†–µ—à–µ–Ω–∏–µ –ø–æ —Ç–≤–æ–∏–º –æ—Ç–≤–µ—Ç–∞–º



‚∏ª

2) Callback-data: –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã

–ü—Ä–∞–≤–∏–ª–æ:
	‚Ä¢	–í –ø—Ä–æ–¥–µ –æ—Å—Ç–∞—ë—Ç—Å—è –æ–¥–∏–Ω —Ñ–æ—Ä–º–∞—Ç: –Ω–∞–ø—Ä–∏–º–µ—Ä adm:* / rep:* / cl:* / sys:*
	‚Ä¢	admin:* ‚Äî —Ç–æ–ª—å–∫–æ –∫–∞–∫ –ø–µ—Ä–µ—Ö–æ–¥–Ω—ã–π —Å–ª–æ–π –Ω–∞ 1‚Äì2 —Ä–µ–ª–∏–∑–∞, –∑–∞—Ç–µ–º —É–¥–∞–ª–∏—Ç—å.

–ü—Ä–∞–∫—Ç–∏–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–µ–∑ –±–æ–ª–∏:
	‚Ä¢	–°–¥–µ–ª–∞–π LegacyCallbackAdapter (–æ–¥–∏–Ω —Ö–µ–Ω–¥–ª–µ—Ä), –∫–æ—Ç–æ—Ä—ã–π:
	‚Ä¢	–ª–æ–≤–∏—Ç ^admin:
	‚Ä¢	–ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ adm:*
	‚Ä¢	–≤—ã–∑—ã–≤–∞–µ—Ç —Ç–æ—Ç –∂–µ –∫–æ–¥, —á—Ç–æ –∏ –Ω–æ–≤—ã–π –ø—É—Ç—å
	‚Ä¢	–î–∞–ª—å—à–µ ‚Äúadmin:*‚Äù –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤—ã—á–∏—â–∞–µ—Ç—Å—è.

‚∏ª

3) Reply-–∫–Ω–æ–ø–∫–∏: —É–±–∏—Ä–∞–µ–º ‚Äú–º–æ–ª—á–∞–Ω–∏–µ‚Äù –Ω–∞–≤—Å–µ–≥–¥–∞

–ü—Ä–∞–≤–∏–ª–æ –¥–ª—è ReplyKeyboard:
	‚Ä¢	–ö–∞–∂–¥–∞—è reply-–∫–Ω–æ–ø–∫–∞ –¥–æ–ª–∂–Ω–∞ –ª–æ–≤–∏—Ç—å—Å—è —É–∑–∫–∏–º filters.Regex(r"^üìä –û—Ç—á—ë—Ç—ã$"), –∞ –Ω–µ ‚Äú–ø–æ —Å–º—ã—Å–ª—É‚Äù.
	‚Ä¢	–õ—é–±–æ–π –æ–±—â–∏–π filters.TEXT & ~filters.COMMAND:
	‚Ä¢	—Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ
	‚Ä¢	–∏ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–∫—Ç–∏–≤–µ–Ω —Ä–µ–∂–∏–º (–ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ)

–ü—Ä–∏–º–µ—Ä –≥–µ–π—Ç–∞ (—è–¥—Ä–æ ‚Äú–Ω–µ –ª–æ–º–∞—Ç—å —Å–æ—Å–µ–¥–Ω–µ–µ‚Äù):

# group=10 (–ø–æ—á—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π)
async def text_router(update, context):
    mode = context.user_data.get("mode")
    if mode != "call_lookup":
        return  # –Ω–µ —Ç–≤–æ–π –∞–ø–¥–µ–π—Ç ‚Äî —É–π–¥–∏ –º–æ–ª—á–∞
    await call_lookup_flow.handle_text(update, context)

–ü–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º ‚Äî —Ç–æ–ª—å–∫–æ —è–≤–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π:
	‚Ä¢	–Ω–∞–∂–∞–ª ‚Äú–ü–æ–∏—Å–∫ –∑–≤–æ–Ω–∫–∞‚Äù ‚Üí context.user_data["mode"]="call_lookup"
	‚Ä¢	–≤—ã—à–µ–ª/–Ω–∞–∑–∞–¥ ‚Üí mode=None + —á–∏—Å—Ç–∫–∞ –∫–ª—é—á–µ–π —Ñ–∏—á–∏

‚∏ª

4) –°–æ—Å—Ç–æ—è–Ω–∏–µ: namespacing –∏ reset –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–°–µ–π—á–∞—Å —É —Ç–µ–±—è –ø—Ä–æ–±–ª–µ–º–∞: ‚Äú—Ä–µ–∂–∏–º –≤–∏—Å–∏—Ç –∏ —Ç–µ–∫—Å—Ç —É—Ö–æ–¥–∏—Ç –Ω–µ —Ç—É–¥–∞‚Äù.

–ü—Ä–∞–≤–∏–ª–æ:
	‚Ä¢	–≤—Å–µ –∫–ª—é—á–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç–æ–ª—å–∫–æ —Å namespace:
	‚Ä¢	context.user_data["call_lookup:pending"]
	‚Ä¢	context.user_data["reports:args"]
	‚Ä¢	context.user_data["dev:replying_to"]

–ò –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è:
	‚Ä¢	reset_feature_state(context, feature="call_lookup")

–ü—Ä–∏ –ª—é–±–æ–º ‚Äú–ù–∞–∑–∞–¥/–í –º–µ–Ω—é‚Äù –¥–µ–ª–∞–π:
	‚Ä¢	reset —Ç–µ–∫—É—â–µ–π —Ñ–∏—á–∏
	‚Ä¢	mode=None

‚∏ª

–ö–∞–∫ —ç—Ç–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∏–º–µ–Ω–Ω–æ –∫ —Ç–≤–æ–µ–π –∞–¥–º–∏–Ω–∫–µ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ)

–ß—Ç–æ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ ‚Äú—è–¥—Ä–æ‚Äù –∞–¥–º–∏–Ω–∫–∏
	‚Ä¢	admin_panel = –≤—Ö–æ–¥ + –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é + —Ä–æ—É—Ç–∏–Ω–≥ –ø–æ adm:*
	‚Ä¢	admin_users = –æ—Ç–¥–µ–ª—å–Ω–∞—è —Ñ–∏—á–∞ –≤–Ω—É—Ç—Ä–∏ admin (–Ω–æ –≤ –æ–¥–Ω–æ–º –Ω–µ–π–º—Å–ø–µ–π—Å–µ adm:usr:*)
	‚Ä¢	admin_commands, admin_lm, admin_stats ‚Äî —Ç–æ–∂–µ adm:*, –Ω–æ —Ä–∞–∑–Ω—ã–º–∏ –ø–æ–¥–ø—Ä–µ—Ñ–∏–∫—Å–∞–º–∏

–ß–µ–≥–æ –±–æ–ª—å—à–µ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å
	‚Ä¢	–î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è –ø–æ UI (UI drift).
	‚Ä¢	CallbackQueryHandler —Å pattern, –∫–æ—Ç–æ—Ä—ã–π –ª–æ–≤–∏—Ç ‚Äú–≤—Å—ë –∞–¥–º–∏–Ω—Å–∫–æ–µ —Å—Ä–∞–∑—É‚Äù –∏ –≤–Ω—É—Ç—Ä–∏ –ø–æ—Ç–æ–º –∫—É—á–∞ if/elif –±–µ–∑ —Å—Ç—Ä–æ–≥–æ–π –∫–∞—Ä—Ç—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤.
	‚Ä¢	–†—É—á–Ω–æ–π split(":") –≤–ø–µ—Ä–µ–º–µ—à–∫—É —Å –∫–æ–¥–µ–∫–æ–º.

‚∏ª

–ü–æ—Ä—è–¥–æ–∫ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ (—á—Ç–æ–±—ã –Ω–µ —Ä–∞–∑–Ω–µ—Å—Ç–∏ –≤—Å—ë)
	1.	–ó–∞–º–æ—Ä–æ–∑–∏—Ç—å UI: –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –≤–∏–¥ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –∞–¥–º–∏–Ω–∫–∏ (—Å–µ—Ç–∫–∞/—Å–ø–∏—Å–æ–∫) –∏ –æ–¥–∏–Ω –Ω–∞–±–æ—Ä –∫–Ω–æ–ø–æ–∫.
	2.	–ù–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞—Ç—å callback: –Ω–æ–≤—ã–π –∫–æ–¥–µ–∫ –≤–µ–∑–¥–µ, —Å—Ç–∞—Ä—ã–π ‚Äî —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä.
	3.	–£–±—Ä–∞—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã TEXT: –æ–¥–∏–Ω ‚Äú–ª–æ–≤–µ—Ü —Ç–µ–∫—Å—Ç–∞‚Äù –≤ –∫–æ–Ω—Ü–µ + —Ä–µ–∂–∏–º—ã + reset.
	4.	–¢–æ–ª—å–∫–æ –ø–æ—Ç–æ–º —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—Ç—å –ø–æ –ø–∞–ø–∫–∞–º features/*.

‚∏ª

–ò—Ç–æ–≥ –ø–æ —Ç–≤–æ–µ–º—É –≤–æ–ø—Ä–æ—Å—É ‚Äú—Ä–∞–∑–Ω–æ—Å–∏—Ç—å –∏–ª–∏ –Ω–µ—Ç‚Äù
	‚Ä¢	–†–∞–∑–Ω–æ—Å–∏—Ç—å ‚Äî –¥–∞.
	‚Ä¢	–ï–¥–∏–Ω–∏—Ü–∞ –¥–µ–∫–æ–º–ø–æ–∑–∏—Ü–∏–∏ ‚Äî —Ñ–∏—á–∞, –Ω–µ —ç–∫—Ä–∞–Ω.
	‚Ä¢	–ï—Å–ª–∏ —Å–¥–µ–ª–∞—Ç—å ‚Äú—ç–∫—Ä–∞–Ω=—Ñ–∞–π–ª‚Äù –±–µ–∑ –∫–æ–¥–µ–∫–∞/—Ä–µ–∂–∏–º–æ–≤/–ø–æ—Ä—è–¥–∫–∞ —Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ ‚Äî –±—É–¥–µ—Ç —Ö—É–∂–µ, —á–µ–º —Å–µ–π—á–∞—Å.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π: –ø—Ä–∏—à–ª–∏ –∫—É—Å–æ–∫ app/main.py –≥–¥–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è handlers (—Å group –∏ –ø–æ—Ä—è–¥–∫–æ–º) ‚Äî —è —Ä–∞–∑–ª–æ–∂—É —Ç–µ–±–µ —Ç–æ—á–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –≥—Ä—É–ø–ø –∏ —Å–∫–∞–∂—É, –∫–∞–∫–∏–µ 2‚Äì3 —Ö–µ–Ω–¥–ª–µ—Ä–∞ —Å–µ–π—á–∞—Å –≤–µ—Ä–æ—è—Ç–Ω–µ–µ –≤—Å–µ–≥–æ ‚Äú–∂—Ä—É—Ç‚Äù —Å–µ—Ä—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É.






–ß—Ç–æ –¥–∞–ª—å—à–µ —Å–¥–µ–ª–∞—Ç—å
–î–∞, —ç—Ç–æ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å ‚Äî –Ω–æ –Ω–µ ‚Äú–≤—Å—ë —Å—Ä–∞–∑—É‚Äù, –∞ –ø–æ—ç—Ç–∞–ø–Ω–æ. –¢–≤–æ–∏ —Ç–µ–∫—É—â–∏–µ —Å–∏–º–ø—Ç–æ–º—ã (‚Äú–∫–Ω–æ–ø–∫–∏ –º–æ–ª—á–∞—Ç‚Äù, ‚Äú—á–∏–Ω—é –æ–¥–Ω–æ ‚Äî –ª–æ–º–∞—é –¥—Ä—É–≥–æ–µ‚Äù) —Ç–∏–ø–∏—á–Ω–æ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –∏–∑-–∑–∞ —Å–º–µ—à–∞–Ω–Ω—ã—Ö callback-–ø—Ä–µ—Ñ–∏–∫—Å–æ–≤ + —Ä—É—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ + –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–∏—Ö TEXT-—Ö–µ–Ω–¥–ª–µ—Ä–æ–≤ + –∑–∞–ª–∏–ø–∞—é—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ü–ª–∞–Ω –∫–∞–∫ —Ä–∞–∑ –±—å—ë—Ç –ø–æ –∫–æ—Ä–Ω—é –ø—Ä–æ–±–ª–µ–º—ã.

–ù–∏–∂–µ ‚Äî –∫–æ–≥–¥–∞ –¥–µ–ª–∞—Ç—å, –∫–æ–≥–¥–∞ –Ω–µ –¥–µ–ª–∞—Ç—å, –∏ –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –Ω–µ –≤–∑–æ—Ä–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç.

‚∏ª

–î–µ–ª–∞—Ç—å –∏–ª–∏ –Ω–µ—Ç

–î–µ–ª–∞—Ç—å ‚Äî –µ—Å–ª–∏ —Ç–≤–æ—è —Ü–µ–ª—å
	‚Ä¢	–ø–µ—Ä–µ—Å—Ç–∞—Ç—å –ª–æ–º–∞—Ç—å —Å–æ—Å–µ–¥–Ω–∏–µ —Ä–∞–∑–¥–µ–ª—ã;
	‚Ä¢	—Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏—é –∏ –∫–Ω–æ–ø–∫–∏;
	‚Ä¢	–¥–∞–ª—å—à–µ —Ä–∞–∑–≤–∏–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –±–µ–∑ ‚Äú—Ä–∞–Ω–¥–æ–º–Ω—ã—Ö‚Äù —Ä–µ–≥—Ä–µ—Å—Å–∏–π.

–≠—Ç–æ —Ç–≤–æ–π –∫–µ–π—Å ‚Üí –¥–µ–ª–∞—Ç—å.

–ù–µ –¥–µ–ª–∞—Ç—å (–∏–ª–∏ –æ—Ç–ª–æ–∂–∏—Ç—å) ‚Äî –µ—Å–ª–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å
	‚Ä¢	–µ—Å—Ç—å –¥–µ–¥–ª–∞–π–Ω ‚Äú—Å–µ–≥–æ–¥–Ω—è/–∑–∞–≤—Ç—Ä–∞‚Äù –∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ —Ö–æ—Ç—Ñ–∏–∫—Å;
	‚Ä¢	–ø—Ä–æ–µ–∫—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –∏ –Ω–µ —Ä–∞—Å—Ç—ë—Ç (–Ω–µ —Ç–≤–æ–π —Å–ª—É—á–∞–π).

‚∏ª

–ì–ª–∞–≤–Ω–∞—è –æ–≥–æ–≤–æ—Ä–∫–∞

–¢–≤–æ–π —Å–ø–∏—Å–æ–∫ –≤–µ—Ä–Ω—ã–π, –Ω–æ –æ–ø–∞—Å–Ω–æ –¥–µ–ª–∞—Ç—å ‚Äúbig-bang migration‚Äù. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: –≤–≤–æ–¥–∏—à—å –Ω–æ–≤—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª + –∞–¥–∞–ø—Ç–µ—Ä –ª–µ–≥–∞—Å–∏, –∑–∞—Ç–µ–º –º–∏–≥—Ä–∏—Ä—É–µ—à—å —Ñ–∏—á–∏ –ø–æ –æ–¥–Ω–æ–π –∏ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –≤—ã—á–∏—â–∞–µ—à—å —Å—Ç–∞—Ä–æ–µ.

‚∏ª

–ö–∞–∫ –¥–µ–ª–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ (–ø–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç)

–®–∞–≥ 1. –ï–¥–∏–Ω—ã–π UI-–ø—Ä–æ—Ç–æ–∫–æ–ª: –¥–∞, –Ω–æ —Å –∞–¥–∞–ø—Ç–µ—Ä–æ–º

–¶–µ–ª—å: –≤—Å—ë –Ω–æ–≤–æ–µ –∂–∏–≤—ë—Ç –Ω–∞ AdminCB, —Å—Ç–∞—Ä–æ–µ –Ω–µ –ª–æ–º–∞–µ–º.
	‚Ä¢	–û—Å—Ç–∞–≤—å –ª–µ–≥–∞—Å–∏ admin:* / admincmd:* –≤—Ä–µ–º–µ–Ω–Ω–æ.
	‚Ä¢	–î–æ–±–∞–≤—å ‚Äú–∞–¥–∞–ø—Ç–µ—Ä‚Äù (–æ–¥–∏–Ω –æ–±—Ä–∞–±–æ—Ç—á–∏–∫), –∫–æ—Ç–æ—Ä—ã–π:
	‚Ä¢	–ª–æ–≤–∏—Ç ^admin: –∏ ^admincmd:
	‚Ä¢	–ø–µ—Ä–µ–≤–æ–¥–∏—Ç –≤ –Ω–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç adm:* (–∏–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ç—É –∂–µ —Ñ—É–Ω–∫—Ü–∏—é, —á—Ç–æ –Ω–æ–≤—ã–π –ø—É—Ç—å)
	‚Ä¢	–ª–æ–≥–∏—Ä—É–µ—Ç, —á—Ç–æ –ø—Ä–∏—à–ª–æ –ª–µ–≥–∞—Å–∏

–ü–æ–∫–∞ –∞–¥–∞–ø—Ç–µ—Ä –µ—Å—Ç—å ‚Äî –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –º–æ–¥—É–ª—å–Ω–æ.

–®–∞–≥ 2. –ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

–¶–µ–ª—å: –ª—é–±–æ–π –≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏–º —Å—Ü–µ–Ω–∞—Ä–∏–µ–º.
	‚Ä¢	–î–ª—è –∫–∞–∂–¥–æ–≥–æ ‚Äú–≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ ‚Üí –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ‚Äù:
	‚Ä¢	context.user_data["call_lookup:pending"]
	‚Ä¢	context.user_data["auth:step"]
	‚Ä¢	context.user_data["reports:args"]
	‚Ä¢	–û–±—â–∏–π filters.TEXT & ~filters.COMMAND:
	‚Ä¢	—Ç–æ–ª—å–∫–æ –≤ –∫–æ–Ω—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä group=10)
	‚Ä¢	–Ω–∞—á–∏–Ω–∞–µ—Ç —Å if not context.user_data.get("X:pending"): return

–≠—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å ‚Äú–∫–Ω–æ–ø–∫–∏ –º–æ–ª—á–∞—Ç‚Äù.

–®–∞–≥ 3. –ú–∏–≥—Ä–∞—Ü–∏—è —Ñ–∏—á –ø–æ –æ–¥–Ω–æ–π

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
	1.	admin_users + admin_panel (—Å–∞–º–∞—è ‚Äú–∫—Ä–∏—Ç–∏—á–Ω–∞—è‚Äù –∑–æ–Ω–∞ –∏ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –∫–ª–∏–∫–æ–≤)
	2.	call_lookup (—Ç–∞–º –º–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π + –ø–∞–≥–∏–Ω–∞—Ü–∏—è)
	3.	reports
	4.	auth wizard
	5.	–æ—Å—Ç–∞–ª—å–Ω–æ–µ

–ù–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –ø—Ä–∞–≤–∏–ª–æ: –æ–¥–Ω–∞ —Ñ–∏—á–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é (callbacks + keyboards + state), –ø–æ—Ç–æ–º —Å–ª–µ–¥—É—é—â–∞—è.

–®–∞–≥ 4. –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ: –¥–∞ (–∏ –æ–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ñ–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–æ)

–¢–≤–æ–π —Å–ø–∏—Å–æ–∫ happy-path —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π. –î–æ–±–∞–≤—å –µ—â—ë –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è, –∫–æ—Ç–æ—Ä—ã–µ —É —Ç–µ–±—è —á–∞—â–µ –ª–æ–º–∞—é—Ç—Å—è:
	‚Ä¢	–Ω–∞—á–∞—Ç—å ‚Äú–≤–≤–æ–¥ —Ç–µ–ª–µ—Ñ–æ–Ω–∞‚Äù –≤ call_lookup ‚Üí —É–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É ‚Üí –≤–≤–µ—Å—Ç–∏ —Ç–µ–∫—Å—Ç ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ç–µ–∫—Å—Ç –ù–ï –æ–±—Ä–∞–±–æ—Ç–∞–ª—Å—è call_lookup (—Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–±—Ä–æ—à–µ–Ω–æ)
	‚Ä¢	–Ω–∞–∂–∞—Ç—å –æ–¥–Ω—É reply-–∫–Ω–æ–ø–∫—É 10 —Ä–∞–∑ –ø–æ–¥—Ä—è–¥ ‚Üí —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç —á—É–∂–∏–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã

–®–∞–≥ 5. –ß–∏—Å—Ç–∫–∞ –ª–µ–≥–∞—Å–∏: —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ 80‚Äì90%

–î–∞, —É–¥–∞–ª–∏—Ç—å:
	‚Ä¢	—Å—Ç–∞—Ä—ã–µ –ø—Ä–µ—Ñ–∏–∫—Å—ã
	‚Ä¢	—Ä—É—á–Ω—ã–µ split(":") —Ç–∞–º, –≥–¥–µ –µ—Å—Ç—å –∫–æ–¥–µ–∫
	‚Ä¢	–≤—Ä–µ–º–µ–Ω–Ω—ã–µ unpack/legacy helpers

–ù–æ —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ —Ä–µ–∞–ª—å–Ω–æ –≤–∏–¥–Ω–æ –ø–æ grep/–ª–æ–≥–∞–º, —á—Ç–æ –ª–µ–≥–∞—Å–∏ –ø–æ—á—Ç–∏ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç.

‚∏ª

–ö–æ—Ä–æ—Ç–∫–∏–π –≤–µ—Ä–¥–∏–∫—Ç –ø–æ —Ç–≤–æ–µ–º—É —Å–ø–∏—Å–∫—É
	‚Ä¢	‚Äú–î–æ–±–∏—Ç—å –µ–¥–∏–Ω—ã–π UI-–ø—Ä–æ—Ç–æ–∫–æ–ª‚Äù ‚Äî –¥–∞, –Ω–æ —á–µ—Ä–µ–∑ –∞–¥–∞–ø—Ç–µ—Ä, –Ω–µ —Å—Ä–∞–∑—É –≤—ã—Ä–µ–∑–∞—Ç—å –ª–µ–≥–∞—Å–∏.
	‚Ä¢	‚Äú–£–¥–∞–ª–∏—Ç—å –æ—Å—Ç–∞—Ç–∫–∏ admin:/admincmd:‚Äù ‚Äî –¥–∞, –Ω–æ –ø–æ—Å–ª–µ–¥–Ω–∏–º —à–∞–≥–æ–º.
	‚Ä¢	‚Äú–ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è‚Äù ‚Äî –¥–∞, —ç—Ç–æ –Ω–∞–¥–æ –¥–µ–ª–∞—Ç—å –æ–¥–Ω–∏–º –∏–∑ –ø–µ—Ä–≤—ã—Ö.
	‚Ä¢	‚ÄúTEXT MessageHandler –≤ –∫–æ–Ω—Ü–µ –∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–≤–æ—ë–º –∫–ª—é—á–µ‚Äù ‚Äî –¥–∞, –∫—Ä–∏—Ç–∏—á–Ω–æ.
	‚Ä¢	‚Äú–†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ + –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è‚Äù ‚Äî –¥–∞, –∏–Ω–∞—á–µ —Ç—ã –Ω–µ –ø–æ–π–º–∞–µ—à—å —Ä–µ–≥—Ä–µ—Å—Å–∏–∏.

‚∏ª

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äú–º–∏–Ω–∏–º—É–º —Ä–∞–±–æ—Ç, –º–∞–∫—Å–∏–º—É–º —ç—Ñ—Ñ–µ–∫—Ç–∞‚Äù

–°–¥–µ–ª–∞–π –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å —Ä–æ–≤–Ω–æ 3 –≤–µ—â–∏:
	1.	–∞–¥–∞–ø—Ç–µ—Ä –ª–µ–≥–∞—Å–∏ callback ‚Üí –Ω–æ–≤—ã–π –∫–æ–¥–µ–∫
	2.	namespace-—Å–æ—Å—Ç–æ—è–Ω–∏—è + —Å—Ç—Ä–æ–≥–∏–µ –≥–µ–π—Ç—ã –Ω–∞ TEXT-—Ö–µ–Ω–¥–ª–µ—Ä—ã
	3.	–æ–¥–∏–Ω —Å—Ç–∞–Ω–¥–∞—Ä—Ç ‚Äú–≤—Å–µ –∫–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–µ —Å–ø–∞–º—è—Ç –Ω–æ–≤—ã–º–∏‚Äù

–≠—Ç–æ —É–∂–µ –æ–±—ã—á–Ω–æ —É–±–∏—Ä–∞–µ—Ç 70% ‚Äú–∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç / —Å–ª–æ–º–∞–ª —Å–æ—Å–µ–¥–Ω–µ–µ‚Äù.

–ï—Å–ª–∏ –ø—Ä–∏—à–ª—ë—à—å —Ç–µ–∫—É—â–∏–π —Å–ø–∏—Å–æ–∫ application.add_handler(...) —Å group –∏ –ø–æ—Ä—è–¥–∫–æ–º (–∏–∑ main.py), –º–æ–∂–Ω–æ —Ç–æ—á–µ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å, –∫–∞–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–µ–π—á–∞—Å –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ —Å—ä–µ–¥–∞—é—Ç reply-—Ç–µ–∫—Å—Ç –∏ –ø–æ—á–µ–º—É.
