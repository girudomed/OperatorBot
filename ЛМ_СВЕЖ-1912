–î–∞, —ç—Ç–æ –¥–µ–ª–∞—Ç—å –Ω–∞–¥–æ, –Ω–æ –Ω–µ ‚Äú–≤—Å—ë —Å—Ä–∞–∑—É –∏ –≤–µ–∑–¥–µ‚Äù. –î–µ–ª–∞–π –ø–æ —Å–ª–æ—è–º, –∏–Ω–∞—á–µ —Ç—ã —É—Ç–æ–Ω–µ—à—å –∏ —Å–Ω–æ–≤–∞ –Ω–∞—á–Ω—ë—à—å ‚Äú—á–∏–Ω—é –æ–¥–Ω–æ ‚Äî –ª–æ–º–∞—é –¥—Ä—É–≥–æ–µ‚Äù.

1) –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ: ‚Äú–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã‚Äù –≥–æ—Ç–æ–≤–∞ ‚Äî —ç—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç–æ–≤—ã–π –±–ª–æ–∫

–¢–æ, —á—Ç–æ —Ç—ã —Å–¥–µ–ª–∞–ª –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º (24—á/7/14/30/180) ‚Äî —ç—Ç–æ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (KPI/—Ñ–∞–∫—Ç—ã). –ï—ë –Ω–µ —Ç—Ä–æ–≥–∞–µ–º, —Ç–æ–ª—å–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º.

LM ‚Äî —ç—Ç–æ —Å–ª–æ–π —Ä–∞—Å—á—ë—Ç–æ–≤ (LM_value) + —ç–∫—Ä–∞–Ω—ã, –∫–æ—Ç–æ—Ä—ã–µ –¥–∞—é—Ç –¥–µ–π—Å—Ç–≤–∏—è: —Ä–∏—Å–∫–∏/–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏/–ø—Ä–æ–≥–Ω–æ–∑ –∏ —Å–ø–∏—Å–∫–∏ –æ–±—ä–µ–∫—Ç–æ–≤ (–∑–≤–æ–Ω–∫–∏/–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã) –¥–ª—è –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

‚∏ª

2) ‚Äú–ù–∞–¥–æ –ª–∏ –¥–µ–ª–∞—Ç—å‚Äù –ø–ª–∞–Ω –∏–∑ —Ç–≤–æ–µ–≥–æ —Å–ø–∏—Å–∫–∞ (AdminCB, namespaces, —á–∏—Å—Ç–∫–∞ legacy)?

–í–µ—Ä–¥–∏–∫—Ç: –î–ê, –Ω–æ —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø–æ—Ä—è–¥–∫–æ–º

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 0 ‚Äî —á—Ç–æ–±—ã –±–æ—Ç –Ω–µ ‚Äú—É–º–∏—Ä–∞–ª‚Äù –∏ –Ω–µ —Å–æ–∑–¥–∞–≤–∞–ª –∏–ª–ª—é–∑–∏—é ‚Äú–∫–Ω–æ–ø–∫–∏ –Ω–µ —Ä–µ–∞–≥–∏—Ä—É—é—Ç‚Äù
	1.	–ü–æ—á–∏–Ω–∏—Ç—å runtime-–±–∞–≥ –∏–∑ –ª–æ–≥–æ–≤:
AttributeError: '_CallLookupHandlers' object has no attribute '_send_usage_hint'
–≠—Ç–æ —á–∏—Å—Ç–∞—è –ø–æ–ª–æ–º–∫–∞ (–ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–ª/—É–¥–∞–ª–∏–ª –º–µ—Ç–æ–¥). –ü–æ–∫–∞ –Ω–µ –∏—Å–ø—Ä–∞–≤–∏—à—å ‚Äî –ª—é–±—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è –±—É–¥—É—Ç —Ç–æ–Ω—É—Ç—å –≤ –æ—à–∏–±–∫–∞—Ö.
	2.	–°—Ç–∞–±–∏–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–µ—Ç—å PTB polling
–£ —Ç–µ–±—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ: httpx.RemoteProtocolError: Server disconnected without sending a response ‚Üí telegram.error.NetworkError
–≠—Ç–æ —Ä–µ–∞–ª—å–Ω–æ –º–æ–∂–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –∫–∞–∫ ‚Äú–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –º–æ–ª—á–∏—Ç‚Äù, –ø–æ—Ç–æ–º—É —á—Ç–æ –±–æ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –∞–ø–¥–µ–π—Ç—ã.
–ú–∏–Ω–∏–º—É–º: –Ω–æ—Ä–º–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–∞—É—Ç—ã/–ø—É–ª –∏ retry-–ª–æ–≥–∏–∫–∞ –≤ request (PTB –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–º–µ–Ω—è—Ç—å request).

‚∏ª

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 ‚Äî —á—Ç–æ–±—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–æ –ª–æ–º–∞—Ç—å—Å—è –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–µ
	3.	–ï–¥–∏–Ω—ã–π UI-–ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è inline (AdminCB/parse/create) ‚Äî –¥–æ–±–∏—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
–≠—Ç–æ —Ä–µ–∑–∫–æ —Å–Ω–∏–∂–∞–µ—Ç —Ö–∞–æ—Å –≤ callback-—Ä–æ—É—Ç–∏–Ω–≥–µ. –û—Å–æ–±–µ–Ω–Ω–æ –≤–∞–∂–Ω–æ —É–±—Ä–∞—Ç—å:

	‚Ä¢	admin:*/admincmd:*/—Ä—É—á–Ω—ã–µ split(":")
	‚Ä¢	–ª—é–±—ã–µ ‚Äú–≤—Ä–µ–º–µ–Ω–Ω—ã–µ‚Äù –ø–∞—Ä—Å–µ—Ä—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–µ–∂–∏–≤—É—Ç –º–∏–≥—Ä–∞—Ü–∏—é –∏ –±—É–¥—É—Ç –ª–æ–≤–∏—Ç—å –º—É—Å–æ—Ä

	4.	–ò–∑–æ–ª—è—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è text-flow (namespace –≤ context.user_data) ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
–ü–æ–∫–∞ —É —Ç–µ–±—è –µ—Å—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–∏ ‚Äú–≤–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ ‚Üí –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ‚Äù, –±–µ–∑ namespace —Ç—ã –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—à—å –ª–æ–≤–∏—Ç—å:

	‚Ä¢	–ø–µ—Ä–µ—Ö–≤–∞—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–µ —Ç–µ–º handler‚Äô–æ–º
	‚Ä¢	–∑–∞–ª–∏–ø–∞–Ω–∏–µ —Ä–µ–∂–∏–º–∞ –ø—Ä–∏ —É—Ö–æ–¥–µ –≤ –¥—Ä—É–≥–æ–π —ç–∫—Ä–∞–Ω

–ü—Ä–∞–≤–∏–ª–æ: –∫–∞–∂–¥—ã–π —Ç–∞–∫–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π –∏–º–µ–µ—Ç —Å–≤–æ–π –∫–ª—é—á, –∞ MessageHandler –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –µ–≥–æ –∏ —Å—Ç–æ–∏—Ç –≤ –∫–æ–Ω—Ü–µ (group=10 –∏–ª–∏ –Ω–∏–∂–µ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É).

‚∏ª

–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞
	5.	Happy-path —á–µ–∫–ª–∏—Å—Ç ‚Äî –¥–∞, –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω (—ç—Ç–æ —Ç–≤–æ–π —Ä–µ–≥—Ä–µ—Å—Å)
	6.	–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –¥–∞, –∏–Ω–∞—á–µ —á–µ—Ä–µ–∑ 2 –Ω–µ–¥–µ–ª–∏ —Ç—ã —Å–∞–º –≤–µ—Ä–Ω—ë—à—å—Å—è –≤ ‚Äú–ø–æ—á–µ–º—É —Ç–∞–∫‚Äù.

‚∏ª

3) –ñ—ë—Å—Ç–∫–æ –ø—Ä–æ LM-—ç–∫—Ä–∞–Ω –Ω–∞ —Å–∫—Ä–∏–Ω–µ

–¢–æ –º–µ–Ω—é ‚Äú‚ö° –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ / üí∞ –ö–æ–Ω–≤–µ—Ä—Å–∏–∏ / ‚≠ê –ö–∞—á–µ—Å—Ç–≤–æ / ‚ö†Ô∏è –†–∏—Å–∫–∏ / üîÆ –ü—Ä–æ–≥–Ω–æ–∑—ã / üìä –°–≤–æ–¥–∫–∞‚Äù ‚Äî —ç—Ç–æ –Ω–µ LM, —ç—Ç–æ ‚Äú–≤—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∞‚Äù.
LM –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Ç–∞–º, –≥–¥–µ:
	‚Ä¢	–Ω–∞ –ø–µ—Ä–≤–æ–º —ç–∫—Ä–∞–Ω–µ –µ—Å—Ç—å —Å–∏–≥–Ω–∞–ª—ã (‚Äú—á—Ç–æ –≥–æ—Ä–∏—Ç‚Äù),
	‚Ä¢	–µ—Å—Ç—å –æ–±—ä–µ–∫—Ç—ã (‚Äú–∫–∞–∫–∏–µ –∑–≤–æ–Ω–∫–∏/–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã –¥–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—É‚Äù),
	‚Ä¢	–µ—Å—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ (‚Äú–ø–µ—Ä–µ–∑–≤–æ–Ω–∏—Ç—å/–ø—Ä–æ–≤–µ—Ä–∏—Ç—å/—Ä–∞–∑–æ–±—Ä–∞—Ç—å‚Äù).

–°–µ–π—á–∞—Å —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω–∞—è –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–≤–µ—Ä—Ö —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

‚∏ª

4) –ß—Ç–æ –ø–∏–ª–∏—Ç—å –¥–∞–ª—å—à–µ: –º–∏–Ω–∏–º–∞–ª—å–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π LM-MVP (–±–µ–∑ —Ñ–∞–Ω—Ç–∞–∑–∏–π)

–û–ø–∏—Ä–∞–µ–º—Å—è –Ω–∞ —Ç–≤–æ–π LM_METRICS_REFERENCE.md: –º–µ—Ç—Ä–∏–∫–∏ —É–∂–µ –æ–ø–∏—Å–∞–Ω—ã, —Ñ–æ—Ä–º–∞—Ç LM_value —Ç–æ–∂–µ.

–®–∞–≥ A ‚Äî –î–∞–Ω–Ω—ã–µ/–¥–≤–∏–∂–æ–∫ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç)
	1.	–¢–∞–±–ª–∏—Ü–∞ lm_value (—É–∑–∫–∏–π —Ñ–æ—Ä–º–∞—Ç: history_id + metric_code ‚Üí value_numeric/value_label/value_json, –≤–µ—Ä—Å–∏—è/–∏—Å—Ç–æ—á–Ω–∏–∫ —Ä–∞—Å—á—ë—Ç–∞).
	2.	–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç (–∫–∞–∫ —Ç–≤–æ–π ETL):

	‚Ä¢	–±–µ—Ä—ë—à—å –Ω–æ–≤—ã–µ/–æ–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ –∑–≤–æ–Ω–∫–∏ (history)
	‚Ä¢	–ø–æ–¥—Ç—è–≥–∏–≤–∞–µ—à—å call_scores (–µ—Å–ª–∏ –µ—Å—Ç—å)
	‚Ä¢	–∞–ø—Å—ë—Ä—Ç–∏—à—å –º–µ—Ç—Ä–∏–∫–∏ –≤ lm_value

–®–∞–≥ B ‚Äî –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π UX –¥–ª—è LM (3 —É—Ä–æ–≤–Ω—è)

–£—Ä–æ–≤–µ–Ω—å 1: LM –°–≤–æ–¥–∫–∞ (–æ–¥–∏–Ω —ç–∫—Ä–∞–Ω)
–ü–æ–∫–∞–∂–∏ 6‚Äì9 –∫–ª—é—á–µ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ + ‚Äú—Å–≤–µ—Ç–æ—Ñ–æ—Ä‚Äù:
	‚Ä¢	–Ω–∞–≥—Ä—É–∑–∫–∞: queue_impact_index (avg + p95)
	‚Ä¢	–∫–æ–Ω–≤–µ—Ä—Å–∏—è: conversion_score (avg) + lost_opportunity_score (avg)
	‚Ä¢	–∫–∞—á–µ—Å—Ç–≤–æ: normalized_call_score (avg) + script_risk_index (avg)
	‚Ä¢	—Ä–∏—Å–∫–∏: –¥–æ–ª—è complaint_risk_flag=true, –¥–æ–ª—è followup_needed_flag=true, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ churn_risk_level
	‚Ä¢	–ø—Ä–æ–≥–Ω–æ–∑: —Å—Ä–µ–¥–Ω–µ–µ conversion_prob_forecast, complaint_prob (–∏–ª–∏ —Ç–æ–ø-—Ä–∏—Å–∫–∏)

–ö–Ω–æ–ø–∫–∏: –†–∏—Å–∫–∏, –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –î–µ—Ç–∞–ª–∏, –û–±–Ω–æ–≤–∏—Ç—å, –ù–∞–∑–∞–¥

–£—Ä–æ–≤–µ–Ω—å 2: –î–µ—Ç–∞–ª–∏ –≥—Ä—É–ø–ø—ã
–¢–≤–æ–∏ 6 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ç–∞–º —É–º–µ—Å—Ç–Ω—ã, –Ω–æ –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–π:
	‚Ä¢	3 –º–µ—Ç—Ä–∏–∫–∏ (–∑–Ω–∞—á–µ–Ω–∏–µ + –∫—Ä–∞—Ç–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è)
	‚Ä¢	‚Äú—á—Ç–æ —É—Ö—É–¥—à–∏–ª–æ‚Äù (–¥—Ä–∞–π–≤–µ—Ä—ã: –æ–ø–µ—Ä–∞—Ç–æ—Ä/—á–∞—Å/–∫–∞—Ç–µ–≥–æ—Ä–∏—è)

–£—Ä–æ–≤–µ–Ω—å 3: Action lists
–≠—Ç–æ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç LM ‚Äú–ø—Ä–æ–¥—É–∫—Ç–æ–º‚Äù:
	‚Ä¢	followup_needed_flag=true ‚Üí —Å–ø–∏—Å–æ–∫ –∑–≤–æ–Ω–∫–æ–≤/–∫–ª–∏–µ–Ω—Ç–æ–≤ –Ω–∞ –ø–µ—Ä–µ–∑–≤–æ–Ω
	‚Ä¢	complaint_prob –≤—ã—Å–æ–∫–∏–π ‚Üí —Å–ø–∏—Å–æ–∫ –∫–µ–π—Å–æ–≤ –Ω–∞ –¥–µ—ç—Å–∫–∞–ª–∞—Ü–∏—é
	‚Ä¢	lost_opportunity_score –≤—ã—Å–æ–∫–∏–π ‚Üí —Å–ø–∏—Å–æ–∫ ‚Äú–ø–æ—Ç–µ—Ä–∏ –¥–µ–Ω–µ–≥‚Äù
	‚Ä¢	cross_sell_potential –≤—ã—Å–æ–∫–∏–π ‚Üí —Å–ø–∏—Å–æ–∫ ‚Äú–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–æ–ø—Ä–æ–¥–∞–∂–∏‚Äù
	‚Ä¢	churn_risk_level=high ‚Üí —Å–ø–∏—Å–æ–∫ —É–¥–µ—Ä–∂–∞–Ω–∏—è

‚∏ª

5) –ö–∞–∫ —ç—Ç–æ ‚Äú–∫–æ—à–µ—Ä–Ω–æ‚Äù –≤—Å—Ç—Ä–æ–∏—Ç—å –≤ —Ç–≤–æ—é —Ç–µ–∫—É—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

–ú–æ–¥—É–ª–∏ ‚Äî –¥–∞, –Ω–æ –ø–æ —Ñ–∏—á–∞–º, –Ω–µ ‚Äú—ç–∫—Ä–∞–Ω=—Ñ–∞–π–ª‚Äù

–î–ª—è LM —Å–¥–µ–ª–∞–π –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ–∏—á—É, –Ω–∞–ø—Ä–∏–º–µ—Ä:

app/telegram/features/lm/
  handlers.py
  keyboards.py
  callbacks.py
  repo.py

	‚Ä¢	—Å–≤–æ–π prefix (–Ω–∞–ø—Ä–∏–º–µ—Ä adm:lm:* –∏–ª–∏ –≤–æ–æ–±—â–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π lm:*)
	‚Ä¢	–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã —Ç–æ–ª—å–∫–æ –≤ keyboards.py
	‚Ä¢	–æ–¥–∏–Ω register(application, deps)
	‚Ä¢	–Ω–∏–∫–∞–∫–∏—Ö —Ä—É—á–Ω—ã—Ö split(":") ‚Äî —Ç–æ–ª—å–∫–æ –∫–æ–¥–µ–∫

‚∏ª

6) –ß—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –¥–µ–ª–∞—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å (–æ—á–µ—Ä–µ–¥—å —Ä–∞–±–æ—Ç)
	1.	–ò—Å–ø—Ä–∞–≤–∏—Ç—å _send_usage_hint –≤ call_lookup (–∏–ª–∏ –≤–µ—Ä–Ω—É—Ç—å –º–µ—Ç–æ–¥, –∏–ª–∏ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ –Ω–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–π).
	2.	–£–∫—Ä–µ–ø–∏—Ç—å polling-—Å–µ—Ç—å (—Ç–∞–π–º–∞—É—Ç—ã/–ø—É–ª, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚ÄúServer disconnected‚Äù –∫–∞–∂–¥—ã–µ N –º–∏–Ω—É—Ç).
	3.	–î–æ–±–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é callback‚Äô–æ–≤ –≤ –∞–¥–º–∏–Ω–∫–µ –¥–æ –µ–¥–∏–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ (—Å–Ω–µ—Å—Ç–∏ legacy admin:*).
	4.	–í–≤–µ—Å—Ç–∏ namespaces –¥–ª—è –≤—Å–µ—Ö text-flow —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ + –ø–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ª–æ–≤—Ü—ã –≤ —Å–∞–º—ã–π –∫–æ–Ω–µ—Ü.
	5.	–ü–æ—Å–ª–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ ‚Äî LM-MVP:
	‚Ä¢	–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ lm_value
	‚Ä¢	—ç–∫—Ä–∞–Ω ‚ÄúLM –°–≤–æ–¥–∫–∞‚Äù
	‚Ä¢	2 action-–ª–∏—Å—Ç–∞: followup_needed –∏ complaint_prob (—Å–∞–º—ã–µ –ø–æ–ª–µ–∑–Ω—ã–µ)

–ï—Å–ª–∏ –¥–∞—à—å:
	‚Ä¢	—Ç–µ–∫—É—â—É—é —Å—Ö–µ–º—É/–∫–æ–¥, –≥–¥–µ —É —Ç–µ–±—è —Å—á–∏—Ç–∞–µ—Ç—Å—è/–ø–∏—à–µ—Ç—Å—è lm_value (–∏–ª–∏ –≥–¥–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª),
	‚Ä¢	–∏ —á—Ç–æ —Å–µ–π—á–∞—Å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∂–¥–∞—è –∏–∑ 6 –∫–Ω–æ–ø–æ–∫ LM-–º–µ–Ω—é (—Ç–µ–∫—Å—Ç/SQL/—Ä–µ–ø–æ-–º–µ—Ç–æ–¥—ã),
—è —Ä–∞–∑–ª–æ–∂—É –≤ —Ç–æ—á–Ω—ã–π backlog: –∫–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –∫–∞–∫–∏–µ —ç–∫—Ä–∞–Ω—ã, –∫–∞–∫–∏–µ callback‚Äô–∏ –∏ –∫–∞–∫–∏–µ –∫–ª—é—á–∏ user_data –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É –∫–∞–∂–¥–æ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è.






–î–∞, —Å—á–∏—Ç–∞—Ç—å –Ω—É–∂–Ω–æ. LM ‚Äî —ç—Ç–æ –Ω–µ ‚Äú—ç–∫—Ä–∞–Ω –≤ –±–æ—Ç–µ‚Äù, –∞ —Å–ª–æ–π —Ä–∞—Å—á—ë—Ç–æ–≤ –≤ –±—ç–∫–µ–Ω–¥–µ, –∫–æ—Ç–æ—Ä—ã–π –±–µ—Ä—ë—Ç —Ç–≤–æ–π call_scores (–∏ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ call_history) –∏ –ø–∏—à–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ lm_value. UI –ø–æ—Ç–æ–º —Ç–æ–ª—å–∫–æ —á–∏—Ç–∞–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç.

1) –ß—Ç–æ —É —Ç–µ–±—è —É–∂–µ –µ—Å—Ç—å –¥–ª—è LM (–ø–æ call_scores) ‚Äî –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ

–ü–æ —Ç–≤–æ–µ–π —Ç–∞–±–ª–∏—Ü–µ –µ—Å—Ç—å –≤—Å—ë, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è LM v1 (rule-based) –∏–∑ LM_METRICS_REFERENCE.md:
	‚Ä¢	talk_duration ‚Üí operational (efficiency / queue_impact / answered vs missed)
	‚Ä¢	outcome (record, lead_no_record, info_only, non_target, cancelled_by_patient –∏ —Ç.–¥.) ‚Üí conversion/risk/forecast
	‚Ä¢	call_score ‚Üí quality/risk/complaint
	‚Ä¢	number_checklist ‚Üí checklist coverage
	‚Ä¢	call_category + refusal_reason/refusal_group ‚Üí script_risk / churn_risk / followup

–¢–æ –µ—Å—Ç—å ‚Äú–º–∞—Ç-–ª–æ–≥–∏–∫–∞‚Äù —Å–µ–π—á–∞—Å ‚Äî —ç—Ç–æ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã/–ø—Ä–∞–≤–∏–ª–∞, –∞ –Ω–µ ‚Äú–Ω–∞—Å—Ç–æ—è—â–∏–π ML‚Äù. –ù–æ —ç—Ç–æ –≤—Å—ë —Ä–∞–≤–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è —á–∞—Å—Ç—å –±—ç–∫–∞, –∏–Ω–∞—á–µ LM-–º–µ–Ω—é –±—É–¥–µ—Ç –ø—É—Å—Ç–æ–π –æ–±—ë—Ä—Ç–∫–æ–π.

‚∏ª

2) –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π ‚ÄúLM-–¥–≤–∏–∂–æ–∫‚Äù (—á—Ç–æ –∏–º–µ–Ω–Ω–æ —Å—á–∏—Ç–∞—Ç—å) ‚Äî –ø—Ä—è–º–æ –ø–æ —Ç–≤–æ–µ–º—É —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—É

–ù–∏–∂–µ ‚Äî —Ä–æ–≤–Ω–æ —Ç–æ, —á—Ç–æ –Ω–∞–¥–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –≤–æ—Ä–∫–µ—Ä–µ/—Å–µ—Ä–≤–∏—Å–µ (LM v1), –∏—Å–ø–æ–ª—å–∑—É—è –ø–æ–ª—è call_scores:

Operational
	‚Ä¢	response_speed_score (0‚Äì100)
85, –µ—Å–ª–∏ talk_duration > 0, –∏–Ω–∞—á–µ 20
	‚Ä¢	talk_time_efficiency (0‚Äì100)
–µ—Å–ª–∏ talk_duration > 30: min(100, talk_duration / 3)
–∏–Ω–∞—á–µ: talk_duration * 2
	‚Ä¢	queue_impact_index (0‚Äì100, –≤—ã—à–µ —Ö—É–∂–µ)
min(100, (talk_duration / 300) * 100)

Conversion
	‚Ä¢	conversion_score (0‚Äì100)
record -> 100, lead_no_record -> 50, info/navigation -> 20, –∏–Ω–∞—á–µ 10
	‚Ä¢	lost_opportunity_score (0‚Äì100, –≤—ã—à–µ —Ö—É–∂–µ)
–µ—Å–ª–∏ is_target=1 –∏ outcome != record ‚Üí 80,
–µ—Å–ª–∏ is_target=1 –∏ record ‚Üí 0,
–∏–Ω–∞—á–µ 20
	‚Ä¢	cross_sell_potential (0‚Äì100)
–µ—Å–ª–∏ outcome=record ‚Üí 70
–µ—Å–ª–∏ –µ—Å—Ç—å requested_service_id ‚Üí 40
–∏–Ω–∞—á–µ 10

Quality
	‚Ä¢	checklist_coverage_ratio (0‚Äì100)
min(100, (number_checklist / 10) * 100) (–≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–µ ‚Äúmax=10‚Äù)
	‚Ä¢	normalized_call_score (0‚Äì100)
–µ—Å–ª–∏ call_score <= 10: call_score * 10 –∏–Ω–∞—á–µ call_score
clamp –≤ [0..100]
	‚Ä¢	script_risk_index (0‚Äì100, –≤—ã—à–µ —Ö—É–∂–µ)
–ø–æ call_score: <=3 -> 80, <=5 -> 50, <=7 -> 30, >7 -> 10
+20, –µ—Å–ª–∏ call_category = ‚Äú–ñ–∞–ª–æ–±–∞‚Äù –∏–ª–∏ ‚Äú–û—Ç–º–µ–Ω–∞ –∑–∞–ø–∏—Å–∏‚Äù

Risk
	‚Ä¢	churn_risk_level (label + numeric)
complaint ‚Üí 90/high, cancellation ‚Üí 70/high, refusal/no interest ‚Üí 60/medium, has refusal_reason ‚Üí 50/medium, booked ‚Üí 10/low, default ‚Üí 30/medium
	‚Ä¢	complaint_risk_flag (bool + score)
complaint ‚Üí 100/true, score<3 ‚Üí 60/true, cancellation ‚Üí 40/false, default 10/false, —Ñ–ª–∞–≥ –µ—Å–ª–∏ >=50
	‚Ä¢	followup_needed_flag (bool)
true, –µ—Å–ª–∏ outcome=lead_no_record –∏–ª–∏ call_category in [‚Äú–ñ–∞–ª–æ–±–∞‚Äù, ‚Äú–õ–∏–¥ (–±–µ–∑ –∑–∞–ø–∏—Å–∏)‚Äù]

Forecast (–≤ v1 —ç—Ç–æ –ù–ï ‚Äú—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞/–º–æ–¥–µ–ª—å‚Äù, –∞ —ç–≤—Ä–∏—Å—Ç–∏–∫–∞)
	‚Ä¢	conversion_prob_forecast (0‚Äì1): record=1.0, lead_no_record=0.35, target=0.20, default=0.05
	‚Ä¢	second_call_prob (0‚Äì1): info/navigation=0.60, lead_no_record=0.45, booked=0.15, default=0.25
	‚Ä¢	complaint_prob (0‚Äì1): complaint=1.0, score<3=0.40, cancellation=0.25, default=0.05

Aux
	‚Ä¢	lm_version_tag (–Ω–∞–ø—Ä–∏–º–µ—Ä lm_v1)
	‚Ä¢	calc_profile (–Ω–∞–ø—Ä–∏–º–µ—Ä: –Ω–æ—á—å/–≤—ã—Ö–æ–¥–Ω–æ–π/–¥–µ—Ñ–æ–ª—Ç –ø–æ –≤—Ä–µ–º–µ–Ω–∏ call_date)

‚∏ª

3) –ö—Ä–∏—Ç–∏—á–Ω–∞—è –≤–µ—â—å –ø–æ —Ç–≤–æ–∏–º –¥–∞–Ω–Ω—ã–º: call_scores –º–æ–∂–µ—Ç –±—ã—Ç—å –ù–ï 1 —Å—Ç—Ä–æ–∫–∞ –Ω–∞ history_id

–£ —Ç–µ–±—è –µ—Å—Ç—å score_date, –∏ –≤–∏–¥–Ω–æ, —á—Ç–æ –∑–∞–ø–∏—Å–∏ –∏–¥—É—Ç –ø–∞—á–∫–∞–º–∏. –ó–Ω–∞—á–∏—Ç –ø—Ä–∞–≤–∏–ª–æ:
	‚Ä¢	–¥–ª—è —Ä–∞—Å—á—ë—Ç–æ–≤ LM –±–µ—Ä—ë–º –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–∫–æ—Ä–∏–Ω–≥ –Ω–∞ history_id (max score_date, –∏–ª–∏ max id –ø—Ä–∏ —Ä–∞–≤–Ω—ã—Ö).

–ò–Ω–∞—á–µ –º–µ—Ç—Ä–∏–∫–∏ –±—É–¥—É—Ç ‚Äú–ø—Ä—ã–≥–∞—Ç—å‚Äù –∏ –ª–æ–º–∞—Ç—å –¥–æ–≤–µ—Ä–∏–µ.

–ü—Ä–∏–º–µ—Ä –≤—ã–±–æ—Ä–∫–∏ ‚Äú–ø–æ—Å–ª–µ–¥–Ω—è—è –∑–∞–ø–∏—Å—å –Ω–∞ history_id‚Äù (MySQL-–ª–æ–≥–∏–∫–∞ —á–µ—Ä–µ–∑ join –Ω–∞ max score_date):

SELECT cs.*
FROM call_scores cs
JOIN (
  SELECT history_id, MAX(score_date) AS max_score_date
  FROM call_scores
  WHERE score_date >= :since
  GROUP BY history_id
) t ON t.history_id = cs.history_id AND t.max_score_date = cs.score_date;


‚∏ª

4) –ß—Ç–æ –∑–Ω–∞—á–∏—Ç ‚Äú–º–∞—Ç/—Å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑‚Äù –≤ —Ç–≤–æ—ë–º –ø—Ä–æ–µ–∫—Ç–µ (—á–µ—Å—Ç–Ω–æ)

–°–µ–π—á–∞—Å (–ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è MVP)
	‚Ä¢	—Ä–µ–∞–ª–∏–∑—É–µ—à—å rule-based LM v1 (—Ñ–æ—Ä–º—É–ª—ã –≤—ã—à–µ) ‚Üí —ç—Ç–æ –∏ –µ—Å—Ç—å ‚Äú–º–∞—Ç-–ª–æ–≥–∏–∫–∞‚Äù –ø–æ —Ç–≤–æ–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.

–°–ª–µ–¥—É—é—â–∏–π —É—Ä–æ–≤–µ–Ω—å (–∫–æ–≥–¥–∞ v1 —Å—Ç–∞–±–∏–ª–µ–Ω)

–¢–æ–≥–¥–∞ —É–∂–µ –¥–µ–ª–∞–µ—Ç—Å—è —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–∞—è –∫–∞–ª–∏–±—Ä–æ–≤–∫–∞:
	‚Ä¢	–Ω–µ ‚Äú0.35 –ø–æ—Ç–æ–º—É —á—Ç–æ —Ç–∞–∫ –ø—Ä–∏–¥—É–º–∞–ª–∏‚Äù, –∞:
	‚Ä¢	P(record | outcome=lead_no_record, utm, operator, hour, service, score_bin, talk_duration_bin) –ø–æ –∏—Å—Ç–æ—Ä–∏–∏,
	‚Ä¢	—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (Bayes / empirical smoothing), —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ –º—É—Å–æ—Ä–∞ –Ω–∞ –º–∞–ª—ã—Ö –≤—ã–±–æ—Ä–∫–∞—Ö,
	‚Ä¢	–ø–æ—Ç–æ–º –º–æ–∂–Ω–æ –ª–æ–≥—Ä–µ–≥/GBM.

–ù–æ —ç—Ç–æ –≤—Ç–æ—Ä–∞—è –∏—Ç–µ—Ä–∞—Ü–∏—è, –∏–Ω–∞—á–µ —Ç—ã —É—Ç–æ–Ω–µ—à—å: —Å–Ω–∞—á–∞–ª–∞ –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã LM –≤–æ–æ–±—â–µ —Å—á–∏—Ç–∞–ª—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∏ –ø–∏—Å–∞–ª –≤ lm_value.

‚∏ª

5) –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ –ø–æ –±—ç–∫–µ–Ω–¥—É (–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫)
	1.	LMCalculatorWorker: –±–µ—Ä—ë—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ call_scores (–ø–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ history_id) –∏ —Å—á–∏—Ç–∞–µ—Ç 6√ó3+aux –º–µ—Ç—Ä–∏–∫.
	2.	Upsert –≤ lm_value. –ù—É–∂–µ–Ω —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á –º–∏–Ω–∏–º—É–º –Ω–∞ (history_id, metric_code, lm_version_tag) (–∏–ª–∏ –±–µ–∑ –≤–µ—Ä—Å–∏–∏, –µ—Å–ª–∏ –≤–µ—Ä—Å–∏—è –æ–¥–Ω–∞).
	3.	–ê–≥—Ä–µ–≥–∞—Ç—ã –¥–ª—è —ç–∫—Ä–∞–Ω–æ–≤: avg/p95, –¥–æ–ª–∏ —Ñ–ª–∞–≥–æ–≤, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ churn_risk_level, —Ç–æ–ø-–ª–∏—Å—Ç—ã (followup/complaint/lost_opportunity).
	4.	–ü–æ—Ç–æ–º —É–∂–µ —Ä–∞—Å—à–∏—Ä—è–µ—à—å UX.

‚∏ª

6) –ß–µ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –∏–º–µ–Ω–Ω–æ –¥–ª—è ‚Äú–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–∫–∏ –ø–æ-–Ω–∞—Å—Ç–æ—è—â–µ–º—É‚Äù

response_speed_score —É —Ç–µ–±—è —Å–µ–π—á–∞—Å –≤ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ talk_duration > 0 ‚Äî —ç—Ç–æ –∑–∞–≥–ª—É—à–∫–∞.
–ï—Å–ª–∏ —Ö–æ—á–µ—à—å —Ä–µ–∞–ª—å–Ω—É—é —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–≤–µ—Ç–∞/SLA, –Ω—É–∂–Ω—ã –ø–æ–ª—è —Ç–∏–ø–∞:
	‚Ä¢	–≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è –¥–æ –æ—Ç–≤–µ—Ç–∞ (ring/queue wait),
	‚Ä¢	–ø—Ä–æ–ø—É—â–µ–Ω/—Å–±—Ä–æ—à–µ–Ω –∫–µ–º,
	‚Ä¢	–¥–ª–∏–Ω–∞ –æ—á–µ—Ä–µ–¥–∏.

–≠—Ç–æ –æ–±—ã—á–Ω–æ –ª–µ–∂–∏—Ç –≤ call_history/—Ç–µ–ª–µ—Ñ–æ–Ω–∏–∏, –Ω–µ –≤ call_scores. –¢–æ–≥–¥–∞ —Ñ–æ—Ä–º—É–ª—É –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π.

‚∏ª

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å, —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ –±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ ‚Äú–≤ –≤–æ–∑–¥—É—Ö‚Äù: —Ç—ã –¥–∞—ë—à—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã lm_value (–∏–ª–∏ —Å–∫–∏–¥—ã–≤–∞–µ—à—å –µ—ë SQL), –∏ —è:
	‚Ä¢	—Ñ–∏–∫—Å–∏—Ä—É—é –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–ª—é—á,
	‚Ä¢	–¥–∞—é upsert-—à–∞–±–ª–æ–Ω –ø–æ–¥ MySQL,
	‚Ä¢	–∏ —Ä–∞—Å–∫–ª–∞–¥—ã–≤–∞—é, –∫–∞–∫–∏–µ –∏–Ω–¥–µ–∫—Å—ã –Ω—É–∂–Ω—ã –ø–æ–¥ ‚ÄúLM –°–≤–æ–¥–∫–∞ / –¢–æ–ø —Ä–∏—Å–∫–æ–≤ / –¢–æ–ø –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π‚Äù.