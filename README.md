Вот подробная инструкция по запуску Telegram-бота на Python, включая настройку, установку зависимостей, развертывание и запуск на сервере.

### 1. **Подготовка окружения**

#### 1.1 Установка Python и Git
- Убедитесь, что у вас установлен Python версии 3.11 или выше. Если Python не установлен, его можно скачать с [официального сайта](https://www.python.org/downloads/).
- Установите Git, чтобы клонировать репозиторий бота. Инструкции по установке Git можно найти [здесь](https://git-scm.com/book/en/v2/Getting-Started-Installing-Git).

#### 1.2 Создание виртуального окружения
Создайте виртуальное окружение для вашего проекта, чтобы изолировать зависимости бота от глобальных установок Python.

```bash
python -m venv venv
```

Активируйте виртуальное окружение:

- На Windows:
  ```bash
  .\venv\Scripts\activate
  ```

- На macOS и Linux:
  ```bash
  source venv/bin/activate
  ```

### 2. **Настройка проекта**

#### 2.1 Клонирование репозитория
Клонируйте репозиторий проекта на ваш локальный компьютер:

```bash
git clone <URL_вашего_репозитория>
cd <имя_папки_репозитория>
```

#### 2.2 Установка зависимостей
Установите все необходимые зависимости, указанные в файле `requirements.txt`:

```bash
pip install -r requirements.txt
```

#### 2.3 Настройка переменных окружения
Создайте файл `.env` в корневой директории проекта, если он еще не существует. Вам необходимо указать в этом файле следующие переменные окружения:

```plaintext
TELEGRAM_TOKEN=your-telegram-bot-token
OPENAI_API_KEY=your-openai-api-key
MONGODB_URI=your-mongodb-connection-uri
```

**Пояснение:**
- `TELEGRAM_TOKEN`: Токен вашего Telegram-бота, который можно получить через [BotFather](https://t.me/botfather).
- `OPENAI_API_KEY`: API ключ OpenAI для использования GPT-моделей.
- `MONGODB_URI`: URI для подключения к вашей базе данных MongoDB.

### 3. **Подготовка базы данных**

#### 3.1 Установка MongoDB
Если у вас еще нет установленного сервера MongoDB, его можно скачать и установить с [официального сайта](https://www.mongodb.com/try/download/community).

Запустите MongoDB:

```bash
mongod --dbpath <путь_к_вашей_папке_с_данными>
```

#### 3.2 Инициализация базы данных
Убедитесь, что база данных настроена и содержит необходимые коллекции и документы для хранения данных операторов. Вы можете использовать MongoDB Compass или командную строку MongoDB для взаимодействия с базой данных.

### 4. **Запуск бота на локальном сервере**

Теперь, когда все настроено, вы можете запустить бота на своем локальном компьютере:

```bash
python bot.py
```

Если все настроено правильно, бот должен начать работать и будет обрабатывать сообщения, отправленные пользователями в Telegram.

### 5. **Развертывание на удаленном сервере**

#### 5.1 Выбор сервера
Для развертывания бота на удаленном сервере вы можете использовать любой VPS (например, DigitalOcean, AWS EC2, Linode и т.д.) или сервер с поддержкой Python.

#### 5.2 Настройка сервера
- Подключитесь к вашему серверу через SSH.
- Установите все необходимые инструменты на сервере: Python, Git, MongoDB (если необходимо), и другие зависимости.

#### 5.3 Развертывание проекта на сервере
Клонируйте репозиторий на сервер:

```bash
git clone <URL_вашего_репозитория>
cd <имя_папки_репозитория>
```

Активируйте виртуальное окружение и установите зависимости:

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

Создайте файл `.env` и настройте его для вашего серверного окружения так же, как на локальной машине.

#### 5.4 Настройка и запуск MongoDB на сервере
Если вы используете MongoDB на том же сервере, убедитесь, что MongoDB запущен и настроен.

#### 5.5 Запуск бота в фоновом режиме
Для того чтобы бот продолжал работать даже после отключения от SSH-сессии, используйте `screen` или `tmux`:

```bash
screen -S telegram-bot
```

Запустите бота:

```bash
python bot.py
```

Для выхода из сессии `screen` нажмите `Ctrl+A`, затем `D`. Бот будет продолжать работать в фоновом режиме.

### 6. **Мониторинг и отладка**

- Просматривайте логи работы бота, чтобы убедиться, что он работает правильно и отлаживайте любые возникающие ошибки.
- Вы можете использовать инструменты мониторинга, такие как `htop`, `top`, `ps` и другие для наблюдения за производительностью сервера.

### 7. **Автоматизация запуска с помощью systemd (опционально)**

Для автоматического запуска бота при перезагрузке сервера вы можете использовать `systemd`.

#### 7.1 Создайте службу `systemd`
Создайте файл службы:

```bash
sudo nano /etc/systemd/system/telegram-bot.service
```

Добавьте следующий конфигурационный файл:

```plaintext
[Unit]
Description=Telegram Bot Service
After=network.target

[Service]
User=your-username
WorkingDirectory=/path/to/your/bot
ExecStart=/path/to/your/bot/venv/bin/python /path/to/your/bot/bot.py
Restart=always

[Install]
WantedBy=multi-user.target
```

#### 7.2 Запуск и управление службой

Активируйте и запустите службу:

```bash
sudo systemctl enable telegram-bot
sudo systemctl start telegram-bot
```

Проверьте статус службы:

```bash
sudo systemctl status telegram-bot
```

### 8. **Заключение**

Теперь ваш Telegram-бот полностью развернут и должен быть готов к работе как на локальном, так и на удаленном сервере. Вы можете масштабировать его, добавлять новые функции и поддерживать его работу в долгосрочной перспективе.

# Telegram Bot with OpenAI Integration

Этот Telegram-бот предоставляет различные команды для взаимодействия с пользователями и использует OpenAI API для обработки запросов. Он также включает админ-панель для управления пользователями и администраторами.

## Установка

1. Клонируйте репозиторий или скачайте код.
2. Создайте виртуальное окружение и активируйте его:
    ```sh
    python -m venv venv
    source venv/bin/activate  # для macOS/Linux
    .\venv\Scripts\activate  # для Windows
    ```
3. Установите необходимые зависимости:
    ```sh
    pip install -r requirements.txt
    ```

## Конфигурация

1. В файле `openai_telebot.py` замените следующие строки на ваши собственные значения:
    ```python
    TELEGRAM_TOKEN = "your_telegram_token_here"
    OPENAI_API_KEY = "your_openai_api_key_here"
    ```

## Запуск

Запустите бота:
```sh
python openai_telebot.py
Команды
Общие команды
/start - Запуск бота. Логирует пользователя.
/help - Получение списка доступных команд.
/perevorot <текст> - Переворачивает введенный текст.
/caps <текст> - Преобразует текст в заглавные буквы.
/cut <текст> - Удаляет все гласные буквы из текста.
/ask <вопрос> - Отправляет вопрос модели GPT-3.5-turbo и получает ответ в текстовом и голосовом виде.
Команды для администраторов
Доступны только после получения доступа к админ-панели через команду /admin.

/admin - Доступ к админ-панели после аутентификации.
/remove_user <username> - Удаляет пользователя.
/add_admin <username> - Добавляет нового администратора.
Аутентификация
Для получения доступа к админ-панели, ответьте на загадку:

На какой IDE был написан код?
Ответ: Visual studio code

Логирование
users.log - Содержит список пользователей, использующих бота.
requests.log - Содержит историю запросов каждого пользователя.
admins.log - Содержит список администраторов.
Управление пользователями
Список пользователей отображается в users.log.
Для удаления пользователя используйте команду /remove_user <username>.
Для добавления администратора используйте команду /add_admin <username>.
Примечания
Только администраторы могут использовать команды удаления и добавления пользователей.
Команды администрирования отображаются в /help только для администраторов.
Лицензия
Этот проект лицензирован под лицензией MIT. Подробнее см. в файле LICENSE.

Файл requirements.txt
Также убедитесь, что у вас есть файл requirements.txt для установки зависимостей:

plaintext
Копировать код
pyTelegramBotAPI
openai
gtts

#Тестове сообщение 1 1 1 тест тест тест
